<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">











  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.2',
    sidebar: {"position":"left","display":"always","offset":40,"onmobile":false,"dimmer":true},
    back2top: true,
    back2top_sidebar: true,
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"搜索文章","hits_empty":"抱歉暂时没有发表相关: ${query}内容文章","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  












<script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0eeeae6f.js","daovoice")
daovoice('init', {
app_id: "06289ecd"
});
daovoice('update');
</script>



  <meta name="description" content="不物喜，不己悲，善假物，易参行！">
<meta property="og:type" content="website">
<meta property="og:title" content="布衣男儿">
<meta property="og:url" content="https://huos3203.github.io/page/11/index.html">
<meta property="og:site_name" content="布衣男儿">
<meta property="og:description" content="不物喜，不己悲，善假物，易参行！">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="布衣男儿">
<meta name="twitter:description" content="不物喜，不己悲，善假物，易参行！">



  <link rel="alternate" href="/atom.xml" title="布衣男儿" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://huos3203.github.io/page/11/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>布衣男儿</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b4a2528a681e2f23855d15a4de0abfc2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">布衣男儿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">不物喜，不己悲，善假物，易参行！</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="algolia-popup popup search-popup">
  <div class="algolia-search">
    <div class="algolia-search-input-icon">
      <i class="fa fa-search"></i>
    </div>
    <div class="algolia-search-input" id="algolia-search-input"></div>
  </div>

  <div class="algolia-results">
    <div id="algolia-stats"></div>
    <div id="algolia-hits"></div>
    <div id="algolia-pagination" class="algolia-pagination"></div>
  </div>

  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/huos3203" class="github-corner" title="关注不迷路" aria-label="关注不迷路" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/06/04/智能设备/WacomSlate笔记本使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/04/智能设备/WacomSlate笔记本使用/" class="post-title-link" itemprop="url">WacomSlate笔记本使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-06-03 23:32:45" itemprop="dateCreated datePublished" datetime="2017-06-03T23:32:45Z">2017-06-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-22 21:19:00" itemprop="dateModified" datetime="2018-09-22T21:19:00Z">2018-09-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/智能设备/" itemprop="url" rel="index"><span itemprop="name">智能设备</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/04/智能设备/WacomSlate笔记本使用/" class="leancloud_visitors" data-flag-title="WacomSlate笔记本使用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p>梳理任务列表，整理阅读笔记和思维导图，来配合iPad完成每日工作任务</p>
<h3 id="使用效率"><a href="#使用效率" class="headerlink" title="使用效率"></a>使用效率</h3><p>按时出图，分解任务，规划职业</p>
<h3 id="带来的回报"><a href="#带来的回报" class="headerlink" title="带来的回报"></a>带来的回报</h3><p>### </p>
<h3 id="Starter-playgroundbook"><a href="#Starter-playgroundbook" class="headerlink" title="Starter.playgroundbook"></a>Starter.playgroundbook</h3><p>iPad学习开发swift<br>第一步：创建书本的结构（参考模版）<a href>Starter.playgroundbook</a><br>第二步：了解模版的结构<br>第三步：增删改模版，增加个人的书本内容<br>官方建议流程：<br>Make targeted changes to the book’s content and structure in Xcode.<br>Transfer the updated book into Swift Playgrounds using iCloud or AirDrop.<br>只能使用iCloud和AirDrop来同步swift书籍同步到iPad上。<br>Open the updated book and test the changes.<br>Note any additional changes that are needed, and return to step 1.</p>
<p>最终使用方法：<br>是在iPad上的一款应用，支持swift快速开发，只需要在appStore中下载Swift Playgrounds程序。<br>在这个这个程序中有精选栏，和我的Playgorund</p>
<ol>
<li>精选：就是内置了一些有趣的swift学习编程，从基础进阶再探索，简单易学的教学</li>
<li>我的Playground：有新建，分享，编辑三个按钮，和自己的程序书架。<br>有两种方式开始编程：</li>
<li>新建一个空白的playgroundbook</li>
<li>通过iCloud 云同步已有的playgroundbook，这也是和mac端共享代码的途径（airdrop暂时没有测通，Mac端开启airdrop却看不到ipad设备），也可以通过第三方来同步，比如sync<br>源码分享：</li>
<li>点击分享按钮，再点击要分享的playgroundbook文件，然后通过airdrop方式同 Mac共享文件。不过暂时没测通。如果使用微信，qq分享似乎发送到Mac端显示的是目录，无法通过打开方式来使用swift playground 程序<br>效果分享：</li>
<li>在playgroundbook编辑页面，点击”。。。”弹出下拉列表页，提供fenxiang四种方式<ul>
<li>拍照</li>
<li>创建PDF</li>
<li>录制影片</li>
<li>实时直播（需要第三方直播软件，暂时没测试）</li>
</ul>
</li>
</ol>
<h3 id="激活iPad拥有自己的工作空间"><a href="#激活iPad拥有自己的工作空间" class="headerlink" title="激活iPad拥有自己的工作空间"></a>激活iPad拥有自己的工作空间</h3><ol>
<li>激活iPad，安装自己喜欢的几款APP</li>
<li>测试电耗，连续使用8个小时，89%到30%，耗损50%，按工作场景应该能续航16小时左右</li>
<li>尝试键盘连接，使用外设键盘编辑文本还是比较舒服的，便捷，坐等移动键盘到手</li>
<li>摸索iPad使用场景 <ol>
<li>第一屏为咨询APP主页，在这里将发现更多新的东西，和未知的兴趣点，并同步至Pocker中，即搜集箱，充满期待</li>
<li>第二屏为下一步行动列表页，将第一屏搜集到的原材料，参考四象限法则，整理筛选排优先级，加工成可执行的下一步行动，过滤不能行动的事件</li>
<li>第三屏将行动导图梳理规范化，提高趣味性，增强行动动力，自我鼓励督促完成任务，培养自觉性和对承诺的责任心，逐步养成生活习惯
　</li>
</ol>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/06/02/智能设备/麦步第一天体验/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/02/智能设备/麦步第一天体验/" class="post-title-link" itemprop="url">麦步第一天体验</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-06-02 14:39:46" itemprop="dateCreated datePublished" datetime="2017-06-02T14:39:46Z">2017-06-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:15" itemprop="dateModified" datetime="2019-01-16T21:01:15Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/智能设备/" itemprop="url" rel="index"><span itemprop="name">智能设备</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/02/智能设备/麦步第一天体验/" class="leancloud_visitors" data-flag-title="麦步第一天体验">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><p><a href="http://dev.maibu.cc/sdk/watch" target="_blank" rel="noopener">开发文档</a><br><a href="https://github.com/maibu/Maibu" target="_blank" rel="noopener">gitHub源码库</a>   </p>
<h3 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h3><h4 id="可用功能"><a href="#可用功能" class="headerlink" title="可用功能"></a>可用功能</h4><p>滴答清单，同步神速，可以使用麦步来标记完成任务</p>
<p>表盘：纯黑背景比较适合，内置白底表盘无法卸载<br>工具：计步准确，睡眠监测还行，久坐提醒不错 </p>
<h4 id="思考功能"><a href="#思考功能" class="headerlink" title="思考功能"></a>思考功能</h4><p>怎样充分使用麦步，融入到现有的时间管理习惯中</p>
<ol>
<li>开发一款麦步trello清单APP<br>需求：麦步app获取到当天的trello清单，支持查看和完成操作<br>预研：麦步无须APP账号绑定等，仅凭蓝牙是如何获取到滴答清单的？<br>原理：<br>结果：开发一款trello清单是否可行<br>1.2 文档分析：<br>在第二步：编译及打包环境<ol>
<li>gcc-arm-none-eabi-4_7-2014q2-20140408-win32.exe 编译环境</li>
<li>IDE工具Visual MWatch.exe执行编译操作。<br>可见暂时仅支持win系统开发。</li>
</ol>
</li>
</ol>
<ol start="2">
<li>借助IFTTT工具是否能将trello清单同步至麦步中<br>2.1 中间APP 选择系统提醒APP/(日历APP支持时间设置)<br>原理： 通过IFTTT工具将trello清单同步到提醒APP中，然后滴答清单读取提醒清单同步到麦步上。<br>缺点：trello开始与截止日期等属性无法同步至提醒app，由于麦步仅同步滴答清单的当天任务列表，中间必须认为设置起始时间等。</li>
</ol>
<p>日历属于一块圣地，不要轻易设置日程安排。他应该是第三象限不急重要的事情。当指定时间地点时，优先级立即为最高</p>
<ol start="3">
<li>trello创建人物是否能讲日期同步到系统提醒APP中，不可行的话，就需要单独对任务指定开始和截止时间。</li>
</ol>
<h3 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h3><p>麦步获取信息的通道：蓝牙<br>平台区别：<br>Apple手机全局提醒，安卓可以过滤app</p>
<p>针对性个例：滴答清单<br>麦步是如何针对性滴答清单，获取APP内部信息的。</p>
<p>其中的原理，涉及到，如果开发一款trello清单是否可行。</p>
<h3 id="耗电："><a href="#耗电：" class="headerlink" title="耗电："></a>耗电：</h3><p>使用计步表盘，及时更新数据，相较普通时钟表盘，电耗是否一致，差距在哪？</p>
<h3 id="trello日历订阅源"><a href="#trello日历订阅源" class="headerlink" title="trello日历订阅源"></a>trello日历订阅源</h3><p>滴答清单订阅日历功能：设置—安全与数据—订阅日历 (普通用户仅支持订阅系统日历)</p>
<h4 id="获取从trello看板中生成订阅源"><a href="#获取从trello看板中生成订阅源" class="headerlink" title="获取从trello看板中生成订阅源"></a>获取从trello看板中生成订阅源</h4><p>普通用户的看板限制的Power-Ups的一个数<br>两步设置：</p>
<ol>
<li>第一步：启动日历<br>看板的菜单项—Power-Ups—Calendar–点击启动—出现设置图标按钮，如图：</li>
<li>第二步：开启日历订阅功能（默认关闭）<br>点击设置按钮，并启动订阅功能，自动生成订阅路径    </li>
</ol>
<h4 id="添加日历订阅源"><a href="#添加日历订阅源" class="headerlink" title="添加日历订阅源"></a>添加日历订阅源</h4><p>iPhone日历订阅需要通过通过Mac实现 <a href="https://support.apple.com/zh-cn/HT202361" target="_blank" rel="noopener">使用 iCloud 日历订阅</a><br>滴答清单订阅日历功能：设置—安全与数据—订阅日历 (普通用户仅支持订阅系统日历)</p>
<p>可以通过监听事件来同步trello看板中的所有信息</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/29/macOS/swift开发macOS系统的终端命令行应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/29/macOS/swift开发macOS系统的终端命令行应用/" class="post-title-link" itemprop="url">swift开发macOS系统的终端命令行应用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-29 13:00:08" itemprop="dateCreated datePublished" datetime="2017-05-29T13:00:08Z">2017-05-29</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/终端/" itemprop="url" rel="index"><span itemprop="name">终端</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/29/macOS/swift开发macOS系统的终端命令行应用/" class="leancloud_visitors" data-flag-title="swift开发macOS系统的终端命令行应用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">439</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h3><p><a href="https://www.raywenderlich.com:443/128039/command-line-programs-macos-tutorial" target="_blank" rel="noopener">命令行程序MacOS的教程</a></p>
<p>使用swift创建一个命令行程序，相比其他语言如C、Perl、Ruby或java。<br>选用SWIFT的理由：<br>Swift可以用作解释脚本语言，也可以用作编译语言。这使您具有脚本语言的优势，如零编译时间和易于维护，以及选择编译应用程序，以提高执行时间或捆绑出售给公众。</p>
<h3 id="main-swift主体"><a href="#main-swift主体" class="headerlink" title="main.swift主体"></a>main.swift主体</h3><p>许多C语言的main函数作为切入点，例如当操作系统调用这个程序时执行的代码入口。这意味着程序的执行始于这个函数的第一行。<br>Swift没有一个main函数，而是main.swift文件。这样在运行Swift项目时，直接运行的事main.swift文件，执行入口开始于第一行代码。</p>
<h3 id="终端调用程序"><a href="#终端调用程序" class="headerlink" title="终端调用程序"></a>终端调用程序</h3><p>命令行可分两种模式</p>
<ul>
<li>静态可执行模式：通过终端app直接运行命令行工具，执行固有功能。</li>
<li>交互命令行模式 ：需要用户通过使用说明信息，对命令行程序输入交互命令，执行相应的功能。</li>
</ul>
<ol>
<li><p>在同一个目录下执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Panagram</span><br></pre></td></tr></table></figure>
</li>
<li><p>相对路径执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Debug/Panagram</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/28/阅读/如何阅读一本书目录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/28/阅读/如何阅读一本书目录/" class="post-title-link" itemprop="url">如何阅读一本书目录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-28 12:04:28" itemprop="dateCreated datePublished" datetime="2017-05-28T12:04:28Z">2017-05-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-05-29 13:00:08" itemprop="dateModified" datetime="2017-05-29T13:00:08Z">2017-05-29</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/阅读/" itemprop="url" rel="index"><span itemprop="name">阅读</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/28/阅读/如何阅读一本书目录/" class="leancloud_visitors" data-flag-title="如何阅读一本书目录">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">384</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h1 id="脑图"><a href="#脑图" class="headerlink" title="脑图"></a>脑图</h1><!--长宽测试没有效果-->
<iframe src="http://naotu.baidu.com/file/3cd277713d4ebb210443ffaf9c8f38e6?token=9200f134c9b8f825" width="700" height="300" frameborder="0" allowfullscreen></iframe>
<h2 id="第一篇-阅读的层次"><a href="#第一篇-阅读的层次" class="headerlink" title="第一篇 阅读的层次"></a>第一篇 阅读的层次</h2><pre><code>第一章 阅读的活力与艺术
第二章 阅读的层次 
第三章 阅读的第一个层次：基础阅读
第四章 阅读的第二个层次：检视阅读
第五章 如何做一个自我要求的读者
第二篇 阅读的第三个层次：分析阅读
第六章 一本书的分类
第七章 透视一本书
第八章 与作者找出共通的词义
第九章 判断作者的主旨
第十章 公正地评断一本书
第十一章 赞同或反对作者
第十二章 辅助阅读
</code></pre><h2 id="第三篇-阅读不同读物的方法"><a href="#第三篇-阅读不同读物的方法" class="headerlink" title="第三篇 阅读不同读物的方法"></a>第三篇 阅读不同读物的方法</h2><pre><code>第十三章 如何阅读实用型的书
第十四章 如何阅读想像文学
第十五章 阅读故事、戏剧与诗的一些建议
第十六章 如何阅读历史书
第十七章 如何阅读科学与数学
第十八章 如何阅读哲学书
第十九章 如何阅读社会科学
</code></pre><h2 id="第四篇-阅读的最终目标"><a href="#第四篇-阅读的最终目标" class="headerlink" title="第四篇 阅读的最终目标"></a>第四篇 阅读的最终目标</h2><pre><code>第二十章 阅读的第四个层次：主题阅读
第二十一章 阅读与心智的成长
附录一 建议阅读书目
附录二 四种层次阅读的练习与测验
</code></pre><h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2>
          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/28/阅读/搞定书籍目录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/28/阅读/搞定书籍目录/" class="post-title-link" itemprop="url">搞定书籍目录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-28 12:04:28" itemprop="dateCreated datePublished" datetime="2017-05-28T12:04:28Z">2017-05-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-09 18:56:18" itemprop="dateModified" datetime="2017-09-09T18:56:18Z">2017-09-09</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/阅读/" itemprop="url" rel="index"><span itemprop="name">阅读</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/28/阅读/搞定书籍目录/" class="leancloud_visitors" data-flag-title="搞定书籍目录">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">322</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="《搞定I》"><a href="#《搞定I》" class="headerlink" title="《搞定I》"></a>《搞定I》</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><h3 id="第一部分-通向从容之道？"><a href="#第一部分-通向从容之道？" class="headerlink" title="第一部分 通向从容之道？"></a>第一部分 通向从容之道？</h3><pre><code>第1章 新情况，新做法？  
    收集存档清空大脑，万物皆于此，
    2分钟法则整理可立刻执行的有效清单，不做材料清单
第2章 掌控生活：横向管理工作流程的5个阶段

第3章 控制项目：纵向管理项目计划的5个阶段
</code></pre><h3 id="第二部分-远离压力，提高效率"><a href="#第二部分-远离压力，提高效率" class="headerlink" title="第二部分 远离压力，提高效率"></a>第二部分 远离压力，提高效率</h3><pre><code>第4章 准备工作：确定时间、空间和工具
第5章 收集阶段：归拢材料
第6章 处理阶段：清空工作篮
第7章 组织整理：建立好清单
第8章 检查回顾：保障系统的有效运行
第9章 执行阶段：选择最合适的行动
第10章 学会控制项目
</code></pre><h3 id="第三部分-三个关键原则"><a href="#第三部分-三个关键原则" class="headerlink" title="第三部分 三个关键原则"></a>第三部分 三个关键原则</h3><pre><code>第11章 原则一：养成收集的习惯
第12章 原则二：确定“下一步行动”
第13章 原则三：学会关注结果
</code></pre><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3>
          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/27/个人项目/痛定思痛的项目管理弊病/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/27/个人项目/痛定思痛的项目管理弊病/" class="post-title-link" itemprop="url">痛定思痛的项目管理弊病</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-27 15:06:17" itemprop="dateCreated datePublished" datetime="2017-05-27T15:06:17Z">2017-05-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-22 21:18:52" itemprop="dateModified" datetime="2018-09-22T21:18:52Z">2018-09-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人项目/" itemprop="url" rel="index"><span itemprop="name">个人项目</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/27/个人项目/痛定思痛的项目管理弊病/" class="leancloud_visitors" data-flag-title="痛定思痛的项目管理弊病">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><hr>
<p>现状：两个项目源码存在八成为同样的代码，管理在两个SVN库中。<br>背景：从一个SVN项目分裂成两个独立项目（PBB_2/Reader_v2）对应延伸出来SVN库，随后在两个库中开发不同的功能版本（PBB_7/Reader_v9）。<br>需求：现在准备将两项目中新增的功能重新合并起来，即将PBB_v7合并到Reader_v9中。<br>分析：需要把PBB_v3–PBB_v7的5个提交，合并到Reader_v9中</p>
<p>对PBB迭代的十几个版本中新增的功能涉及面太广，手动合并出错率高，协作难度大，纯劳力搬砖着实要命。<br>以下总结几条建议</p>
<h3 id="方案一：打补丁法合并源码"><a href="#方案一：打补丁法合并源码" class="headerlink" title="方案一：打补丁法合并源码"></a>方案一：打补丁法合并源码</h3><hr>
<p>注：仅适用于同一个库使用</p>
<p>实现步骤：</p>
<ol>
<li>git-svn命令把svn库转为git库</li>
<li>将5个提交重演到Reader_v9版中</li>
</ol>
<p>重演方案：</p>
<ol>
<li>打补丁法：通过压缩提交法把PBB_v7若干提交整合成一个提交，再创建一个补丁，重演到Reader_v9上<ol>
<li>交互变基压缩法，压缩成一个提交</li>
<li>reset压缩提交法，将提交压缩 git reset –soft 1bf27c6a33d87c2e36fa75431224124f91d8b482</li>
</ol>
</li>
</ol>
<p>案例：在大型项目中，贡献者常以使用补丁文件贡献代码<br>结论：打补丁法的前提打补丁的宿主库必须和将要应用补丁的库为同一库源。故使用版本库来合并两个独立不想关的svn库，无法通过打补丁法实现合并。</p>
<h3 id="方案二：项目模块化合并"><a href="#方案二：项目模块化合并" class="headerlink" title="方案二：项目模块化合并"></a>方案二：项目模块化合并</h3><hr>
<p>在PBB Reader中通过项目依赖整合IJK／mupdf／maker</p>
<ol>
<li>操作<ol>
<li>取消Maker原有IJK，mupdf的依赖</li>
<li>在PBB Reader中配置Maker依赖 ：隐私空间涉及到的阅读功能在Reader中实现</li>
<li>新需求开发</li>
</ol>
</li>
<li>好处 <ol>
<li>源码隔离，功能共享，对现有功能的源码无要做任何修改</li>
<li>项目之间相互独立，便于后续拆分或整合</li>
<li>更多精力专注代码优化</li>
</ol>
</li>
</ol>
<h4 id="否决方案二，采用手动合并"><a href="#否决方案二，采用手动合并" class="headerlink" title="否决方案二，采用手动合并"></a>否决方案二，采用手动合并</h4><p>Reader本属于一个播放器，是从PBB应用的lite版，主要业务都是在PBB中实现的，当前需求是让PBB集成到Reader中，如何使用PBB Framework集成，需要暴漏大量的接口，业务层的高耦合性已经违背了封装原则。故作罢。</p>
<p>突破了合并时遇到的棘手问题，加密崩溃，最终排查出socker传输结构体导致的异常，maker和Reader之间的差异导致合并过程更加困难，最终采用对讲maker中对加密实现文件的封装，在集成到Reader中，即隔离冲突，暴露功能，程序架构集成过程中更便捷合理化。</p>
<hr>
<p>相关知识：</p>
<p>引用日志：<br>git reflog<br>引用日志只存在本地仓库中，只记录第一次clone到之后，在本地仓库中的操作日志，服务器端不会同步这些引用记录，所以在本地无法查看别人的引用日志。</p>
<h3 id="祖先引用"><a href="#祖先引用" class="headerlink" title="祖先引用"></a>祖先引用</h3><p>几种表达式含义</p>
<ul>
<li><p>第一种：^/^^^(多个)<br>HEAD^:指向祖先提交<br>hash值^（^^^） :指向该引用的上一个提交，几个符号就是指向上几个提交<br>^数字:只适用于合并（merge）提交，有多个父提交。如：hash值^2表示第二父提交。第一父提交是指合并时所在的分支，第二父提交是指合并进来的分支。</p>
</li>
<li><p>第二种：~数字<br>HEAD~: 指向祖先提交<br>HEAD~数字:指向指向上几个提交<br>hash值^数字:指向该引用的上几个提交</p>
</li>
</ul>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/26/阅读/修炼升职必备的技能二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/26/阅读/修炼升职必备的技能二/" class="post-title-link" itemprop="url">升职必备的技能修炼二 以道御术</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-25 18:09:00 / 修改时间：18:15:01" itemprop="dateCreated datePublished" datetime="2017-05-25T18:09:00Z">2017-05-25</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/阅读/" itemprop="url" rel="index"><span itemprop="name">阅读</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/26/阅读/修炼升职必备的技能二/" class="leancloud_visitors" data-flag-title="升职必备的技能修炼二 以道御术">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">93</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>“老付”谈论的是目标，所有的方法都是为目标服务的，目标统率人的行为。    </p>
<ul>
<li>怎样规划自己的人生？</li>
<li>怎样树立自己的目标？</li>
<li>怎样把目标转化成实际的行动？</li>
<li>怎样提高自己实现目标的能力？</li>
</ul>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/26/阅读/修炼升职必备的技能/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/26/阅读/修炼升职必备的技能/" class="post-title-link" itemprop="url">修炼升职必备的技能</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-25 16:40:42" itemprop="dateCreated datePublished" datetime="2017-05-25T16:40:42Z">2017-05-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:15" itemprop="dateModified" datetime="2019-01-16T21:01:15Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/阅读/" itemprop="url" rel="index"><span itemprop="name">阅读</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/26/阅读/修炼升职必备的技能/" class="leancloud_visitors" data-flag-title="修炼升职必备的技能">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>焦虑是由于缺乏控制力，以及组织管理、准备和行动不足所造成的。</p>
<h2 id="四象限"><a href="#四象限" class="headerlink" title="四象限"></a>四象限</h2><p>走出第三象限，将工作重心放进第二象限</p>
<ol>
<li>第二象限法则   </li>
<li>猴子法则：屏蔽干扰的伎俩   </li>
</ol>
<h3 id="项目与行动的区别"><a href="#项目与行动的区别" class="headerlink" title="项目与行动的区别"></a>项目与行动的区别</h3><p>项目需要分解为可执行的行动  </p>
<ol>
<li>以动词开头的行动  </li>
<li>添加行动的预期效果  </li>
</ol>
<p>下一步行动法，驱动项目的进行。</p>
<h2 id="时间投资"><a href="#时间投资" class="headerlink" title="时间投资"></a>时间投资</h2><h2 id="衣柜整理法"><a href="#衣柜整理法" class="headerlink" title="衣柜整理法"></a>衣柜整理法</h2><p>收集，处理，组织，回顾，行动<br>2分钟法则<br>无论在什么情况下，我们在工作时都将经历这五个阶段：   </p>
<h3 id="收集篮：收集一切引起我们注意的事情。"><a href="#收集篮：收集一切引起我们注意的事情。" class="headerlink" title="收集篮：收集一切引起我们注意的事情。"></a>收集篮：收集一切引起我们注意的事情。</h3><pre><code>收集的关键是将‘一切引起我们注意的东西’放在‘收集篮’里，在清空大脑的同时达到‘心如止水’的境界。
</code></pre><p>工具军规</p>
<ol>
<li>收集工具越少越好</li>
<li>保证5秒钟内拿出工具</li>
<li>定期清空工具： 今日事今日毕 ，定期清空，比如每周五清空所有事件迎接周末</li>
</ol>
<h3 id="处理收集篮：加工处理后，确定它们的实质以及解决方法。"><a href="#处理收集篮：加工处理后，确定它们的实质以及解决方法。" class="headerlink" title="处理收集篮：加工处理后，确定它们的实质以及解决方法。"></a>处理收集篮：加工处理后，确定它们的实质以及解决方法。</h3><p>2分钟突击原则：指定任务可行性标签<br>不可行：  1. 垃圾事件 2. 将来某时／也许事件  3. 参考资料（处理方法就是分类归档）<br>可执行： 1. 2分钟事件（专治拖延症） 2. 项目事件 3. 委托事件  4. 预约事件  5.待办事件</p>
<p>原则：  </p>
<ol>
<li>从最上面一项开始处理   </li>
<li>一次只处理一件事情   </li>
<li>永远不要再放回收集篮（被迫中断的事情除外），争取一次做好   </li>
</ol>
<h3 id="组织：组织整理，得出结论"><a href="#组织：组织整理，得出结论" class="headerlink" title="组织：组织整理，得出结论"></a>组织：组织整理，得出结论</h3><p>‘3+1’组合的清单系统<br>材料，<br>收集篮清单（做到每日清理）<br>将某时／也许清单<br>待办事清单<br>项目清单（多任务集合，多个下一步行动）一般会放在待办清单中   </p>
<h3 id="回顾："><a href="#回顾：" class="headerlink" title="回顾："></a>回顾：</h3><p>解决盲目的问题，我们还需要做到对任务进行回顾。</p>
<ol>
<li>让灵感应运而生<br>周回顾的时候恰恰是这样一种状态，对所有的一切都了如指掌，对所有的一切都做了充足的准备。  </li>
<li>站在3万米的高度去看待问题<br>通过对自己一周工作的重新审视，向自己发问：到底哪些事有利于我更好地接近目标？今后遇到类似的事情应该如何取舍？当我们站在一个新的高度去看待现在的人和事，你会有前所未有的发现。</li>
<li><p>孵化和修剪你的任务及目标</p>
</li>
<li><p>把它们列为我们行动的选择方案。</p>
</li>
</ol>
<h2 id="行动：选择最佳方案"><a href="#行动：选择最佳方案" class="headerlink" title="行动：选择最佳方案"></a>行动：选择最佳方案</h2><p>利用一个月的时间去思考自己的未来发展，然后制定一个‘自上而下’的职业规划；当这个规划确定之后，我会‘自下而上’地搞定自己的工作，并且在工作的过程中随时修订自己的规划，这就是我的工作方式。</p>
<h3 id="‘自上而下’的目标系统"><a href="#‘自上而下’的目标系统" class="headerlink" title="‘自上而下’的目标系统"></a>‘自上而下’的目标系统</h3><p>大卫·艾伦的六个高度去进行检视和规划：  </p>
<ol>
<li>原则 （五万米）<br>你首先必须要找个时间好好地思考一下自己的价值观、原则和目标，这是你工作的灵魂所在。如果你以前没有思考过这些，建议你现在就开始思考。我可以和你分享一下我的原则：工作是谋求更好生活的途径，追求无压、流畅、高效的工作。</li>
<li>愿景（四万米）<br>这里面包含3—5年的工作目标，可以是职位的，也可以是组织能力、协调能力等。在这个层面你需要问自己<br> ◎我的目标是什么？<br> ◎哪些人已经达到了我的这个目标？<br> ◎他们是如何达到目标的？<br> ◎达到这个目标之后我的工作和生活会是怎样的？</li>
<li><p>目标（三万米）<br>目标是比愿景更细化的东西，通常在一年内就可以有一个阶段性的成果。比如说我现在的目标就是：</p>
<p> ◎每周通过参加商务聚会来扩展自己的人脉，主动给朋友们打电话来巩固自己的人脉；<br> ◎参加管理学的培训课程或者是参加MBA学习来提高自己的综合能力；<br> ◎每天坚持阅读40分钟，以扩充自己的知识面，并且更深层次地研究自己所在的专属领域。</p>
</li>
<li>责任范围（两万米）<br>工作上的角色：如销售、管理、产品开发等；<br>生活中的角色：如家庭、个人财务、精神层面等。<br>要把每一个角色扮演好，就需要执行一些任务，以拉近现实和期望的距离。比如在这个层面我会拿出我负责的项目和产品，看看在开发、销售、管理上是否还有提升的可能性，因为毕竟要把自己责任范围内的事情做得漂亮，才有可能升职或者有其他进一步的发展。</li>
<li>任务（一万米）<br>所有需要一步以上完成的事情都是一个任务，虽然我们已经有了一个‘自上而下’的目标系统，但是我们仍然要将注意力放在眼前的任务上，比如‘新产品的营销策略’等。</li>
<li>下一步行动（跑道）<br>这是最细枝末节的事件，我们要将它们全部放进我们的清单，然后逐一完成。谁更关注细节，谁就能获得更大的成功。刚开始我们都在同一个跑道里面绕圈，但是最终只有职业规划清晰的人才会驾车进入快车道，直奔目标而去。”</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/25/智能设备/calibre一站式电子书解决方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/25/智能设备/calibre一站式电子书解决方案/" class="post-title-link" itemprop="url">calibre一站式电子书解决方案</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-25 14:26:15" itemprop="dateCreated datePublished" datetime="2017-05-25T14:26:15Z">2017-05-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:15" itemprop="dateModified" datetime="2019-01-16T21:01:15Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/智能设备/" itemprop="url" rel="index"><span itemprop="name">智能设备</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/25/智能设备/calibre一站式电子书解决方案/" class="leancloud_visitors" data-flag-title="calibre一站式电子书解决方案">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">295</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>Calibre，是一个免费的开源的“一站式”的电子书解决方案，它可以全面满足你的电子书需求。Calibre 是免费的，源代码开放，拥有跨平台的设计。它是一个完整的电子图书馆，包括图书管理，格式转换，新闻，将材料转换为电子书，以及电子书阅读器同步功能、整合进电子图书阅读器。当然它也内置了一个 ePub 格式电子书编辑工具以满足修改电子书的需要。   </p>
<p>感兴趣的几个功能点：</p>
<ol>
<li><p>爬虫功能，即可以支持一键抓取新闻，根据指定的feed订阅源，来制作书籍。<br> 这样便可每天爬取最新消息，发到kindle上看新闻</p>
</li>
<li><p>支持kindle书籍，相比kindle应用，它能自由复制书本内容，便于笔记整理。</p>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/25/其他/远程操作mysql数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/25/其他/远程操作mysql数据库/" class="post-title-link" itemprop="url">远程操作mysql数据库</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 17:07:47" itemprop="dateCreated datePublished" datetime="2017-05-24T17:07:47Z">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-05 21:42:35" itemprop="dateModified" datetime="2018-10-05T21:42:35Z">2018-10-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/其他/" itemprop="url" rel="index"><span itemprop="name">其他</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/25/其他/远程操作mysql数据库/" class="leancloud_visitors" data-flag-title="远程操作mysql数据库">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="腾讯云服务器"><a href="#腾讯云服务器" class="headerlink" title="腾讯云服务器"></a>腾讯云服务器</h2><ol>
<li><p>申请账户，体验5天，搭建一个jira服务，还有微信小程序服务</p>
</li>
<li><p>需要在服务器上安装docker （腾讯服务器提供了一款支持docker的Ubuntu系统）</p>
</li>
<li>想使用daocloud加速器，就要更新docker版本<br>docker run –detach –publish 8080:8080 cptactionhank/atlassian-jira:latest<br>http://[dockerhost]:8080 and finish the configuration</li>
</ol>
<h3 id="远程服务器的基本操作"><a href="#远程服务器的基本操作" class="headerlink" title="远程服务器的基本操作"></a>远程服务器的基本操作</h3><ol>
<li>登录：<code>ssh -l username 服务ip／域名</code><br> ssh ubuntu@123.<strong><em>.</em>.*6   5<em>**</em></strong>RtH<br> sudo docker pull cptactionhank/atlassian-jira</li>
<li>服务器端拷贝文件目录<br> scp -i localDir serveruser@serverip:serverDir</li>
</ol>
<h3 id="docker下安装mysql数据库镜像"><a href="#docker下安装mysql数据库镜像" class="headerlink" title="docker下安装mysql数据库镜像"></a>docker下安装mysql数据库镜像</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull mysql </span><br><span class="line">sudo docker run --name jiradb -e MYSQL_ROOT_PASSWORD=jiradb -d mysql/mysql-server:latest</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-name : 容器名<br>MYSQL_ROOT_PASSWORD : 数据库密码<br>-d : 镜像名:tag 版本</p>
</blockquote>
<h4 id="终端：单行登录mysql"><a href="#终端：单行登录mysql" class="headerlink" title="终端：单行登录mysql"></a>终端：单行登录mysql</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker exec -it jiradb mysql -ujira -pjira</span><br></pre></td></tr></table></figure>
<h4 id="进入mysql终端-访问数据库"><a href="#进入mysql终端-访问数据库" class="headerlink" title="进入mysql终端,访问数据库"></a>进入mysql终端,访问数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo docker exec -it jiradb bash</span><br><span class="line">#登录数据库  默认用户root 密码为空，如果前边设置了MYSQL_ROOT_PASSWORD的值，则需要密码</span><br><span class="line">mysql -uroot -p   #登录本地数据库 可以 省略-h参数 -h 127.0.0.1</span><br><span class="line">回车</span><br><span class="line">输入密码：jiradb  #就是$MYSQL_ROOT_PASSWORD的值</span><br><span class="line">即登录</span><br></pre></td></tr></table></figure>
<h4 id="用户权限控制"><a href="#用户权限控制" class="headerlink" title="用户权限控制"></a>用户权限控制</h4><ol>
<li><p>查看sql服务器的状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">status;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建用户名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user jira identified by &apos;jira&apos;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>赋予权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &apos;jira&apos;@&apos;%&apos; identified by &apos;jira&apos; with grant option;</span><br><span class="line">grant all privileges on *.* to &apos;jira&apos;@&apos;localhost&apos; identified by &apos;jira&apos; with grant option;</span><br><span class="line">flush privileges;</span><br><span class="line">quit;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><ol>
<li><p>创建数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database jiradb character set &apos;UTF8&apos;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看当前数据库名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>
</li>
<li><p>切换指定数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use jiradb;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看数据库表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>创建表</p>
<h5 id="jira和数据库关联结果"><a href="#jira和数据库关联结果" class="headerlink" title="jira和数据库关联结果"></a>jira和数据库关联结果</h5><p>无法通过 docker 中mysql镜像的盒子来实现jira和数据库关联：<br>从另一个容器中的应用来访问jiradb容器中的mysql服务：没成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connect to MySQL from an application in another Docker container</span><br><span class="line">sudo docker run --name jirad --link jiradb:mysql/mysql-server -d cptactionhank/atlassian-jira:latest</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p>最终采用在ubuntu系统中安装mysql：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sudo apt-get -y install mysql-server</span><br></pre></td></tr></table></figure></p>
<p>##问题：Could not reach any registry endpoint<br>安装Linux加速器：<br>curl -sSL <a href="https://get.daocloud.io/daotools/set_mirror.sh" target="_blank" rel="noopener">https://get.daocloud.io/daotools/set_mirror.sh</a> | sh -s <a href="http://142900b5.m.daocloud.io" target="_blank" rel="noopener">http://142900b5.m.daocloud.io</a><br>该脚本可以将 –registry-mirror 加入到你的 Docker 配置文件 /etc/default/docker 中。适用于 Ubuntu14.04、Debian、CentOS6 、CentOS7、Fedora、Arch Linux、openSUSE Leap 42.1，其他版本可能有细微不同。<br>ubuntu 系统安装daocloud检测工具：<br>curl -sSL <a href="https://get.daocloud.io/daomonit/install.sh" target="_blank" rel="noopener">https://get.daocloud.io/daomonit/install.sh</a> | sh -s d0312f829e9807ee0bf157cdc9c9cca42380395c </p>
<h3 id="更新服务器上的docker"><a href="#更新服务器上的docker" class="headerlink" title="更新服务器上的docker"></a>更新服务器上的docker</h3><p><a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/#/prerequisites-by-ubuntu-version" target="_blank" rel="noopener">官网教程</a></p>
<h3 id="Update-your-apt-sources"><a href="#Update-your-apt-sources" class="headerlink" title="Update your apt sources"></a>Update your apt sources</h3><p>To set APT to use packages from the Docker repository:</p>
<ol>
<li>Log into your machine as a user with sudo or root privileges.</li>
<li>Open a terminal window.</li>
<li><p>Update package information, ensure that APT works with the https method, and that CA certificates are installed.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install apt-transport-https ca-certificates</span><br></pre></td></tr></table></figure>
</li>
<li><p>Docker资源库<br>|Ubuntu version|    Repository|<br>|—|—-|<br>|Precise 12.04 (LTS)|deb <a href="https://apt.dockerproject.org/repo" target="_blank" rel="noopener">https://apt.dockerproject.org/repo</a> ubuntu-precise main|<br>|Trusty 14.04 (LTS)    |deb <a href="https://apt.dockerproject.org/repo" target="_blank" rel="noopener">https://apt.dockerproject.org/repo</a> ubuntu-trusty main|<br>|Wily 15.10         |deb <a href="https://apt.dockerproject.org/repo" target="_blank" rel="noopener">https://apt.dockerproject.org/repo</a> ubuntu-wily main|<br>|Xenial 16.04 (LTS)    |deb <a href="https://apt.dockerproject.org/repo" target="_blank" rel="noopener">https://apt.dockerproject.org/repo</a> ubuntu-xenial main|</p>
<blockquote>
<p>Note: Docker does not provide packages for all architectures. Binary artifacts are built nightly, and you can download them from <a href="https://master.dockerproject.org" target="_blank" rel="noopener">https://master.dockerproject.org</a>. To install docker on a multi-architecture system, add an [arch=…] clause to the entry. Refer to Debian Multiarch wiki for details.</p>
</blockquote>
</li>
<li>导入库<br><repo> = deb <a href="https://apt.dockerproject.org/repo" target="_blank" rel="noopener">https://apt.dockerproject.org/repo</a> ubuntu-precise main<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"&lt;REPO&gt;"</span> | sudo tee /etc/apt/sources.list.d/docker.list</span><br></pre></td></tr></table></figure>
</repo></li>
</ol>
<p>`<br>6.Update the APT package index.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure></p>
<p>7.Verify that APT is pulling from the right repository.<br>When you run the following command, an entry is returned for each version of Docker that is available for you to install. Each entry should have the URL <a href="https://apt.dockerproject.org/repo/" target="_blank" rel="noopener">https://apt.dockerproject.org/repo/</a>. The version currently installed is marked with ***.The output below is truncated.</p>
<p>$ apt-cache policy docker-engine</p>
<p>docker-engine:<br>Installed: 1.12.2-0~trusty<br>Candidate: 1.12.2-0~trusty<br>Version table:<br>*** 1.12.2-0~trusty 0<br>500 <a href="https://apt.dockerproject.org/repo/" target="_blank" rel="noopener">https://apt.dockerproject.org/repo/</a> ubuntu-trusty/main amd64 Packages<br>100 /var/lib/dpkg/status<br>1.12.1-0~trusty 0<br>500 <a href="https://apt.dockerproject.org/repo/" target="_blank" rel="noopener">https://apt.dockerproject.org/repo/</a> ubuntu-trusty/main amd64 Packages<br>1.12.0-0~trusty 0<br>500 <a href="https://apt.dockerproject.org/repo/" target="_blank" rel="noopener">https://apt.dockerproject.org/repo/</a> ubuntu-trusty/main amd64 Packages</p>
<p>From now on when you run apt-get upgrade, APT pulls from the new repository.</p>
<p>To upgrade your kernel and install the additional packages, do the following:</p>
<p>Open a terminal on your Ubuntu host.<br>Update your package manager.<br>$ sudo apt-get update<br>Install both the required and optional packages.<br>$ sudo apt-get install linux-image-generic-lts-trusty<br>Repeat this step for other packages you need to install.<br>Reboot your host to use the updated kernel.<br>$ sudo reboot<br>After your system reboots, go ahead and install Docker.</p>
<p>Install the latest version<br>Make sure you have satisfied all the prerequisites, then follow these steps.</p>
<p>Note: For production systems, it is recommended that you install a specific version so that you do not accidentally update Docker. You should plan upgrades for production systems carefully.<br>Log into your Ubuntu installation as a user with sudo privileges.<br>Update your APT package index.<br>$ sudo apt-get update<br>Install Docker.<br>$ sudo apt-get install docker-engine<br>Start the docker daemon.<br>$ sudo service docker start<br>Verify that docker is installed correctly by running the hello-world image.<br>$ sudo docker run hello-world<br>This command downloads a test image and runs it in a container. When the container runs, it prints an informational message and exits.</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/18/开源库/iOS和OSX集成gitAPI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/18/开源库/iOS和OSX集成gitAPI/" class="post-title-link" itemprop="url">iOS和OSX集成gitAPI</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-17 17:33:46" itemprop="dateCreated datePublished" datetime="2017-05-17T17:33:46Z">2017-05-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:14" itemprop="dateModified" datetime="2019-01-16T21:01:14Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/开源库/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/18/开源库/iOS和OSX集成gitAPI/" class="leancloud_visitors" data-flag-title="iOS和OSX集成gitAPI">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>在项目中使用git submodule工具集成子项目ObjectiveGit</p>
<h4 id="在新项目中使用git-submodule集成gitAPI"><a href="#在新项目中使用git-submodule集成gitAPI" class="headerlink" title="在新项目中使用git submodule集成gitAPI"></a>在新项目中使用git submodule集成gitAPI</h4><p>参考官方提供的两个demo</p>
<ul>
<li><p>OS X: <a href="https://github.com/Abizern/CommitViewer" target="_blank" rel="noopener">CommitViewer</a>   </p>
</li>
<li><p>iOS: <a href="https://github.com/Raekye/ObjectiveGit-iOS-Example" target="_blank" rel="noopener">ObjectiveGit iOS Example</a></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/libgit2/objective-git.git External/ObjectiveGit</span><br><span class="line">如果之前配置过，直接更新：</span><br><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure>
<ol>
<li><code>cd External/ObjectiveGit</code>，然后执行<code>./script/bootstrap</code>安装相关依赖.</li>
<li>拖动 <code>ObjectiveGitFramework.xcodeproj</code> 文件 到iOS/OSX项目导航窗口 .</li>
<li>在build Phases中配置APP的依赖，根据平台添加<code>ObjectiveGit-Mac</code> or <code>ObjectiveGit-iOS</code>.</li>
<li>APP通过连接器链接 <code>ObjectiveGit.framework</code>.</li>
<li>在build setting中“Header Search Paths” (<code>HEADER_SEARCH_PATHS</code>)设置<code>libgit2</code>头文件在项目的路径，例如：<code>External/ObjectiveGit/External/libgit2/include</code>. </li>
<li>Add a new “Copy Files” build phase, set the destination to “Frameworks” and add <code>ObjectiveGit.framework</code> to the list. This will package the framework with your application as an embedded private framework.</li>
</ol>
<ul>
<li>It’s hard to tell the difference between the platforms, but the Mac framework is in <code>build/Debug</code> whereas the iOS framework is in <code>build/Debug-iphoneos</code></li>
</ul>
<ol>
<li>Don’t forget to <code>#import &lt;ObjectiveGit/ObjectiveGit.h&gt;</code> or <code>@import ObjectiveGit;</code> as you would with any other framework.</li>
</ol>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>类变量关联.xib控件text值    </li>
<li>字体样式菜单来改变字体样式    <h4 id="在OSX中设置控件的Bindings代替IBOutlet"><a href="#在OSX中设置控件的Bindings代替IBOutlet" class="headerlink" title="在OSX中设置控件的Bindings代替IBOutlet"></a>在OSX中设置控件的Bindings代替IBOutlet</h4></li>
</ul>
<p>先关联再使用属性依赖特性来同步数据</p>
<h5 id="类变量关联-xib控件text值"><a href="#类变量关联-xib控件text值" class="headerlink" title="类变量关联.xib控件text值"></a>类变量关联.xib控件text值</h5><p><a href="http://stackoverflow.com/questions/8161012/referencing-bindings-in-connections-inspector" target="_blank" rel="noopener">相关参考</a>      </p>
<ol>
<li>选中NSTextField的bindings检查器面板   </li>
<li>在<code>value</code>单元内设置bind to 的值，通过下拉框选中 <code>Delegate</code>      </li>
<li>Model key Path:输入类变量的名称。    </li>
<li>切换到 NSTextField／Delegate的Connections检查器面板,就会看到已经建立了关联：     </li>
</ol>
<h5 id="依赖属性"><a href="#依赖属性" class="headerlink" title="依赖属性"></a>依赖属性</h5><p>Foundation 框架提供的表示属性依赖的机制如下：<br>参考<a href="https://github.com/huos3203/BookObjc/blob/master/publish/issue7/issue-7-3-DJBen.md#依赖的属性" target="_blank" rel="noopener">属性的依赖</a><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSSet</span> *)keyPathsForValuesAffectingValueForKey:(<span class="built_in">NSString</span> *)key</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line">+ (<span class="built_in">NSSet</span> *)keyPathsForValuesAffecting&lt;键名&gt;</span><br></pre></td></tr></table></figure></p>
<p>将属性关联起来，这样就可以将类变量的值同步至UI控件中了：<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSSet</span> *)keyPathsForValuesAffectingValueForKey:(<span class="built_in">NSString</span> *)key </span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSSet</span> *keySet = [<span class="built_in">NSSet</span> setWithObjects:<span class="string">@"commit"</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@"messageTitle"</span>] ||</span><br><span class="line">        [key isEqualToString:<span class="string">@"messageDetails"</span>] ||</span><br><span class="line">        [key isEqualToString:<span class="string">@"author"</span>] ||</span><br><span class="line">        [key isEqualToString:<span class="string">@"date"</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> keySet;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> keyPathsForValuesAffectingValueForKey:key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="实现字体样式菜单来改变字体样式"><a href="#实现字体样式菜单来改变字体样式" class="headerlink" title="实现字体样式菜单来改变字体样式"></a>实现字体样式菜单来改变字体样式</h4><ol>
<li>在xib中拖一个Object并设置为NSFontManager.h类的实现。   </li>
<li>选中NSFontManager.h的connections面板，将Received Actions关联到对应的菜单项即可  </li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/17/git/SubModule与SubTree的差异/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/17/git/SubModule与SubTree的差异/" class="post-title-link" itemprop="url">SubModule与SubTree的差异</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-17 11:23:22" itemprop="dateCreated datePublished" datetime="2017-05-17T11:23:22Z">2017-05-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-11 20:58:56" itemprop="dateModified" datetime="2018-10-11T20:58:56Z">2018-10-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/17/git/SubModule与SubTree的差异/" class="leancloud_visitors" data-flag-title="SubModule与SubTree的差异">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="核心区别"><a href="#核心区别" class="headerlink" title="核心区别"></a>核心区别</h2><p><code>git submodule</code>类似于引用，而<code>git subtree</code>类似于拷贝，比如你在一篇博客中想用到你另一篇博客的内容，<code>git submodule</code>是使用那篇博客的链接，而<code>git subtree</code>则是将内容完全copy过来。</p>
<h3 id="submodule命令"><a href="#submodule命令" class="headerlink" title="submodule命令"></a>submodule命令</h3><ol>
<li>添加submodule<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git submodule add -b branchA http://github.com/../repoA.git pathA</span><br><span class="line">git submodule add http://github.com/../repoB.git pathB</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>执行以上命令后会生成<code>.gitmodule</code>的文件，文件存储子模块信息:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[submodule <span class="string">"repoA"</span>]</span><br><span class="line">    path = pathA</span><br><span class="line">    url = http://github.com/../repoA.git</span><br><span class="line">    branch = branchA</span><br><span class="line">[submodule <span class="string">"ModuleB"</span>]</span><br><span class="line">    path = ModuleB</span><br><span class="line">    url = http://github.com/../repoB.git</span><br></pre></td></tr></table></figure></p>
<p>提交<code>.gitmodule</code>文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &apos;add submodule&apos;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li><p>clone新库初始化submodule<br>clone之后各模块内容为空目录，需要执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule init</span><br></pre></td></tr></table></figure>
</li>
<li><p>拉取所有子模块<br>需要在<code>.gitmodules</code>文件中指定<code>branch:分支名</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git submodule foreach git pull</span><br><span class="line">或</span><br><span class="line">git submodule foreach git pull origin master</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新所有模块<br>更新后每个子模块并非在指定分支上，而是关联最近一次commitID。<br>使用<code>git submodule foreach</code>为每一个子模块执行切换命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule foreach git checkout master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>切换到所有master分支上（ModuleB为ResourceEvaluate，暂时需要单独执行）</p>
<ol start="5">
<li>删除子模块<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached moduleA</span><br><span class="line">rm -rf moduleA</span><br><span class="line">vi .gitmodules //删除moduleA相关的内容</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;remove moduleA&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="subtree命令"><a href="#subtree命令" class="headerlink" title="subtree命令"></a>subtree命令</h3><ol>
<li><p><code>subtree</code>添加子模块<br>通过<code>subtree</code>添加子模块,<code>–squash</code>可省略，其功能是只有最新的提交记录被引入，去掉后则是引入所有历史提交记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#增加远程仓库并设置引用名`ModuleA`，此步可省略，主要是为了简化后面的操作</span><br><span class="line">git remote add ModuleA http://github.com/../ModuleA.git master</span><br><span class="line">#`subtree`添加子模块</span><br><span class="line">git subtree add --prefix=ModuleA --squash  ModuleA master</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>subtree</code>更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree pull -P ModuleA ModuleA master</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>subtree</code>提交</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree push --prefix=ModuleA ModuleA master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">/</th>
<th style="text-align:center">submodule</th>
<th style="text-align:center">subtree</th>
<th style="text-align:center">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">远程仓库空间占用</td>
<td style="text-align:center">submodule只是引用，基本不占用额外空间</td>
<td style="text-align:center">子模块copy，会占用较大的额外空间</td>
<td style="text-align:center">submodule占用空间较小，略优</td>
</tr>
<tr>
<td style="text-align:center">本地空间占用</td>
<td style="text-align:center">可根据需要下载</td>
<td style="text-align:center">会下载整个项目</td>
<td style="text-align:center">所有模块基本都要下载，二者差异不大</td>
</tr>
<tr>
<td style="text-align:center">仓库克隆</td>
<td style="text-align:center">克降后所有子模块为空，需要注册及更新，同时更新后还需切换分支</td>
<td style="text-align:center">克隆之后即可使用</td>
<td style="text-align:center">submodule步骤略多，subtree占优</td>
</tr>
<tr>
<td style="text-align:center">更新本地仓库</td>
<td style="text-align:center">更新后所有子模块后指向最后一次提交，更新后需要重新切回分支，所有子模块只需一条更新语句即可</td>
<td style="text-align:center">所有子模块需要单独更新</td>
<td style="text-align:center">各有优劣，相对subtree更好用一些</td>
</tr>
<tr>
<td style="text-align:center">提交本地修改</td>
<td style="text-align:center">只需关心子模块即可，子模块的所有操作与普通git项目相同</td>
<td style="text-align:center">提交执行命令相对复杂一些</td>
<td style="text-align:center">submodule操作更简单，submodule占优</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/16/导图/开发思想模式总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/16/导图/开发思想模式总结/" class="post-title-link" itemprop="url">开发思想模式总结</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-15 16:14:07" itemprop="dateCreated datePublished" datetime="2017-05-15T16:14:07Z">2017-05-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-22 21:18:59" itemprop="dateModified" datetime="2018-09-22T21:18:59Z">2018-09-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/导图/" itemprop="url" rel="index"><span itemprop="name">导图</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/16/导图/开发思想模式总结/" class="leancloud_visitors" data-flag-title="开发思想模式总结">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>OOP面向对象编程：1. 封装，2，继承，3. 多态<br>五大原则：<br>SRP单一职责原则：一个类的功能要单一，表现突出的VIPER模式<br>OCP开放封闭原则:模块扩展性为开放的，模块更改性则为封闭的。<br>LSP替换原则，<br>DIP依赖原则，<br>ISP接口分离原则：模块间的功能通过抽象接口隔离</p>
<p>封装：将抽象事物的特征，行为，转化为代码中的类：属性和方法即为封装，体现2.对属性和方法的访问权限的控制 私有，公有不同级别的保护。<br>继承：广义上也是一种对代码的复用。继承有两种方式：实现继承和接口继承。</p>
<p>多态：一个类实例的同一个方法，在不同情形有不同的表现形式。类似多个构造器和便利构造器，实现的功能都是初始化类实例的作用</p>
<h2 id="子类场景"><a href="#子类场景" class="headerlink" title="子类场景"></a>子类场景</h2><p>优点：代码封装，重用组件</p>
<ol>
<li>自定义系统控件时： 如：对UITableViewCell等视图，自定义布局。</li>
<li>针对多平台，多版本来编写代码<br>实现：创建一个基类，创建iPhone子类／iPad子类来继承重写特性方法。</li>
<li>子类化模型对象，继承isEqual:,hash,copyWithZone:和description等方法，参考开源框架<a href="http://southpeak.github.io/2015/01/11/sourcecode-mantle/" target="_blank" rel="noopener">Mantle</a></li>
</ol>
<h2 id="子类的场景替代方案"><a href="#子类的场景替代方案" class="headerlink" title="子类的场景替代方案"></a>子类的场景替代方案</h2><p>深层次的集成的替代方案：</p>
<ol>
<li>子类使用相同的接口，协议替代，</li>
<li>当对象正常运行需要大量配置时，使用代理来完成配置 </li>
<li>对现有的类增加简单功能时，使用类别来扩展</li>
<li>重写一堆相同方法子类时，使用配置对象代替</li>
<li>当重用某些功能时，使用组合多个对象来代替，而不是扩展它们</li>
</ol>
<h2 id="简明架构：VIPER模式：单一职责，"><a href="#简明架构：VIPER模式：单一职责，" class="headerlink" title="简明架构：VIPER模式：单一职责，"></a>简明架构：VIPER模式：单一职责，</h2><p>将APP逻辑结构划分为不同的责任层：<br>View视图，Interactor交互器，Presenter展示器，Entity实体，Routing路由</p>
<ol>
<li>接口隔离原则：隔离依赖项，</li>
<li>单一职责原则：利于测试各层间边界处的交互。</li>
<li>轻量化VC，提高可读性，维护性。</li>
</ol>
<h2 id="基于用例的应用设计-待办事项清单示例"><a href="#基于用例的应用设计-待办事项清单示例" class="headerlink" title="基于用例的应用设计  待办事项清单示例"></a>基于用例的应用设计  待办事项清单示例</h2><p>用例别称为验收标准，或行为集，它们用来描述应用的用途。独立于用户界面，主要针对在应用程序中的负责业务逻辑层的测试操作。<br>举例：清单可以根据时间，类型以及名字排序，这就是一个用例。<br>特征：足够小，良好的定义。<br>作用：将复杂的应用分解成较小的用例。</p>
<p>单一职责原则：便于测试<br>测试用例：<br>模拟网络数据-&gt;拦截HTTP请求-&gt;模拟一个响应对象给请求方<br>目的：<br>模拟数据，激活iResearcher </p>
<ol>
<li>多线程下载</li>
<li>VIPER架构</li>
</ol>
<p>LLDB命令和断点的合用<br>变量，对象：p ，po，e 表达式，<br>流程控制：thread<br>断点管理：breakpoint<br>LLDB和Python<br>AppleScript</p>
<p>Instruments<br>自定义工具–DTrace语法 -&gt;自动化脚本<br>终端成员DTrace<br>使用IB工具来编写DTrace脚本，并可以方便的导出DTrace脚本，可用于脚本自动化时收集APP运行状态的数据，<br>探针 （断言，动作，提供者，全部变量 ，begin，end）<br>DTrace脚本是在内核中运行中的，需要IB工具做缓冲区，来封装内核数据达到ib工具识别</p>
<p>废除功能：<br>run Browser浏览器功能<br>UI automation功能</p>
<h1 id="view属性的自动布局"><a href="#view属性的自动布局" class="headerlink" title="view属性的自动布局"></a>view属性的自动布局</h1>
          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/05/15/xcode/Xcode8插件制作替代Alcatraz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/15/xcode/Xcode8插件制作替代Alcatraz/" class="post-title-link" itemprop="url">Xcode8插件制作替代Alcatraz</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-15 14:09:30" itemprop="dateCreated datePublished" datetime="2017-05-15T14:09:30Z">2017-05-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:14" itemprop="dateModified" datetime="2019-01-16T21:01:14Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/xcode/" itemprop="url" rel="index"><span itemprop="name">xcode</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/05/15/xcode/Xcode8插件制作替代Alcatraz/" class="leancloud_visitors" data-flag-title="Xcode8插件制作替代Alcatraz">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">4.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ol>
<li>Xcode7插件工具Alcatraz<br>开发者可以在Xcode运行的时候通过注入代码去实现插件的功能。插件可以在一个Alcatraz这个优秀的APP上面提交和分发。<br>以往Xcode插件开发在没有官方支持的情况下，提供了<a href="https://github.com/kattrali/Xcode-Plugin-Template" target="_blank" rel="noopener">Xcode-Plugin-Template</a>和各种dump好的头文件，我们仍然需要在没有文档的情况下做各种猜测和hook。关于插件的开发，可以看看<a href="https://onevcat.com/2013/02/xcode-plugin/" target="_blank" rel="noopener">这篇文章</a>。</li>
<li>Xcode8编辑源码的插件Xcode source editor extensions<br>Xcode 8验证每个库和包，以防止恶意代码未经您的许可运行。苹果公司在今年的WWDC上宣布了可以通过开发<code>Xcode source editor extensions</code>来扩展以下三个功能:</li>
</ol>
<ul>
<li>Add commands to the source editor // 给Xcode的代码编辑器扩展一些命令（在Editor菜单下增加额外的菜单）</li>
<li>Edit text                 //通过这些命令对源代码进行编辑</li>
<li>Change selections //对选中文本的编辑功能</li>
</ul>
<h2 id="源码编辑器插件"><a href="#源码编辑器插件" class="headerlink" title="源码编辑器插件"></a>源码编辑器插件</h2><h2 id="添加命令菜单"><a href="#添加命令菜单" class="headerlink" title="添加命令菜单"></a>添加命令菜单</h2><h3 id="通过Info-plist中添加菜单"><a href="#通过Info-plist中添加菜单" class="headerlink" title="通过Info.plist中添加菜单"></a>通过Info.plist中添加菜单</h3><p>打开<code>Info.plist</code>，展开<code>NSExtension</code>至<code>XCSourceEditorCommandDefinitions</code>，命令菜单的定义如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSExtensionAttributes&lt;/key&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;XCSourceEditorCommandDefinitions&lt;/key&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">            &lt;key&gt;XCSourceEditorCommandClassName&lt;/key&gt;</span><br><span class="line">            &lt;string&gt;$(PRODUCT_MODULE_NAME).SourceEditorCommand&lt;/string&gt;</span><br><span class="line">            &lt;key&gt;XCSourceEditorCommandIdentifier&lt;/key&gt;</span><br><span class="line">            &lt;string&gt;com.xt.APPlugins.AutoComment.SourceEditorCommand&lt;/string&gt;</span><br><span class="line">            &lt;key&gt;XCSourceEditorCommandName&lt;/key&gt;</span><br><span class="line">            &lt;string&gt;Source Editor Command&lt;/string&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">    &lt;key&gt;XCSourceEditorExtensionPrincipalClass&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;$(PRODUCT_MODULE_NAME).SourceEditorExtension&lt;/string&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中：</p>
<ul>
<li>XCSourceEditorCommandClassName指向命令的处理类，该类实现XCSourceEditorCommand。</li>
<li>XCSourceEditorCommandIdentifier是命令的唯一标识，通常我们会对一组命令设置同一个XCSourceEditorCommand，在invocation中获取此标识做区分处理。</li>
<li>XCSourceEditorCommandName是命令在菜单栏展示的菜单名称。<h3 id="通过代码定制命令菜单"><a href="#通过代码定制命令菜单" class="headerlink" title="通过代码定制命令菜单"></a>通过代码定制命令菜单</h3>此外，菜单项是动态加载的，可以实现<code>SourceEditorExtension.swift</code>的<code>commandDefinitions:</code>实现<br><code>SourceEditorExtensio</code>n用来管理extension的生命周期相关,<code>SourceEditorCommand</code>则用来处理具体的命令。<br>这会覆盖掉Info.plist中的定义。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 启动extension被调用，自定义相关操作</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">extensionDidFinishLaunching</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> commandDefinitions: [[<span class="type">XCSourceEditorCommandDefinitionKey</span>: <span class="type">AnyObject</span>]] &#123;</span><br><span class="line">    <span class="comment">// If your extension needs to return a collection of command definitions that differs from those in its Info.plist, implement this optional property getter.</span></span><br><span class="line">    <span class="comment">////commandDefinitions属性的getter方法可以动态的展示或是隐藏特定的指令</span></span><br><span class="line">    <span class="keyword">return</span> [[.classNameKey: <span class="string">"SourceEditorCommand"</span>,</span><br><span class="line">             .identifierKey: <span class="string">"CustomIdentifier"</span>,</span><br><span class="line">             .nameKey: <span class="string">"CustomeName"</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="命令插件功能实现"><a href="#命令插件功能实现" class="headerlink" title="命令插件功能实现"></a>命令插件功能实现</h2><p>打开<code>SourceEditorCommand.swift</code>，实现<code>perform(with:completionHandler:)</code>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SourceEditorCommand</span>: <span class="title">NSObject</span>, <span class="title">XCSourceEditorCommand</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//当通过Xcode菜单键调用插件时调用，实现插件功能的主体</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">perform</span><span class="params">(with invocation: XCSourceEditorCommandInvocation,</span></span></span><br><span class="line"><span class="function"><span class="params">               completionHandler: @escaping <span class="params">(Error?)</span></span></span> -&gt; <span class="type">Void</span> ) -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">       <span class="comment">// 正则匹配含有 闭包 的文本</span></span><br><span class="line">       <span class="keyword">var</span> updatedLineIndexes = [<span class="type">Int</span>]()</span><br><span class="line">       <span class="keyword">for</span> lineIndex <span class="keyword">in</span> <span class="number">0</span> ..&lt; invocation.buffer.lines.<span class="built_in">count</span></span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">let</span> line = invocation.buffer.lines[lineIndex] <span class="keyword">as</span>! <span class="type">NSString</span></span><br><span class="line">           <span class="keyword">do</span> &#123;</span><br><span class="line">               <span class="keyword">let</span> results = <span class="keyword">try</span> findClosureSyntax(line: line)</span><br><span class="line">               <span class="comment">//简化所有闭包语法格式：移除闭包里面括号</span></span><br><span class="line">               <span class="number">_</span> = results.<span class="built_in">map</span> &#123; result <span class="keyword">in</span></span><br><span class="line">                   <span class="keyword">let</span> cleanLine = line.remove(characters: [<span class="string">"("</span>, <span class="string">")"</span>], <span class="keyword">in</span>: result.range)</span><br><span class="line">                   updatedLineIndexes.append(lineIndex)</span><br><span class="line">                   invocation.buffer.lines[lineIndex] = cleanLine</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">               completionHandler(error <span class="keyword">as</span> <span class="type">NSError</span>)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       completionHandler(<span class="literal">nil</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//使用正则表达式去遍历每一行代码是否含有闭包</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">findClosureSyntax</span><span class="params">(line:NSString)</span></span> <span class="keyword">throws</span> -&gt;[<span class="type">NSTextCheckingResult</span>]</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">let</span> regex =  <span class="keyword">try</span> <span class="type">NSRegularExpression</span>(pattern: <span class="string">"\\&#123;.*\\(.+\\).+in"</span>, options: .caseInsensitive)</span><br><span class="line">       <span class="keyword">let</span> range = <span class="type">NSRange</span>(<span class="number">0</span> ..&lt; line.length)</span><br><span class="line">       <span class="keyword">return</span> regex.matches(<span class="keyword">in</span>: line <span class="keyword">as</span> <span class="type">String</span>, options: .reportProgress, range: range)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>XCSourceEditorCommandInvocation</code>的<code>buffer</code>提供了当前选中的文件源代码中的信息，包括文件的<code>lines</code>, <code>selections</code>, <code>indentationWidth</code>等等，具体作用可以查看WWDC视频或者苹果的文档查看，在此就不一一介绍了。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><ol>
<li>选择scheme后编译运行自定义的extensions插件</li>
<li>选择测试安装插件的Xcode</li>
<li>点击run按钮会单独启动一个全新的Xcode<br>在新的Xcode实例中，创建一个新的工程或是打开一个存在的工程。</li>
<li>然后执行<code>Editor &gt; Clean Closure &gt; Source Editor Command</code>，需要确保在当前的文件里面含有一个闭包。这样就可以看到如下的效果，刚才开发的extension工作了！</li>
</ol>
<h2 id="命令快捷键"><a href="#命令快捷键" class="headerlink" title="命令快捷键"></a>命令快捷键</h2><p>设置快捷键去自动调用Clean Syntax命令</p>
<ol>
<li>打开Xcode的Preferences，选择Key Bindings ;</li>
<li>搜索Clean Syntax，点击右边然后输入快捷键，例如：Command-Alt-Shift-+。</li>
</ol>
<p><a href="http://wuwen1030.github.io/2016/06/23/WWDC2016之初识Xcode-Source-Editor-Extension/" target="_blank" rel="noopener">WWDC2016之初识Xcode Source Editor Extension</a><br><a href="https://github.com/theswiftdev/awesome-xcode-extensions" target="_blank" rel="noopener">xcode常用的插件清单</a><br><a href="http://www.iseedog.com/2016/09/21/xcode-source-editor/#more" target="_blank" rel="noopener">使用 Xcode Source Editor Extension开发Xcode 8 插件</a><br><a href="https://www.jianshu.com/p/9c9d0fcc62cc?winzoom=1" target="_blank" rel="noopener">详解一步步实现Xcode 8 插件</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/03/04/macOS/从UIKit到AppKit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/04/macOS/从UIKit到AppKit/" class="post-title-link" itemprop="url">从UIKit到AppKit</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-03-03 17:55:16" itemprop="dateCreated datePublished" datetime="2017-03-03T17:55:16Z">2017-03-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:14" itemprop="dateModified" datetime="2019-01-16T21:01:14Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/视图/" itemprop="url" rel="index"><span itemprop="name">视图</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/03/04/macOS/从UIKit到AppKit/" class="leancloud_visitors" data-flag-title="从UIKit到AppKit">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h2><h3 id="NSWindowController"><a href="#NSWindowController" class="headerlink" title="NSWindowController"></a>NSWindowController</h3><p>在<code>Mac</code>上应用都支持多窗口（<code>NSWindowController</code>），<code>AppKit</code> 中都有 <code>NSWindowController</code>担当着类似在<code>iOS</code>中的<code>view controller</code>处理的任务。</p>
<blockquote>
<p><code>window</code>在<code>iOS</code>占据整个屏幕，几乎不怎么不用。</p>
</blockquote>
<h3 id="NSViewController"><a href="#NSViewController" class="headerlink" title="NSViewController"></a>NSViewController</h3><p><code>AppKit</code> 中的 <code>NSViewController</code>默认不支持交互，缺少生命周期相关方法和<code>UIKit</code>中熟悉的特性。<br>但在OS X 10.10 Yosemite之后，<code>NSViewController</code>改进很多，默认支持交互中的响应链。</p>
<h3 id="NSWindow-和-UIWindow"><a href="#NSWindow-和-UIWindow" class="headerlink" title="NSWindow 和 UIWindow"></a>NSWindow 和 UIWindow</h3><p>在<code>UIKit</code>中<code>UIWindow</code>是一个 <code>view</code> 的子类.<br>在<code>AppKit</code>中<code>NSWindow</code>用 <code>contentView</code> 属性持有一个指向其顶层 <code>view</code> 的引用。</p>
<h2 id="响应者链（responder-chain）"><a href="#响应者链（responder-chain）" class="headerlink" title="响应者链（responder chain）"></a>响应者链（responder chain）</h2><p>如果你在为 OS X 10.9 或者更低版本的系统开发，请注意在默认情况下<code>view controller</code> 并不是响应者链的一环。相反，事件会沿着视图树向上传递然后直接到达 <code>window</code> 和 <code>window</code> <code>controller</code>。在这种情况下，如果你想在 <code>view controller</code> 处理事件，你需要手动把它添加到响应者链中。</p>
<h3 id="Target-Action消息传递方式"><a href="#Target-Action消息传递方式" class="headerlink" title="Target-Action消息传递方式"></a>Target-Action消息传递方式</h3><p><code>Target-Action</code> 是回应 <code>UI 事件</code>时典型的消息传递方式。<code>iOS</code> 上的 <code>UIControl</code> 和 <code>Mac</code> 上的 <code>NSControl/NSCell</code> 都支持这个机制。<br><code>Target-Action</code> 在消息的发送者和接收者之间建立了一个松散的关系。消息的接收者不知道发送者，甚至消息的发送者也不知道消息的接收者会是什么。如果 <code>target</code> 是 <code>nil</code>，<code>action</code> 会在响应链 (responder chain) 中被传递下去，直到找到一个响应它的对象。</p>
<h4 id="传递机制的局限"><a href="#传递机制的局限" class="headerlink" title="传递机制的局限"></a>传递机制的局限</h4><p>基于 <code>target-action</code> 传递机制的一个局限是，发送的消息不能携带自定义的信息：</p>
<ol>
<li>在<code>iOS</code> 中，可以选择性的把发送者和触发 <code>action</code> 的事件作为参数。</li>
<li>在 <code>Mac</code> 平台上 <code>action</code> 方法的第一个参数永远是发送者，否则将不视为无效方法。<br>在<code>AppKit</code>唯一有效的<code>action</code> 方法声明方式：<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)performAction:(<span class="keyword">id</span>)sender;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="控件关联Action事件的区别"><a href="#控件关联Action事件的区别" class="headerlink" title="控件关联Action事件的区别"></a>控件关联Action事件的区别</h4><p><code>iOS</code> 上的 <code>UIControl</code> 和 <code>Mac</code> 上的 <code>NSControl/NSCell</code> 都支持这个机制。</p>
<ol>
<li>在 <code>iOS</code> 中，每个控件可以通过<code>addTarget:action:forControlEvents:</code>和多个 <code>target-action</code> 关联。</li>
<li>在<code>AppKit</code>中通常一个<code>控件</code>仅对应一个 <code>target-action</code>对。</li>
</ol>
<h2 id="View视图系统"><a href="#View视图系统" class="headerlink" title="View视图系统"></a>View视图系统</h2><p>因为历史遗留问题，<code>Mac</code> 的视图系统和 <code>iOS</code>的视图系统有很大区别。</p>
<ol>
<li>绘图处理器差异<br><code>iOS</code>由 <code>Core Animation layer</code> 驱动，使用<code>GPU</code>处理。<br><code>AppKit</code>视图系统相关的任务主要靠 <code>CPU</code> 处理，因为在<code>AppKit</code>设计之初，<code>GPU</code>还没有诞生。<br>Mac开发参考资料：<br><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002978" target="_blank" rel="noopener">Introduction to View Programming Guide for Cocoa</a><br><a href="https://developer.apple.com/videos/wwdc/2012/#217" target="_blank" rel="noopener">WWDC session：Layer-Backed Views: AppKit + Core Animation</a><br><a href="https://developer.apple.com/videos/wwdc/2013/#215" target="_blank" rel="noopener">Optimizing Drawing and Scrolling</a></li>
</ol>
<h3 id="Layer-Backed-View-iOS反哺AppKit层支持视图"><a href="#Layer-Backed-View-iOS反哺AppKit层支持视图" class="headerlink" title="Layer-Backed View: iOS反哺AppKit层支持视图"></a>Layer-Backed View: iOS反哺AppKit层支持视图</h3><ol>
<li><code>iOS</code>反哺<code>AppKit</code><br>默认情况下，<code>AppKit</code> 的 <code>view</code> 不是由 <code>Core Animation layer</code> 驱动的；<code>AppKit</code> 整合 <code>layer-backing</code> 是 <code>iOS</code> 反哺的结果。</li>
</ol>
<h4 id="layer-backing启用／禁用-wantsLayer"><a href="#layer-backing启用／禁用-wantsLayer" class="headerlink" title="layer backing启用／禁用:wantsLayer"></a>layer backing启用／禁用:wantsLayer</h4><p><code>AppKit</code> 区分 <code>layer-backed view</code> 和 <code>layer-hosting view</code>，可以在每个视图树的根节点启用或者禁用 <code>layer backing</code>。<br>启用 <code>layer backing</code></p>
<ol>
<li>方法一：把窗口的 <code>contentView</code> 的 <code>wantsLayer</code> 属性设置为 <code>YES</code></li>
<li>方法二：在 <code>Interface Builder</code> 的 <code>View Effects Inspector</code> 面板完成<br>这会导致 <code>window</code> 的视图树中所有的 <code>view</code> 都启用 <code>layer backing</code>，这样就没必要反复设置每个 <code>view</code> 的 <code>wantsLayer</code> 属性了。</li>
</ol>
<h4 id="修改layer属性"><a href="#修改layer属性" class="headerlink" title="修改layer属性"></a>修改layer属性</h4><p>在<code>AppKit</code>上开启<code>layer backing</code>之后，<code>layer</code>的拥有者是<code>AppKit</code>，这就意味着不能直接编辑 <code>layer</code>的属性。<br>在 <code>iOS</code> 上可以直接编辑：<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.layer.backgroundColor = [<span class="built_in">UIColor</span> redColor].CGColor;</span><br></pre></td></tr></table></figure><br>在 <code>AppKit</code>编辑<code>layer</code>属性需要以下步骤：</p>
<ol>
<li>重写 <code>NSView</code> 的 <code>wantsUpdateLayer</code> 方法并返回 <code>YES</code>,这能让你可以改变 <code>layer</code> 的属性。<br>这样以来，在<code>view</code> 更新周期中，将不会再调用 <code>view</code> 的 <code>drawRect:</code> 方法。取而代之，调用<code>updateLayer</code>方法来更新<code>Layer</code>。<br>举个例子，用这方法去实现一个非常简单的有纯色背景的 <code>view</code>（没错，<code>NSView</code> 没有<code>backgroundColor</code> 属性）：<br>这个例子的前提是这个 <code>view</code> 的<code>父 view</code> 已经为其视图树启用了 <code>layer backing</code>。<br>另一种可行的实现则只需要重写 <code>drawRect:</code> 方法并在其中绘制背景颜色。<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ColoredView</span>: <span class="title">NSView</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSColor</span> *backgroundColor;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ColoredView</span></span></span><br><span class="line">- (<span class="built_in">BOOL</span>)wantsUpdateLayer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)updateLayer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span>.layer.backgroundColor = <span class="keyword">self</span>.backgroundColor.CGColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setBackgroundColor:(<span class="built_in">NSColor</span> *)backgroundColor</span><br><span class="line">&#123;</span><br><span class="line">    _backgroundColor = backgroundColor;</span><br><span class="line">    [<span class="keyword">self</span> setNeedsDisplay:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="合并-Layer"><a href="#合并-Layer" class="headerlink" title="合并 Layer"></a>合并 Layer</h4><p>当APP启动过多的<code>layer-backed view</code> 会带来巨大的内存消耗（每一个 <code>layer</code> 有其自己的 <code>backing store</code>，还有可能和其他 <code>view</code>的 <code>backing store</code> 重叠）而且会带来潜在的合成这些 <code>layer</code> 的消耗。</p>
<h5 id="canDrawSubviewsIntoLayer合并Layer"><a href="#canDrawSubviewsIntoLayer合并Layer" class="headerlink" title="canDrawSubviewsIntoLayer合并Layer"></a>canDrawSubviewsIntoLayer合并Layer</h5><p>从 OS X 10.9 开始，如果不单独对一个 <code>view</code> 中的子 <code>view</code> 做动画，可以通过设置 <code>canDrawSubviewsIntoLayer</code> 属性来让 <code>AppKit</code> 合并一个<code>视图树</code>中所有 <code>layer</code> 的内容到一个共有的 <code>layer</code>。</p>
<h5 id="隐式layer-backed合并Layer"><a href="#隐式layer-backed合并Layer" class="headerlink" title="隐式layer-backed合并Layer"></a>隐式layer-backed合并Layer</h5><p>所有隐式 <code>layer-backed</code> 的<code>子 view</code>（比如，没有显式地对这些<code>子 view</code> 设置 <code>wantsLayer = YES</code>）现在将会被绘制到同一个 <code>layer</code> 中。不过<code>wantsLayer</code> 设置为 <code>YES</code> 的<code>子 view</code> 仍然持有它们自己的 <code>backing layer</code>， 而且不管 <code>wantsUpdateLayer</code> 返回什么，它们的 <code>drawRect:</code> 方法仍然会被调用。</p>
<h4 id="Layer-重绘策略"><a href="#Layer-重绘策略" class="headerlink" title="Layer 重绘策略"></a>Layer 重绘策略</h4><h5 id="layer-backed-view-默认的自动重绘策略"><a href="#layer-backed-view-默认的自动重绘策略" class="headerlink" title="layer-backed view 默认的自动重绘策略"></a>layer-backed view 默认的自动重绘策略</h5><p><code>layer-backed view</code> 会默认设置重绘策略为 <code>NSViewLayerContentsRedrawDuringViewResize</code>。在行为上，这个非 <code>layer-backed view</code> 是类似的，不过如果动画的每一帧都引入一个绘制步骤的话可能会对动画的性能造成不利影响。</p>
<h5 id="设置layer-backed-view手动重绘策略"><a href="#设置layer-backed-view手动重绘策略" class="headerlink" title="设置layer-backed view手动重绘策略"></a>设置layer-backed view手动重绘策略</h5><ol>
<li>设置手动重绘策略：把 <code>layerContentsRedrawPolicy</code> 属性设置为 <code>NSViewLayerContentsRedrawOnSetNeedsDisplay</code> </li>
<li>实现手动重绘操作：调用 <code>-setNeedsDisplay:</code>方法来触发重绘操作<br>这样便由你来决定 <code>layer</code> 的内容何时需要重绘。帧的改变将不再自动触发重绘。</li>
</ol>
<h5 id="设置view的属性来重绘Layer"><a href="#设置view的属性来重绘Layer" class="headerlink" title="设置view的属性来重绘Layer"></a>设置view的属性来重绘Layer</h5><ol>
<li>view中<code>layerContentsPlacement</code>属性：等价<code>layer</code>中的 <code>contentGravity</code> 属性。<br>这个属性允许你指定在调整大小的时候当前的 <code>layer</code> 内容该怎么映射到 <code>layer</code> 上。</li>
</ol>
<h3 id="Layer-Hosting-View-使用-Core-Animation-layer"><a href="#Layer-Hosting-View-使用-Core-Animation-layer" class="headerlink" title="Layer-Hosting View:使用 Core Animation layer"></a>Layer-Hosting View:使用 Core Animation layer</h3><p><code>layer-hosting view</code> 是视图树中的叶子节点，使用这种模式可以对<code>layer</code> 及其<code>子 layer</code> 做任何操作，代价是你再也不能给该 <code>view</code> 添加任何<code>子 view</code>。</p>
<h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><ol>
<li>为 <code>view</code> 的 <code>layer</code> 属性分配一个 <code>layer 对象</code>，</li>
<li>设置<code>wantsLayer</code> 为 <code>YES</code><br>这些步骤的顺序是非常关键：<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(<span class="type">NSRect</span>)frame</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">self</span>.layer = [[<span class="type">CALayer</span> alloc] <span class="keyword">init</span>];</span><br><span class="line">        <span class="keyword">self</span>.wantsLayer = <span class="type">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
在你设置了自定义的 <code>layer</code> 之后，再设置 <code>wantsLayer</code> 是非常重要的。</li>
</ol>
<h3 id="其他与-View-相关的陷阱"><a href="#其他与-View-相关的陷阱" class="headerlink" title="其他与 View 相关的陷阱"></a>其他与 View 相关的陷阱</h3><h4 id="坐标系统原点设置左下／左上角"><a href="#坐标系统原点设置左下／左上角" class="headerlink" title="坐标系统原点设置左下／左上角"></a>坐标系统原点设置左下／左上角</h4><p>通过重写<code>isFlipped</code> 并返回 <code>YES</code> 来恢复到你熟悉的左上角。</p>
<h4 id="View背景颜色属性drawsBackground"><a href="#View背景颜色属性drawsBackground" class="headerlink" title="View背景颜色属性drawsBackground"></a>View背景颜色属性drawsBackground</h4><p>由于 <code>AppKit</code> 中的 <code>view</code> 没有背景颜色属性可以让你直接设置为 <code>[NSColor clearColor]</code> 来让其变得透明，许多 <code>NSView</code> 的子类比如 <code>NSTextView</code> 和 <code>NSScrollView</code> 开放了一个 <code>drawsBackground</code> 属性，如果你想让这一类 <code>view</code> 透明，你必须设置该属性为 <code>NO</code>。</p>
<h4 id="设置光标追踪区域"><a href="#设置光标追踪区域" class="headerlink" title="设置光标追踪区域"></a>设置光标追踪区域</h4><p>为了能接收光标进出一个 view 或者在 view 里面移动的事件，你需要创建一个追踪区域。你可以在 <code>NSView</code> 中指定的 <code>updateTrackingAreas</code> 方法中来做这件事情。一个通用的写法看起来是这样子的：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)updateTrackingAreas</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> removeTrackingArea:<span class="keyword">self</span>.trackingArea];</span><br><span class="line">    <span class="keyword">self</span>.trackingArea = [[<span class="type">NSTrackingArea</span> alloc] initWithRect:<span class="type">CGRectZero</span> </span><br><span class="line">                                                     options:<span class="type">NSTrackingMouseEnteredAndExited</span>|<span class="type">NSTrackingInVisibleRect</span>|<span class="type">NSTrackingActiveInActiveApp</span></span><br><span class="line">                                                       owner:<span class="keyword">self</span> </span><br><span class="line">                                                    userInfo:<span class="literal">nil</span>];</span><br><span class="line">    [<span class="keyword">self</span> addTrackingArea:<span class="keyword">self</span>.trackingArea];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="NSCell困惑"><a href="#NSCell困惑" class="headerlink" title="NSCell困惑"></a>NSCell困惑</h4><p><code>AppKit</code> 的控件之前是由 <code>NSCell</code> 的子类驱动的，可以被所有同类型的控件重用。<br><code>AppKit</code> 最初区分 <code>view</code> 和 <code>cell</code> 是为了节省资源 - <code>view</code> 可以把所有的绘制工作代理给更轻量级的可以被所有同类型的 <code>view</code> 重用的 <code>cell</code> 对象。<br>不要混淆这些 <code>cell</code> 和 <code>UIKit</code> 里 <code>table view</code> 的 <code>cell</code> 及 <code>collection view</code> 的 <code>cell</code>。</p>
<h5 id="自定义一个按钮控件"><a href="#自定义一个按钮控件" class="headerlink" title="自定义一个按钮控件"></a>自定义一个按钮控件</h5><p>Apple 正在一步步地抛弃这样的实现方法了，但是你还是会时不时碰到这样的问题。<br>举个例子，如果你想创建一个自定义的按钮，</p>
<ol>
<li>首先要继承 <code>NSButton</code> 和 <code>NSButtonCell</code></li>
<li>然后在这个 <code>cell 子类</code>里面进行你自定义的绘制，</li>
<li>然后通过重写 <code>+[NSControl cellClass]</code>方法告诉自定义按钮使用你的 <code>cell 子类</code></li>
</ol>
<h4 id="获取-Core-Graphics-上下文"><a href="#获取-Core-Graphics-上下文" class="headerlink" title="获取 Core Graphics 上下文"></a>获取 Core Graphics 上下文</h4><p>最后，如果你想知道在你自己的 <code>drawRect:</code> 方法里怎么获取当前的 <code>Core Graphics</code> 上下文，答案是 <code>NSGraphicsContext</code> 的 <code>graphicsPort</code> 属性。详细内容请查看 <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaDrawingGuide/" target="_blank" rel="noopener">Cocoa Drawing Guide</a>。</p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p>如果你的 <code>view</code> 不是由 <code>layer</code> 驱动的，那你的动画自然是完全由 <code>CPU</code> 处理，这意味着动画的每一步都必须相应地绘制到 <code>window-backing store</code> 上。</p>
<h3 id="对-layer-backed-view做动画"><a href="#对-layer-backed-view做动画" class="headerlink" title="对 layer-backed view做动画"></a>对 layer-backed view做动画</h3><p>正如上面说的，在 <code>AppKit</code> 中,这些 <code>layer</code> 由 <code>AppKit</code> 管理，你不应该修改 <code>layer-backed view</code> 中的 <code>layer</code>。 </p>
<h4 id="几何属性"><a href="#几何属性" class="headerlink" title="几何属性"></a>几何属性</h4><p>与<code>iOS</code> 相反，<code>view</code> 的几何属性并不仅仅是对应的 <code>layer</code> 的几何属性的映射，但 <code>AppKit</code> 却会把 <code>view</code> 内部的几何属性同步到 <code>layer</code>。</p>
<h4 id="的animator-proxy动画"><a href="#的animator-proxy动画" class="headerlink" title="的animator proxy动画"></a>的animator proxy动画</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.animator.alphaValue = <span class="number">.5</span>;</span><br></pre></td></tr></table></figure>
<p>在幕后，这句代码会启用 <code>layer</code> 的隐式动画，设置其透明度，然后再次禁用 <code>layer</code> 的隐式动画。</p>
<h4 id="NSAnimationContext动画"><a href="#NSAnimationContext动画" class="headerlink" title="NSAnimationContext动画"></a>NSAnimationContext动画</h4><ol>
<li>结束回调<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSAnimationContext</span> runAnimationGroup:^(<span class="built_in">NSAnimationContext</span> *context)&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//持续时间</span></span><br><span class="line">    context.duration = <span class="number">1</span>;  </span><br><span class="line">    <span class="comment">//缓动类型</span></span><br><span class="line">    context.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseIn];</span><br><span class="line">    view.animator.alphaValue = <span class="number">.5</span>;</span><br><span class="line"></span><br><span class="line">&#125; completionHandler:^&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;]; </span><br></pre></td></tr></table></figure></li>
<li>无结束回调<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSAnimationContext</span> currentContext].duration = <span class="number">1</span>;</span><br><span class="line">view.animator.alphaValue = <span class="number">.5</span>; </span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="启用隐式动画"><a href="#启用隐式动画" class="headerlink" title="启用隐式动画"></a>启用隐式动画</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSAnimationContext</span> currentContext].allowsImplicitAnimations = <span class="literal">YES</span>;</span><br><span class="line">view.alphaValue = <span class="number">.5</span>;</span><br></pre></td></tr></table></figure>
<h4 id="CAAnimations控制动画"><a href="#CAAnimations控制动画" class="headerlink" title="CAAnimations控制动画"></a>CAAnimations控制动画</h4><p>使用 <code>CAAnimation</code> 实例更全面地控制动画。和 <code>iOS</code> 相反，你不能直接把它们加到 <code>layer</code> 上（因为 <code>layer</code> 不应该由你来修改），不过你可以使用 <code>NSAnimatablePropertyContainer</code> 协议中定义的 <code>API</code>，<code>NSView</code> 和 <code>NSWindow</code> 已经实现了该协议。<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CAKeyframeAnimation</span> *animation = [<span class="built_in">CAKeyframeAnimation</span> animation];</span><br><span class="line">animation.values = @[@<span class="number">1</span>, @<span class="number">.9</span>, @<span class="number">.8</span>, @<span class="number">.7</span>, @<span class="number">.6</span>];</span><br><span class="line">view.animations = @&#123;<span class="string">@"alphaValue"</span>: animation&#125;;</span><br><span class="line">view.animator.alphaValue = <span class="number">.5</span>;</span><br></pre></td></tr></table></figure></p>
<h5 id="帧动画"><a href="#帧动画" class="headerlink" title="帧动画"></a>帧动画</h5><p>对于帧动画来说，把 <code>view</code> 的 <code>layerContentsRedrawPolicy</code> 设置为 <code>NSViewLayerContentsRedrawOnSetNeedsDisplay</code> 是非常重要的，不然的话 <code>view</code> 的内容在每一帧都会被重绘。</p>
<p>很遗憾，<code>NSView</code> 没有开放 <code>Core Animation layer</code> 所有可以进行动画的属性，<code>transform</code> 是其中最重要的例子。看看 Jonathan Willings 的这篇文章，它描述了你可以如何解决这些限制。不过注意，文章中的解决方案是不受官方支持的。</p>
<p>上面提到的所有东西都适用于 <code>layer-backed view</code>。对于 l<code>ayer-hosting view</code> 来说，你可以直接对 <code>view</code> 的 <code>layer</code> 或者<code>子 layer</code> 使用 <code>CAAnimations</code>，因为你拥有它们的控制权。</p>
<h3 id="文字系统"><a href="#文字系统" class="headerlink" title="文字系统"></a>文字系统</h3><p>有了 <code>TextKit</code>，<code>iOS 7</code> 终于有了和 <code>Mac</code> 上早就有了的 <code>Cocoa Text System</code> 等效的东西。但 Apple 并不仅仅是把文字系统从 Mac 上转移到 <code>iOS</code>；相反，Apple 对其做了些显著的改变。<br>举个例子，<code>AppKit</code> 开放 <code>NSTypesetter</code> 和 <code>NSGlyphGenerator</code>，你可以通过继承这两者来自定义它们的一些特性。<code>iOS</code> 并不开放这些类，但是你可以通过 <code>NSLayoutManagerDelegate</code> 协议达到定制的目的。<br>总体来说，两个平台的文字系统还是非常相似的，所有你在 <code>iOS</code> 上能做的在 <code>Mac</code> 上都可以做（甚至更多），但对于一些东西，你必须从不同的地方寻找合适的方法实现。</p>
<h3 id="沙盒"><a href="#沙盒" class="headerlink" title="沙盒"></a>沙盒</h3><p>符合沙盒机制的 <code>Mac 应用</code>才能通过 <code>Mac App Store</code> 销售。然而，我们已经习惯了沙盒机制还没出现之前的 <code>Mac</code> 开发环境，所以有时候会忽视一些你想要实现的功能会和沙盒的限制出现冲突。<br>管理Mac应用对沙盒支持：</p>
<h2 id="独有特性"><a href="#独有特性" class="headerlink" title="独有特性"></a>独有特性</h2><p>有很多事情你只能在 Mac 上做，这主要是因为它不同的交互模型和它更为宽松的安全策略。在本期话题中，我们有一些文章深入探讨了其中的一些内容：<a href="http://objccn.io/issue-14-4/" target="_blank" rel="noopener">进程间通讯</a>，<a href="http://objccn.io/issue-14-1/" target="_blank" rel="noopener">使 Mac 应用脚本化</a>,<a href="http://objccn.io/issue-14-2/" target="_blank" rel="noopener">在沙盒中脚本化其他应用</a> , <a href="http://objccn.io/issue-14-3/" target="_blank" rel="noopener">为你的应用构建插件</a>。<br>当然，这只是 Mac 独有特性中很小的一部分，但这给了你一个很好的视角看待 iOS 8 从头开始打造其可扩展性和 app 间通讯。最后，还有很多东西等待你去探索：Drag and Drop，Printing，Bindings，OpenCL 等等，这里仅仅是举几个例子。</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/03/03/开源库/RxSwift基本概念/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/03/开源库/RxSwift基本概念/" class="post-title-link" itemprop="url">RxSwift基本概念</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-03-03 13:01:41" itemprop="dateCreated datePublished" datetime="2017-03-03T13:01:41Z">2017-03-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-05 21:42:36" itemprop="dateModified" datetime="2018-10-05T21:42:36Z">2018-10-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/开源库/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/03/03/开源库/RxSwift基本概念/" class="leancloud_visitors" data-flag-title="RxSwift基本概念">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">13k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="FRP函数式反应型编程"><a href="#FRP函数式反应型编程" class="headerlink" title="FRP函数式反应型编程"></a>FRP函数式反应型编程</h2><p>Functional Reactive Programming ， 缩写为 FRP</p>
<h2 id="函数编程"><a href="#函数编程" class="headerlink" title="函数编程"></a>函数编程</h2><h3 id="函数是第一等公民"><a href="#函数是第一等公民" class="headerlink" title="函数是第一等公民"></a>函数是第一等公民</h3><p>所谓 第一等公民 (first class) ，指的是函数与其他数据类型一样，处于平等地位。既可以赋值给其他变量，也可以作为参数传入另一个函数，或者作为别的函数的返回值。<br>将数组通过指定的函数映射成另一个数组，例如将<code>increment函数</code>作为参数传入数组的<code>map函数</code>:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> increment = &#123; <span class="keyword">return</span> $<span class="number">0</span> + <span class="number">1</span> &#125;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="built_in">map</span>(increment)  <span class="comment">// [2,3,4]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="函数式的函数"><a href="#函数式的函数" class="headerlink" title="函数式的函数"></a>函数式的函数</h3><h4 id="map-映射函数"><a href="#map-映射函数" class="headerlink" title="map 映射函数"></a>map 映射函数</h4><p><code>map</code> 可以把一个数组按照一定的规则转换成另一个数组，定义如下：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;U&gt;<span class="params">(transform: <span class="params">(T)</span></span></span> -&gt; <span class="type">U</span>) -&gt; <span class="type">U</span>[]</span><br><span class="line"><span class="comment">//效果</span></span><br><span class="line">[ x1, x2, ... , xn].<span class="built_in">map</span>(f) -&gt; [f(x1), f(x2), ... , f(xn)]</span><br></pre></td></tr></table></figure><br><code>map</code>接受一个把 <code>T</code> 类型的转换成 <code>U</code> 类型的<code>transform</code>函数，最终返回的是 <code>U 类型的集合</code>。</p>
<h4 id="filter-筛选函数"><a href="#filter-筛选函数" class="headerlink" title="filter 筛选函数"></a>filter 筛选函数</h4><p><code>filter</code>通过在闭包中对每个元素进行逻辑运算，来排除为<code>false</code>的元素<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">filter</span><span class="params">(includeElement: <span class="params">(T)</span></span></span> -&gt; <span class="type">Bool</span>) -&gt; [<span class="type">T</span>]</span><br><span class="line"><span class="comment">//实现</span></span><br><span class="line"><span class="keyword">var</span> oldArray = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">45</span>,<span class="number">32</span>]</span><br><span class="line"><span class="keyword">var</span> filteredArray  = oldArray.<span class="built_in">filter</span>(&#123; <span class="keyword">return</span> $<span class="number">0</span> &gt; <span class="number">30</span> &#125;)</span><br><span class="line"><span class="built_in">println</span>(filteredArray) <span class="comment">// [45, 32]</span></span><br></pre></td></tr></table></figure></p>
<h4 id="reduce-迭代函数"><a href="#reduce-迭代函数" class="headerlink" title="reduce 迭代函数"></a>reduce 迭代函数</h4><p><code>reduce</code>函数把<code>U</code>类型集合中的所有元素，以<code>initial</code>为初始值，按照<code>combine</code>规则，逐个迭代并返回一个U类型的对象。<br>定义如下：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reduce</span>&lt;U&gt;<span class="params">(initial: U, combine: <span class="params">(U, T)</span></span></span> -&gt; <span class="type">U</span>) -&gt; <span class="type">U</span></span><br></pre></td></tr></table></figure><br>reduce 有两个参数，<code>initial</code>是初始值，<code>combine</code>定义规则闭包，闭包有两个输入的参数，一个是原始值，一个是新进来的值，闭包返回的新值作为下一轮循环中的<code>initial</code>值。<br>写几个小例子试一下：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldArray = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">45</span>,<span class="number">32</span>]</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">sum = oldArray.<span class="built_in">reduce</span>(<span class="number">0</span>,&#123;$<span class="number">0</span> + $<span class="number">1</span>&#125;) <span class="comment">// 0+10+20+45+32 = 107</span></span><br><span class="line">sum = oldArray.<span class="built_in">reduce</span>(<span class="number">1</span>,&#123;$<span class="number">0</span> + $<span class="number">1</span>&#125;) <span class="comment">// 1+10+20+45+32 = 108</span></span><br><span class="line">sum = oldArray.<span class="built_in">reduce</span>(<span class="number">5</span>,&#123;$<span class="number">0</span> * $<span class="number">1</span>&#125;) <span class="comment">// 5*10*20*45*32 = 1440000</span></span><br><span class="line">sum = oldArray.<span class="built_in">reduce</span>(<span class="number">0</span>,+) <span class="comment">// 0+10+20+45+32 = 107</span></span><br><span class="line"><span class="built_in">println</span>(sum)</span><br></pre></td></tr></table></figure></p>
<h3 id="函数式和指令式的比较"><a href="#函数式和指令式的比较" class="headerlink" title="函数式和指令式的比较"></a>函数式和指令式的比较</h3><h2 id="响应式编程-Reactive"><a href="#响应式编程-Reactive" class="headerlink" title="响应式编程 - Reactive"></a>响应式编程 - Reactive</h2><p>在日常开发中，我们经常需要监听某个属性，并且针对该属性的变化做一些处理。比如以下几个场景：</p>
<ol>
<li>用户在输入邮箱的时候，监测输入的内容并在界面上提示是否符合邮箱规范。</li>
<li>用户在修改用户名之后，所有显示用户名的界面都要改为新的用户名。<br>外部输入信号的变化、事件的发生，这些都是典型的外部环境变化。根据外部环境的变化进行响应处理，直观上来讲像是一种自然地反应。我们可以将这种自动对变化作出响应的能力称为反应能力 (Reactive) 。</li>
</ol>
<p>那么什么是反应型编程呢？</p>
<pre><code>Reactive programming is programming with asynchronous data streams.
反应型编程是异步数据流的编程。
</code></pre><p>对于移动端来说，异步数据流的概念并不陌生，变量、点击事件、属性、缓存，这些就可以成为数据流。<br>我们可以通过一些简单的 ASCII 字符来演示如何将事件转换成数据流：<br>    –a—b-c—d—X—|–&gt;<br>    a, b, c, d 是具体的值，代表了某个事件<br>    X 表示发生了一个错误<br>    | 是这个流已经结束了的标记<br>    ———-&gt; 是时间轴<br>比如我们要统计用户点击鼠标的次数，那么可以这样：<br>clickStream:    —c—-c–c—-c——c–&gt;<br>                vvvvv map(c becomes 1) vvvv<br>                —1—-1–1—-1——1–&gt;<br>                vvvvvvvvv scan(+) vvvvvvvvv<br>counterStream:  —1—-2–3—-4——5–&gt;<br>反应型编程就是基于这些数据流的编程。而函数式编程则相当于提供了一个工具箱，可以方便的对数据流进行合并、创建和过滤等操作。</p>
<h2 id="swift-函数式编程"><a href="#swift-函数式编程" class="headerlink" title="swift 函数式编程"></a>swift 函数式编程</h2><p>Swift 是苹果公司在 2014 年推出的编程语言，用于编写 iOS 和 OS X 应用程序。它吸收了很多其它语言的语法特性，例如闭包、元组、泛型、结构体等等，这使得它的语法简洁而灵活。<br>Swift 本身并不是一门函数式语言，不过有一些函数式的方法和特性</p>
<ol>
<li>map reduce 等函数式函数</li>
<li>函数是一等公民</li>
<li>模式匹配<br>我们并不能因为 Swift 中的一些函数式特性就把它归为函数式语言，但是我们可以利用这些特性进行函数式 Style 的编程。</li>
</ol>
<h1 id="RxSwift-响应式编程"><a href="#RxSwift-响应式编程" class="headerlink" title="RxSwift 响应式编程"></a>RxSwift 响应式编程</h1><p><a href="https://github.com/ReactiveX/RxSwift/tree/master/Rx.playground" target="_blank" rel="noopener">Rx.playground</a></p>
<h2 id="Observable观察者模式"><a href="#Observable观察者模式" class="headerlink" title="Observable观察者模式"></a>Observable观察者模式</h2><p>Rx 的基础：<code>Observable</code> ， <code>Observable&lt;Element&gt;</code> 是观察者模式中可观察的对象，相当于一个事件序列 (GeneratorType)。<br>支持订阅的事件序列，在下文简称为<code>订阅源</code>或<code>可观察者</code>。<br>订阅源的事件队列中包括三种事件类型：</p>
<ol>
<li><code>.Next(value)</code>: 表示新的事件数据。</li>
<li><code>.Completed</code>: 表示事件序列的完结。</li>
<li><code>.Error</code>: 同样表示完结，但是代表异常导致的完结。</li>
</ol>
<h3 id="新建订阅源几种快捷方法"><a href="#新建订阅源几种快捷方法" class="headerlink" title="新建订阅源几种快捷方法"></a>新建订阅源几种快捷方法</h3><ol>
<li><code>empty</code>是一个空的序列，它只发送 <code>.Completed</code> 消息。<figure class="highlight swift"><figcaption><span>Observable+Creation.swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">empty</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">E</span>&gt;</span><br><span class="line">example(<span class="string">"empty"</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> emptySequence: <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt; = empty()</span><br><span class="line">    <span class="keyword">let</span> subscription = emptySequence.subscribe &#123; event <span class="keyword">in</span></span><br><span class="line">                                                <span class="built_in">print</span>(event)</span><br><span class="line">                                            &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- empty example ---</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></li>
<li><code>never</code> 是没有任何元素、也不会发送任何事件的空序列。<figure class="highlight swift"><figcaption><span>Observable+Creation.swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">- returns: An observable sequence whose observers will never get called.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">never</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">E</span>&gt;</span><br></pre></td></tr></table></figure></li>
<li><code>just</code> 是只包含一个元素的序列，它会先发送 <code>.Next(value)</code> ，然后发送 <code>.Completed</code><figure class="highlight swift"><figcaption><span>Observable+Creation.swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Returns an observable sequence that contains a single element.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">just</span><span class="params">(<span class="number">_</span> element: E)</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">E</span>&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">Just</span>(element: element)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>sequenceOf</code> 可以把一系列元素转换成订阅源<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sequenceOfElements<span class="comment">/* : Observable&lt;Int&gt; */</span> = sequenceOf(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure></li>
<li><code>asObservable方法</code> 将遵守<code>ObservableType</code>协议的对象转为可观察者序列<figure class="highlight swift"><figcaption><span>ObservableType.swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">ObservableType</span> : <span class="title">ObservableConvertibleType</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//Default implementation of converting `ObservableType` to `Observable`.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">asObservable</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">E</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sequenceFromArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].asObservable()</span><br></pre></td></tr></table></figure></li>
<li><code>failWith</code>创建一个没有元素的序列，只会发送失败 (<code>.Error</code>) 事件。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> error = <span class="type">NSError</span>(domain: <span class="string">"Test"</span>, code: -<span class="number">1</span>, userInfo: <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">let</span> erroredSequence: <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt; = failWith(error)</span><br><span class="line"><span class="keyword">let</span> subscription = erroredSequence.subscribe &#123; event <span class="keyword">in</span> <span class="built_in">print</span>(event)&#125;</span><br><span class="line">--- failWith example ---</span><br><span class="line"><span class="type">Error</span>(<span class="type">Error</span> <span class="type">Domain</span>=<span class="type">Test</span> <span class="type">Code</span>=-<span class="number">1</span> <span class="string">"The operation couldn’t be completed. (Test error -1.)"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="create自定义订阅源"><a href="#create自定义订阅源" class="headerlink" title="create自定义订阅源"></a>create自定义订阅源</h3><p><code>create</code> 可以通过闭包创建序列，通过 <code>.on(e: Event)</code> 添加可观察者事件。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"create"</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> myJust = &#123; (singleElement: <span class="type">Int</span>) -&gt; <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt; <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> create &#123; observer <span class="keyword">in</span></span><br><span class="line">                observer.on(.<span class="type">Next</span>(singleElement))</span><br><span class="line">                observer.on(.<span class="type">Completed</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="type">NopDisposable</span>.instance</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> subscription = myJust(<span class="number">5</span>).subscribe &#123; event <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(event)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- create example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">5</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h3 id="deferred订阅源的懒加载"><a href="#deferred订阅源的懒加载" class="headerlink" title="deferred订阅源的懒加载"></a>deferred订阅源的懒加载</h3><p><code>deferred</code>表示当有有新增订阅者第一次订阅了该订阅源时，订阅源才会被创建，且每个订阅者订阅的对象都是内容相同而完全独立的序列。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"TestDeferred"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> value: <span class="type">String?</span> = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">var</span> subscription: <span class="type">Observable</span>&lt;<span class="type">String?</span>&gt; = deferred &#123;</span><br><span class="line">        <span class="keyword">return</span> just(value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// got value</span></span><br><span class="line">    value = <span class="string">"Hello!"</span></span><br><span class="line">    subscription.subscribe &#123; event <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(event)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="type">TestDeferred</span> example ---</span><br><span class="line"><span class="type">Next</span>(<span class="type">Optional</span>(<span class="string">"Hello!"</span>))</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h2 id="几种特殊类型的订阅源"><a href="#几种特殊类型的订阅源" class="headerlink" title="几种特殊类型的订阅源"></a>几种特殊类型的订阅源</h2><p><code>Subject</code> 可以看做是一种代理和桥梁。它既是订阅者又是订阅源，这意味着它既可以订阅其他 <code>Observable 对象</code>，同时又可以对它的订阅者们发送事件。</p>
<h3 id="PublishSubject-向所有订阅者发送事件队列"><a href="#PublishSubject-向所有订阅者发送事件队列" class="headerlink" title="PublishSubject 向所有订阅者发送事件队列"></a>PublishSubject 向所有订阅者发送事件队列</h3><p>当<code>PublishSubject</code>类型订阅源事件队列中<code>.on()</code>新增事件时，会触发所有订阅者，一起响应该事件。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"PublishSubject"</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    writeSequenceToConsole(<span class="string">"1"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"a"</span>))</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"b"</span>))</span><br><span class="line">    writeSequenceToConsole(<span class="string">"2"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"c"</span>))</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"d"</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="type">PublishSubject</span> example ---</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(a)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(d)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(d)</span><br></pre></td></tr></table></figure></p>
<h3 id="基于PublishSubject的几种补发式订阅源"><a href="#基于PublishSubject的几种补发式订阅源" class="headerlink" title="基于PublishSubject的几种补发式订阅源"></a>基于PublishSubject的几种补发式订阅源</h3><p>以下几种类型的订阅源，相较第一种仅多了补发历史事件，姑且称为<code>补发式订阅源</code>。</p>
<h4 id="ReplaySubject先向最新订阅者补发所有已发生的事件"><a href="#ReplaySubject先向最新订阅者补发所有已发生的事件" class="headerlink" title="ReplaySubject先向最新订阅者补发所有已发生的事件"></a>ReplaySubject先向最新订阅者补发所有已发生的事件</h4><p>当<code>ReplaySubject</code>类型的订阅源，新增订阅者时，该类型的订阅源会把之前已发送过的所有事件队列重新补发给这个最新订阅者。这样就迫使订阅者会对从历史的事件队列逐一响应。<br><code>bufferSize</code> 是缓冲区的大小，决定了补发队列的最大值。如果 <code>bufferSize</code> 是1，那么新的订阅者出现的时候就会补发上一个事件，如果是2，则补两个，以此类推。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"ReplaySubject"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> subject = <span class="type">ReplaySubject</span>&lt;<span class="type">String</span>&gt;.create(bufferSize: <span class="number">1</span>)</span><br><span class="line">    writeSequenceToConsole(<span class="string">"1"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"a"</span>))</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"b"</span>))</span><br><span class="line">    writeSequenceToConsole(<span class="string">"2"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"c"</span>))</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"d"</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="type">ReplaySubject</span> example ---</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(a)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(b) <span class="comment">// 补了一个 b</span></span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(d)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(d)</span><br></pre></td></tr></table></figure></p>
<h4 id="BehaviorSubject-先向最新订阅者补发最近一次历史事件"><a href="#BehaviorSubject-先向最新订阅者补发最近一次历史事件" class="headerlink" title="BehaviorSubject 先向最新订阅者补发最近一次历史事件"></a>BehaviorSubject 先向最新订阅者补发最近一次历史事件</h4><p><code>BehaviorSubject</code>类型的订阅源会向最新订阅者发送最近一次的历史事件队列，如果没有则发送一个默认值。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"BehaviorSubject"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> subject = <span class="type">BehaviorSubject</span>(value: <span class="string">"z"</span>)</span><br><span class="line">    writeSequenceToConsole(<span class="string">"1"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"a"</span>))</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"b"</span>))</span><br><span class="line">    writeSequenceToConsole(<span class="string">"2"</span>, sequence: subject)</span><br><span class="line">    subject.on(.<span class="type">Next</span>(<span class="string">"c"</span>))</span><br><span class="line">    subject.on(.<span class="type">Completed</span>)</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="type">BehaviorSubject</span> example ---</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(z)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(a)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Completed</span></span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Completed</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h4 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h4><p><code>Variable</code> 是基于 <code>BehaviorSubject</code> 的一层封装，它的优势是：不会被显式终结。<br>即：不会收到 <code>.Completed</code> 和 <code>.Error</code> 这类的终结事件，它会主动在析构的时候发送 <code>.Complete</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"Variable"</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> variable = <span class="type">Variable</span>(<span class="string">"z"</span>)</span><br><span class="line">    writeSequenceToConsole(<span class="string">"1"</span>, sequence: variable)</span><br><span class="line">    variable.value = <span class="string">"a"</span></span><br><span class="line">    variable.value = <span class="string">"b"</span></span><br><span class="line">    writeSequenceToConsole(<span class="string">"2"</span>, sequence: variable)</span><br><span class="line">    variable.value = <span class="string">"c"</span></span><br><span class="line">&#125;</span><br><span class="line">--- <span class="type">Variable</span> example ---</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(z)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(a)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(b)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Next</span>(<span class="built_in">c</span>)</span><br><span class="line"><span class="type">Subscription</span>: <span class="number">1</span>, event: <span class="type">Completed</span></span><br><span class="line"><span class="type">Subscription</span>: <span class="number">2</span>, event: <span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h2 id="支持订阅的嵌套函数"><a href="#支持订阅的嵌套函数" class="headerlink" title="支持订阅的嵌套函数"></a>支持订阅的嵌套函数</h2><h3 id="map-规则-遍历映射"><a href="#map-规则-遍历映射" class="headerlink" title="map{规则} 遍历映射"></a>map{规则} 遍历映射</h3><p>通过闭包中定义的规则将队列中的数据映射到新的队列中，支持订阅遍历事件。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;U&gt;<span class="params">(transform: <span class="params">(T)</span></span></span> -&gt; <span class="type">U</span>) -&gt; <span class="type">U</span>[]</span><br><span class="line"><span class="comment">//效果</span></span><br><span class="line">[ x1, x2, ... , xn].<span class="built_in">map</span>(f) -&gt; [f(x1), f(x2), ... , f(xn)]</span><br></pre></td></tr></table></figure><br><code>map</code>接受一个把 <code>T</code> 类型的转换成 <code>U</code> 类型的<code>transform</code>函数，最终返回的是 <code>U 类型的集合</code>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"map"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> originalSequence = sequenceOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    originalSequence.<span class="built_in">map</span>&#123; $<span class="number">0</span> * <span class="number">2</span> &#125;.subscribe&#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="built_in">map</span> example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">4</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">6</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h3 id="flatMap-嵌套式遍历映射"><a href="#flatMap-嵌套式遍历映射" class="headerlink" title="flatMap 嵌套式遍历映射"></a>flatMap 嵌套式遍历映射</h3><p>嵌套式遍历描述：在遍历当前队列的过程中，每次执行闭包时都会遍历另一个嵌套队列中的所有事件。<br>可以想象嵌套for 循环来理解。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"flatMap"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> sequenceInt = sequenceOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">let</span> sequenceString = sequenceOf(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"--"</span>)</span><br><span class="line">    sequenceInt.flatMap&#123; int <span class="keyword">in</span> sequenceString &#125;.subscribe&#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- flatMap example ---</span><br><span class="line"><span class="type">Next</span>(<span class="type">A</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span>)</span><br><span class="line"><span class="type">Next</span>(--)</span><br><span class="line"><span class="type">Next</span>(<span class="type">A</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span>)</span><br><span class="line"><span class="type">Next</span>(--)</span><br><span class="line"><span class="type">Next</span>(<span class="type">A</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span>)</span><br><span class="line"><span class="type">Next</span>(--)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h3 id="scan-initial-U-combine-U-T-gt-U-迭代映射"><a href="#scan-initial-U-combine-U-T-gt-U-迭代映射" class="headerlink" title="scan(initial:U,combine:(U, T) -&gt; U)迭代映射"></a>scan(initial:U,combine:(U, T) -&gt; U)迭代映射</h3><p>scan 有点像 reduce ，把<code>U</code>类型集合中的所有元素，以<code>initial</code>为初始值，按照<code>combine</code>规则，逐个迭代并返回一个U类型的对象。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"scan"</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> sequenceToSum = sequenceOf(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    sequenceToSum.scan(<span class="number">0</span>) &#123; acum, elem <span class="keyword">in</span> acum + elem &#125;</span><br><span class="line">    .subscribe &#123;</span><br><span class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- scan example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">0</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">3</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">6</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">10</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">15</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Filtering-支持订阅的过滤器"><a href="#Filtering-支持订阅的过滤器" class="headerlink" title="Filtering 支持订阅的过滤器"></a>Filtering 支持订阅的过滤器</h2><h3 id="filter-布尔语句-条件过滤法"><a href="#filter-布尔语句-条件过滤法" class="headerlink" title="filter{布尔语句} 条件过滤法"></a>filter{布尔语句} 条件过滤法</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"filter"</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> subscription = sequenceOf(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line">.<span class="built_in">filter</span> &#123; $<span class="number">0</span> % <span class="number">2</span> == <span class="number">0</span> &#125;.subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="built_in">filter</span> example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">0</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">4</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">6</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">8</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure>
<h3 id="distinctUntilChanged-去重过滤法（相邻且不重复）"><a href="#distinctUntilChanged-去重过滤法（相邻且不重复）" class="headerlink" title="distinctUntilChanged() 去重过滤法（相邻且不重复）"></a>distinctUntilChanged() 去重过滤法（相邻且不重复）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"distinctUntilChanged"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> subscription = sequenceOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">    .distinctUntilChanged().subscribe&#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- distinctUntilChanged example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">3</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">4</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure>
<h3 id="take-int-掐尖过滤法"><a href="#take-int-掐尖过滤法" class="headerlink" title="take(int) 掐尖过滤法"></a>take(int) 掐尖过滤法</h3><p><code>take</code>只获取队列中前 n 个事件，在满足数量之后会自动 <code>.Completed</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"take"</span>) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> subscription = sequenceOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">.take(<span class="number">3</span>).subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">--- take example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">3</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Combining-订阅源聚合器"><a href="#Combining-订阅源聚合器" class="headerlink" title="Combining 订阅源聚合器"></a>Combining 订阅源聚合器</h2><p>订阅源聚合器将多个可观察者（订阅源）合并成一个可观察者（聚合订阅源），这样更便于订阅者同时监听多个订阅源。</p>
<h3 id="startWith-向可观察者队列中添加排头兵（新增的可观察者）"><a href="#startWith-向可观察者队列中添加排头兵（新增的可观察者）" class="headerlink" title="startWith 向可观察者队列中添加排头兵（新增的可观察者）"></a>startWith 向可观察者队列中添加排头兵（新增的可观察者）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> subscription = sequenceOf(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>).startWith(<span class="number">3</span>).subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>)&#125;</span><br><span class="line">--- startWith example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">3</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">4</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">5</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">6</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure>
<h3 id="combineLatest-合并聚合订阅源最后一次事件数据，生成一个聚合事件"><a href="#combineLatest-合并聚合订阅源最后一次事件数据，生成一个聚合事件" class="headerlink" title="combineLatest 合并聚合订阅源最后一次事件数据，生成一个聚合事件"></a>combineLatest 合并聚合订阅源最后一次事件数据，生成一个聚合事件</h3><p>便于订阅者监听聚合订阅源中每个订阅源的最后一次事件数据<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"combineLatest 1"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> intOb1 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> intOb2 = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    combineLatest(intOb1, intOb2) &#123;<span class="string">"\($0) \($1)"</span>&#125;.subscribe &#123;  <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">    intOb1.on(.<span class="type">Next</span>(<span class="string">"A"</span>))</span><br><span class="line">    intOb2.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    intOb1.on(.<span class="type">Next</span>(<span class="string">"B"</span>))</span><br><span class="line">    intOb2.on(.<span class="type">Next</span>(<span class="number">2</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- combineLatest <span class="number">1</span> example ---</span><br><span class="line"><span class="type">Next</span>(<span class="type">A</span> <span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span> <span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span> <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="zip-intOb1-intOb2-拉链式合并"><a href="#zip-intOb1-intOb2-拉链式合并" class="headerlink" title="zip(intOb1, intOb2) 拉链式合并"></a>zip(intOb1, intOb2) 拉链式合并</h3><p>仅在凑齐聚合源中所有订阅源的事件时，才会聚合一次，触发订阅者的响应。可以将多达8个订阅源<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"zip 1"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> intOb1 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> intOb2 = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    <span class="built_in">zip</span>(intOb1, intOb2) &#123; <span class="string">"\($0) \($1)"</span> &#125;.subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>)&#125;</span><br><span class="line">    intOb1.on(.<span class="type">Next</span>(<span class="string">"A"</span>))</span><br><span class="line">    intOb2.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    intOb1.on(.<span class="type">Next</span>(<span class="string">"B"</span>))</span><br><span class="line">    intOb1.on(.<span class="type">Next</span>(<span class="string">"C"</span>))</span><br><span class="line">    intOb2.on(.<span class="type">Next</span>(<span class="number">2</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- <span class="built_in">zip</span> <span class="number">1</span> example ---</span><br><span class="line"><span class="type">Next</span>(<span class="type">A</span> <span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="type">B</span> <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="merge-按可观察者的新的事件次序合并队列"><a href="#merge-按可观察者的新的事件次序合并队列" class="headerlink" title="merge() 按可观察者的新的事件次序合并队列"></a>merge() 按可观察者的新的事件次序合并队列</h3><p>订阅者会按次序来响应聚合订阅源的每一件事件<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"merge 1"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> subject1 = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> subject2 = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    sequenceOf(subject1, subject2).merge().subscribeNext &#123; int <span class="keyword">in</span> <span class="built_in">print</span>(int)&#125;</span><br><span class="line">    subject1.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    subject1.on(.<span class="type">Next</span>(<span class="number">2</span>))</span><br><span class="line">    subject2.on(.<span class="type">Next</span>(<span class="number">3</span>))</span><br><span class="line">    subject1.on(.<span class="type">Next</span>(<span class="number">4</span>))</span><br><span class="line">    subject2.on(.<span class="type">Next</span>(<span class="number">5</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- merge <span class="number">1</span> example ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure></p>
<h3 id="switchLatest订阅源切换器：用于嵌套式订阅源"><a href="#switchLatest订阅源切换器：用于嵌套式订阅源" class="headerlink" title="switchLatest订阅源切换器：用于嵌套式订阅源"></a>switchLatest订阅源切换器：用于嵌套式订阅源</h3><p>通过切换（var3.value）嵌套的订阅源，来切换订阅者当前监听的订阅源，以响应当前订阅源中的可观察者的事件。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"switchLatest"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> var1 = <span class="type">Variable</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> var2 = <span class="type">Variable</span>(<span class="number">200</span>)</span><br><span class="line">    <span class="comment">// var3 is like an Observable&lt;Observable&lt;Int&gt;&gt;</span></span><br><span class="line">    <span class="keyword">let</span> var3 = <span class="type">Variable</span>(var1)</span><br><span class="line">    <span class="keyword">let</span> d = var3.switchLatest().subscribe&#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">    var1.value = <span class="number">1</span></span><br><span class="line">    var1.value = <span class="number">2</span></span><br><span class="line">    var1.value = <span class="number">3</span></span><br><span class="line">    var1.value = <span class="number">4</span></span><br><span class="line">    var3.value = var2</span><br><span class="line">    var2.value = <span class="number">201</span></span><br><span class="line">    var1.value = <span class="number">5</span></span><br><span class="line">    var3.value = var1</span><br><span class="line">    var2.value = <span class="number">202</span></span><br><span class="line">    var1.value = <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line">--- switchLatest example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">0</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">3</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">4</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">200</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">201</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">5</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">6</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="订阅器"><a href="#订阅器" class="headerlink" title="订阅器"></a>订阅器</h2><ol>
<li>订阅器：<code>subscribe</code> 用来订阅可观察者的事件队列（即订阅源），并指定响应的相关操作</li>
<li>Next订阅器：<code>subscribeNext</code> 只订阅 <code>.Next</code> 事件</li>
<li>Completed订阅器：<code>subscribeCompleted</code> 只订阅<code>.Completed</code> 完成事件</li>
<li>Error订阅器：<code>subscribeError</code> 订阅 <code>.Error</code> 失败事件</li>
<li>订阅器观察者：<code>doOn</code> 在订阅器执行之前，获得执行代码的机会。可对比理解：<code>swift中的属性观察者</code></li>
</ol>
<h2 id="控制take掐尖过滤器"><a href="#控制take掐尖过滤器" class="headerlink" title="控制take掐尖过滤器"></a>控制take掐尖过滤器</h2><p>过滤器通过指定的事件和状态语句来判断是否停止take</p>
<h3 id="takeUntil-得到指定事件之后触发-Completed-事件"><a href="#takeUntil-得到指定事件之后触发-Completed-事件" class="headerlink" title="takeUntil 得到指定事件之后触发 .Completed 事件"></a>takeUntil 得到指定事件之后触发 .Completed 事件</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"takeUntil"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> originalSequence = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> whenThisSendsNextWorldStops = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    originalSequence.takeUntil(whenThisSendsNextWorldStops)</span><br><span class="line">    .subscribe &#123;</span><br><span class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    originalSequence.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    originalSequence.on(.<span class="type">Next</span>(<span class="number">2</span>))</span><br><span class="line">    whenThisSendsNextWorldStops.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    originalSequence.on(.<span class="type">Next</span>(<span class="number">3</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- takeUntil example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Next</span>(<span class="number">2</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure>
<h3 id="takeWhile-判断语句"><a href="#takeWhile-判断语句" class="headerlink" title="takeWhile 判断语句"></a>takeWhile 判断语句</h3><p>takeWhile 则是可以通过状态语句判断是否继续 take 。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">example(<span class="string">"takeWhile"</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> sequence = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">    sequence.takeWhile &#123; int <span class="keyword">in</span> int &lt; <span class="number">2</span> &#125;.subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">    sequence.on(.<span class="type">Next</span>(<span class="number">1</span>))</span><br><span class="line">    sequence.on(.<span class="type">Next</span>(<span class="number">2</span>))</span><br><span class="line">    sequence.on(.<span class="type">Next</span>(<span class="number">3</span>))</span><br><span class="line">&#125;</span><br><span class="line">--- takeWhile example ---</span><br><span class="line"><span class="type">Next</span>(<span class="number">1</span>)</span><br><span class="line"><span class="type">Completed</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/03/02/swift/互动性的教学工具XCPlayground/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/02/swift/互动性的教学工具XCPlayground/" class="post-title-link" itemprop="url">互动性的教学工具XCPlayground</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-03-01 17:27:16" itemprop="dateCreated datePublished" datetime="2017-03-01T17:27:16Z">2017-03-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:14" itemprop="dateModified" datetime="2019-01-16T21:01:14Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/" itemprop="url" rel="index"><span itemprop="name">swift</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/playground/" itemprop="url" rel="index"><span itemprop="name">playground</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/03/02/swift/互动性的教学工具XCPlayground/" class="leancloud_visitors" data-flag-title="互动性的教学工具XCPlayground">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">6.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>Playground 展示语法和实时执行真实数据的特性，为编写方法和库接口提供了很好的机会，通过实时编译我们能了解语法、写出例子以及获得方法如何使用的说明，所有这些就如一个活的文档展示在眼前。</p>
<ol>
<li>演习框架API，了解框架结构<br><a href="https://github.com/objcio/PersonalSwiftPlaygrounds" target="_blank" rel="noopener">SceneKitMac.playground</a><br>是一个功能完备带动画的 3D 场景。你需要打开 Assistant Editor (在菜单上依次点击 View | Assistant Editor | Show Assistant Editor)，3D 效果和动画将会被自动渲染。这不需要编译循环，而且任何的改动，比如改变颜色、几何形状、亮度等，都能实时反映出来。使用它能在一个交互例子中很好的记录和介绍如何使用SceneKit框架。</li>
<li>测试驱动开发<br>我们可以验证一个方法的执行是否正确，甚至在加载到 playground 的时候就能判断方法是否被正确解析。不难想象我们也可以在 playground 里添加断言，以及创建真正的单元测试。或者更进一步，创建出符合条件的测试，从而在你打字时就实现测试驱动开发。</li>
</ol>
<h2 id="Sources"><a href="#Sources" class="headerlink" title="Sources"></a>Sources</h2><p>打开 Project Navigator (⌘1) 并展开 Playground 文件，你就能看到”Sources”路径。<br>放到此目录下的源文件会被编译成模块(module)并自动导入到 Playground 中，并且这个编译只会进行一次(或者我们对该目录下的文件进行修改的时候)，而非每次你敲入一个字母的时候就编译一次。 这将会大大提高代码执行的效率。</p>
<blockquote>
<p>注意：由于此目录下的文件都是被编译成模块导入的，只有被设置成 public 的类型，属性或方法才能在 Playground 中使用。</p>
</blockquote>
<h2 id="导入Frameworks"><a href="#导入Frameworks" class="headerlink" title="导入Frameworks"></a>导入Frameworks</h2><p>如果想要导入外部 framework，创建一个 Xcode Workspace 包含了 framework 项目和你的 Playground。在 Build 之后，就可以通过常规的import命令导入对应的包。</p>
<h3 id="手动配置cocoa-touch-Framework来桥接playground"><a href="#手动配置cocoa-touch-Framework来桥接playground" class="headerlink" title="手动配置cocoa touch Framework来桥接playground"></a>手动配置cocoa touch Framework来桥接playground</h3><p>在Playgroud中使用个人项目中的类相关方法，需要借助于Custom Frameworks桥接<br>注：.swift的文件中的方法必须是public修饰。<br>参考文档：<code>Playground help -&gt; Importing Custom Frameworks into a Playground</code></p>
<ol>
<li>导入个人项目文件，需要借助<code>cocoa touch Framework</code>桥接<code>playground</code></li>
<li>需要<code>workspace</code>来管理<code>Framework</code>项目和<code>playground</code>文件，典型例子：pod项目都是用workspace来管理多个项目。</li>
<li>把个人项目的<code>swift文件</code>关联到<code>Cocoa touch Framework</code>项目的<code>target</code>中：<br> 详细设置：选中target -&gt; build phases -&gt; compiles sources -&gt;点击 + 加号，选中原项目中的swift</li>
<li>在<code>build</code>选项中选中Framework的scheme进行编译 ,要保证framework的target配置：<code>build setting -&gt; build active architecture Only -&gt;debug</code>选项设置为<code>YES</code></li>
<li>打开playground文件 import Framework名称，此时即可使用Framework中的提供的public API方法了。<br>Workspace相关设置，build生成的目录：xcode偏好设置要和项目中的workspace中设置要保持一致.</li>
<li>xcode的偏好设置中 -&gt;Locations -&gt; Locations -&gt;点击打开 Advanced…在弹出框中设置Unique选项.</li>
<li>在workspace中选中菜单 File -&gt; workspace settings… -&gt; 在弹出框中设置为Unique选项.</li>
</ol>
<h3 id="导入cocopads管理的依赖库"><a href="#导入cocopads管理的依赖库" class="headerlink" title="导入cocopads管理的依赖库"></a>导入cocopads管理的依赖库</h3><p>xcode7.3.1和cocoapods1.0版本导致playground无法import相关动态库<br>解决办法：<a href="http://stackoverflow.com/questions/38216238/xcode-playground-with-cocoapods#" target="_blank" rel="noopener">http://stackoverflow.com/questions/38216238/xcode-playground-with-cocoapods#</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在写入磁盘之前，修改一些工程的配置:</span></span><br><span class="line">post_install <span class="keyword">do</span> |installer|</span><br><span class="line">    installer.pods_project.targets.each <span class="keyword">do</span> |target|</span><br><span class="line">        <span class="keyword">if</span> target.name != <span class="string">'CocoaAsyncSocket'</span></span><br><span class="line">            <span class="comment">#playground相关配置，会导致'GCDAsyncSocket.h' file not found</span></span><br><span class="line">            target.build_configurations.each <span class="keyword">do</span> |config|</span><br><span class="line">                config.build_settings[<span class="string">'CONFIGURATION_BUILD_DIR'</span>] = <span class="string">'$PODS_CONFIGURATION_BUILD_DIR'</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">#Use Legacy Swift Language Version” (SWIFT_VERSION):</span></span><br><span class="line">                <span class="comment">#   https://github.com/CocoaPods/CocoaPods/issues/5864#issuecomment-247109685</span></span><br><span class="line">                puts <span class="string">"SWIFT_VERSIION:"</span></span><br><span class="line">                config.build_settings[<span class="string">'SWIFT_VERSION'</span>] = <span class="string">"3.0.1"</span></span><br><span class="line">                puts config.build_settings[<span class="string">'SWIFT_VERSION'</span>]</span><br><span class="line">            end</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">#输出操作</span></span><br><span class="line">            puts <span class="string">"以下不能在playground中使用的库名："</span></span><br><span class="line">            puts target.name</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<h2 id="Playground沙盒Resources"><a href="#Playground沙盒Resources" class="headerlink" title="Playground沙盒Resources"></a>Playground沙盒Resources</h2><p>Playgrounds 有两个与相关的Resources关联起来：一个是每一个独立的 playground 本地的，另一个则是 playground 之间共享的。在你的实验过程中，Playgrounds 能够支持 XML，JSON 数据，XIB，和图像文件。这也增加了其使用可用性。</p>
<h2 id="本地-bundle访问本地资源"><a href="#本地-bundle访问本地资源" class="headerlink" title="本地 bundle访问本地资源"></a>本地 bundle访问本地资源</h2><p>Resources 文件夹, 与 Sources 文件夹一样在 Playground 的包路径中, 通过 Project Navigator 就可见了——只需要简单的拖拽图像和数据文件，就可以在 Playground 中使用了。对应的内容在 main bundle 中也是可见的。比如，我们可以像这样非常快捷的加载一个包含天气数据的 JSON 文件：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonPath = <span class="type">NSBundle</span>.mainBundle().bundlePath.stringByAppendingPathComponent(<span class="string">"weather.json"</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span></span><br><span class="line">jsonData = <span class="type">NSData</span>(contentsOfFile: jsonPath),</span><br><span class="line">json = <span class="type">NSJSONSerialization</span>.<span class="type">JSONObjectWithData</span>(jsonData, options: <span class="literal">nil</span>, error: <span class="literal">nil</span>) <span class="keyword">as</span>? [<span class="type">String</span>: <span class="type">AnyObject</span>] </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="共享-访问Documents共享目录"><a href="#共享-访问Documents共享目录" class="headerlink" title="共享 访问Documents共享目录"></a>共享 访问Documents共享目录</h2><p>“共享 Playground 数据”的内容在你的”Documents”文件夹路径下，也同样对于你创建的任何 Playground 都可见。我们通过XCPSharedDataDirectoryPath常量来访问该共享文件夹。</p>
<p>如果你自习想尝试，需要在 “~/Documents/Shared Playground Data” 下简历一个文件夹。 这里我们尝试载入一个名字叫做 “image.png” 的图片文件:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sharedImagePath = <span class="type">XCPSharedDataDirectoryPath</span>.stringByAppendingPathComponent(<span class="string">"image.png"</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">UIImage</span>(contentsOfFile: sharedImagePath) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PlaygroundSupport"><a href="#PlaygroundSupport" class="headerlink" title="PlaygroundSupport"></a>PlaygroundSupport</h2><h3 id="liveView视图代理"><a href="#liveView视图代理" class="headerlink" title="liveView视图代理"></a>liveView视图代理</h3><p>实现在playground中实现UI显示及交互操作<br>liveView定义：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> liveView: <span class="type">XCPlaygroundLiveViewable?</span></span><br></pre></td></tr></table></figure><br>遵循了<code>XCPlaygroundLiveViewable</code>协议即可在playground中可视化显示：</p>
<ol>
<li>在iOS 和 tvOS中<code>UIView</code> and <code>UIViewController</code>遵循该协议</li>
<li>在OS X中<code>NSView</code> and <code>NSViewController</code>遵循该协议</li>
<li>用户自定类型，须遵守XCPlaygroundLiveViewable协议<br>总之，只要遵守改协议并实现代理方法，都可以在playground中可视化显示。<br>用法：<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PlaygroundPage</span>.current.liveView = <span class="type">UIView</span>()／<span class="type">NSViewController</span>()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="捕获值（XCPCaptureValue在XCPlayground中过时）"><a href="#捕获值（XCPCaptureValue在XCPlayground中过时）" class="headerlink" title="捕获值（XCPCaptureValue在XCPlayground中过时）"></a>捕获值（XCPCaptureValue在XCPlayground中过时）</h3><p><a href="http://swifter.tips/playground-capture/" target="_blank" rel="noopener">冒泡排序可视化预览</a><br><figure class="highlight swift"><figcaption><span>XCPlayground Module</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// This function has been deprecated.</span></span><br><span class="line"><span class="meta">@available</span>(*, deprecated)</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">XCPCaptureValue</span>&lt;T&gt;<span class="params">(identifier: String, value: T)</span></span></span><br></pre></td></tr></table></figure></p>
<p>简介：可以多次调用该方法来做图，相同的 identifier 的数据将会出现在同一张图上，而 value 将根据输入的次序进行排列,将一组数据轻而易举地绘制到时间轴上，从而让我们能看到每一步的结果。这不仅对我们直观且及时地了解算法内部的变化很有帮助，也会是教学或者演示时候的神兵利器。</p>
<ol>
<li>使用：导入框架<code>import XCPlayground</code></li>
<li>扩展：XCPCaptureValue 的数据输入是任意类型的，所以不论是传什么进去都是可以表示的。它们将以 QuickLook 预览的方式被表现出来，一些像 UIImage，UIColor 或者 UIBezierPath 这样的类型已经实现了 QuickLook。当然对于那些没有实现快速预览的 NSObject 子类，也可以通过重写</li>
</ol>
<p>一个 Playground 通常立即显示简单表达式的结果。数组，字符串，数字等等，会在结果面板把计算后的结果显示出来。那么，随着时间改变的值是如何处理的呢？</p>
<p>通过使用 XCPCaptureValue() 函数，我们可以随着一系列的迭代建立一个变动值的图。回到我们上面提到的天气例子，让我们来看看按小时计的温度数据，使用 XCPCaptureValue 来在辅助编辑界面以时间线的方式显示 温度的值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> XCPlayground</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> forecast <span class="keyword">in</span> forecasts </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> tempString = forecast[<span class="string">"temp"</span>]?[<span class="string">"english"</span>] <span class="keyword">as</span>? <span class="type">String</span>, temperature = tempString.toInt()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">XCPCaptureValue</span>(<span class="string">"Temperature"</span>, temperature)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另一种可选的方式是, 选择 Editor → Show Result For Current Line 就会捕获当前线的数值并且直接以图表的形势显示在 Playground 流中：</p>
<h3 id="异步执行（Asynchronous-Execution）"><a href="#异步执行（Asynchronous-Execution）" class="headerlink" title="异步执行（Asynchronous Execution）"></a>异步执行（Asynchronous Execution）</h3><p>不同于大部分 Swift 代码，是作为框架或者应用的一部分，Playgrounds 被当做是 高级代码。Playground 中的高级代码是按照指令接着指令的顺序从上到下执行的。<br>这种无容器风格的代码执行提供了立即反馈，但是存在着一个问题：在执行到了 Playground 底部后，会立即停止。网络请求，计时器，以及长时间运行的后台队列都会在提供反馈成功或者失败之前被立即终止。<br><code>PlaygroundSupport</code> 模块包含一个能够延长该过程的函数：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> needsIndefiniteExecution: <span class="type">Bool</span></span><br></pre></td></tr></table></figure></p>
<ol>
<li>开启异步：默认值为<code>false</code>,当使用liveView代理时，会自动设置为<code>true</code>。当为<code>true</code>时，在高级代码执行完成后，会告诉Xcode继续运行Playground页面。为<code>false</code>时，当代码执行完直接终止。</li>
<li>手动终止：还可以使用<code>PlaygroundPage.finishExecution()</code>手动终止正在运行的Playground。</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PlaygroundSupport</span><br><span class="line"></span><br><span class="line"><span class="type">PlaygroundPage</span>.current.needsIndefiniteExecution = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url = <span class="type">NSURL</span>(string: <span class="string">"http://httpbin.org/image/png"</span>)!</span><br><span class="line"><span class="keyword">let</span> task = <span class="type">NSURLSession</span>.sharedSession().dataTaskWithURL(url) &#123;</span><br><span class="line">    data, <span class="number">_</span>, <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIImage</span>(data: data)</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">//手动终止</span></span><br><span class="line">        <span class="type">PlaygroundPage</span>.current.currentPage.finishExecution()</span><br><span class="line">&#125;</span><br><span class="line">task.resume()</span><br></pre></td></tr></table></figure>
<h2 id="支持Markdown格式的文档"><a href="#支持Markdown格式的文档" class="headerlink" title="支持Markdown格式的文档"></a>支持Markdown格式的文档</h2><p><a href="https://developer.apple.com/library/content/documentation/Xcode/Reference/xcode_markup_formatting_ref/" target="_blank" rel="noopener">官方文档</a><br>除了实验用途，Playgrounds 在展示 Swift 语言的工具和框架中也一样强大。特别文档部分可以作为丰富格式的方式展示出来，以提供对于代码的清晰解释从而展示某个技术或者正确使用某个 Library 的方式。</p>
<p>不同于<a href="http://nshipster.cn/swift-documentation/" target="_blank" rel="noopener">Swift代码中的注释文档语法</a>, <code>Swift Playgrounds</code> 使用 <code>Markdown</code> 来显示多格式的文档。<br>例如：<br><code>//:</code>：可以指定单行文本说明<br><code>/*: Markdown格式内容... */</code>：可以用<code>Markdown</code>格式来显示丰富的文档内容</p>
<p><code>xcode</code>切换备注以<code>Markdown</code>格式显示：</p>
<ol>
<li>选择<code>Editor → Show Rendered Markup</code> 菜单</li>
<li>在 <code>File Inspector (⌘⌥1)</code> 选中 <code>Render Documentation</code> 复选框。<blockquote>
<p>在xcode8中打开之前版本时，菜单上的<code>Show Rendered Markup</code>会显示为<code>Upgrade playgound...</code>升级菜单项，这样就需要先点击升级菜单项之后，才能激活上述（1）（2）设置项。</p>
</blockquote>
</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: This line will have **bold** and *italic* text.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*:</span></span><br><span class="line"><span class="comment">## Headers of All Sizes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Lists of Links</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- [NSHipster](http://nshipster.com)</span></span><br><span class="line"><span class="comment">- [ASCIIwwdc](http://asciiwwdc.com)</span></span><br><span class="line"><span class="comment">- [SwiftDoc](http://swiftdoc.org)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Images, Too</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">![Remote Image](http://nshipster.s3.amazonaws.com/alert.gif)</span></span><br><span class="line"><span class="comment">![Local Image](bomb.gif) </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*Images in the Resources directory can be referenced locally*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Playgrounds 提供了一个我们关于分享和学习 OS X 和 iOS 相关工具的方式的重大改变。Playground 可以展示每一个特性，并且为将来的用户探索和发现你创建的库提供了空间。丢掉你的静态README.md， 换成可互动的README.playground吧，再玩起来！</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/02/28/macOS/使用Cocoapods创建私有podspec/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/02/28/macOS/使用Cocoapods创建私有podspec/" class="post-title-link" itemprop="url">使用Cocoapods创建私有podspec</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-02-28 15:46:16" itemprop="dateCreated datePublished" datetime="2017-02-28T15:46:16Z">2017-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:14" itemprop="dateModified" datetime="2019-01-16T21:01:14Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/02/28/macOS/使用Cocoapods创建私有podspec/" class="leancloud_visitors" data-flag-title="使用Cocoapods创建私有podspec">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">8.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="创建一个版本库来托管pod索引-pod-repo-add命令"><a href="#创建一个版本库来托管pod索引-pod-repo-add命令" class="headerlink" title="创建一个版本库来托管pod索引:pod repo add命令"></a>创建一个版本库来托管pod索引:pod repo add命令</h2><p>第一步：在github登录个人账号，创建一个库作为pod索引托管库。也可根据具体情况可以选择：<code>github</code>、<code>CODING</code>、<code>开源中国</code>、<code>Bitbucket</code>以及<code>CSDN</code>等，代码托管平台。<br>当索引库托管在github私有的仓库时，如果有其他同事共同开发维护，则需要配置Git仓库的权限。<br>第二步：pod化版本库，使其专门用户管理个人的<code>*podspec</code>索引文件<br><figure class="highlight ruby"><figcaption><span>repo add命令</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pod repo add [Private Repo Name] [GitHub HTTPS clone URL]</span></span><br><span class="line">$ pod repo add PodRepo <span class="symbol">https:</span>/<span class="regexp">/github.com/huos</span>3203/PodRepo.git</span><br><span class="line"><span class="comment">#输出：</span></span><br><span class="line">&gt; Cloning spec repo <span class="string">`PodRepo`</span> from <span class="string">`https://github.com/huos3203/PodRepo.git`</span></span><br></pre></td></tr></table></figure><br>此时在本地会生成<code>~/.cocoapods/repos/PodRepo</code>目录，这个目录就可以用来存储你所有的开源包。<br>每当一个或多个<code>*.podspec</code>文件测试无误时，就可以使用<code>pod repo push</code>命令向私有索引库中提交该文件。<br><figure class="highlight ruby"><figcaption><span>lib create命令</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pod repo push PodRepo LogSwift.podspec  <span class="comment">#PodRepo是本地Repo名字 后面是podspec名字</span></span><br></pre></td></tr></table></figure><br>完成之后这个组件库就添加到私有索引库中，自动生成的<code>pod 库</code>标准结构：</p>
<p>同时<code>push命令</code>会将新增的索引目录推送至自己的远程仓库中，即索引托管库<code>PodRepo.git</code>中。</p>
<p>下面详述<code>podspec文件</code>的配置，检测，使用的过程。</p>
<h2 id="使用模板命令创建Pod工程项目-lib-create"><a href="#使用模板命令创建Pod工程项目-lib-create" class="headerlink" title="使用模板命令创建Pod工程项目 lib create"></a>使用模板命令创建Pod工程项目 lib create</h2><p>初始化Pod模板项目：<br><figure class="highlight ruby"><figcaption><span>lib create命令</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib create LogSwift</span><br></pre></td></tr></table></figure><br>有以下五步命令行交互：<br><figure class="highlight ruby"><figcaption><span>交互</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">What is your email?</span><br><span class="line">&gt; </span><br><span class="line">What language <span class="keyword">do</span> you want to use?? [ Swift / ObjC ]</span><br><span class="line">&gt;Swift</span><br><span class="line">Would you like to <span class="keyword">include</span> a demo application with your library? [ Yes / No ]</span><br><span class="line">&gt;Yes</span><br><span class="line">Which testing frameworks will you use? [ Quick / None ]</span><br><span class="line">&gt;Quick</span><br><span class="line">Would you like to <span class="keyword">do</span> view based testing? [ Yes / No ]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><br>会自动执行<code>pod install</code>命令创建项目并生成依赖。</p>
<h3 id="添加库文件和资源"><a href="#添加库文件和资源" class="headerlink" title="添加库文件和资源"></a>添加库文件和资源</h3><p>例如：把一个网络模块的共有组件放入<code>Pod/Classes</code>中，然后进入<code>Example</code>文件夹执行<code>pod update</code>命令，再打开项目工程可以看到，刚刚添加的组件已经在<code>Pods</code>子工程下<code>Development Pods/PodTestLibrary</code>中了，然后编辑demo工程，测试组件。<br>测试无误后需要将该项目添加并推送到远端仓库，并编辑podspec文件。</p>
<h3 id="配置podspec文件及验证命令lib-lint"><a href="#配置podspec文件及验证命令lib-lint" class="headerlink" title="配置podspec文件及验证命令lib lint"></a>配置podspec文件及验证命令lib lint</h3><h4 id="打tag号作为podspec版本号"><a href="#打tag号作为podspec版本号" class="headerlink" title="打tag号作为podspec版本号"></a>打tag号作为podspec版本号</h4><p>因为<code>podspec文件</code>中获取<code>Git版本控制</code>的项目还需要<code>tag号</code>，所以我们要打上一个<code>tag</code><br><figure class="highlight ruby"><figcaption><span>打标签</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -m <span class="string">"first release"</span> <span class="number">0</span>.<span class="number">1.0</span></span><br><span class="line">$ git push --tags     <span class="comment">#推送tag到远端仓库</span></span><br></pre></td></tr></table></figure></p>
<h4 id="编辑podspec文件"><a href="#编辑podspec文件" class="headerlink" title="编辑podspec文件"></a>编辑podspec文件</h4><p><code>podspec文件</code>是一个Ruby格式：<br><figure class="highlight ruby"><figcaption><span>podspec文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></span><br><span class="line">s.name             = <span class="string">"PodTestLibrary"</span>    <span class="comment">#名称</span></span><br><span class="line">s.version          = <span class="string">"0.1.0"</span>             <span class="comment">#版本号</span></span><br><span class="line">s.summary          = <span class="string">"Just Testing."</span>     <span class="comment">#简短介绍，下面是详细介绍</span></span><br><span class="line">s.description      = <span class="string">&lt;&lt;-DESC</span></span><br><span class="line"><span class="string">Testing Private Podspec.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">* Markdown format.</span></span><br><span class="line"><span class="string">* Don't worry about the indent, we strip it!</span></span><br><span class="line"><span class="string">DESC</span></span><br><span class="line">s.homepage         = <span class="string">"https://coding.net/u/boyers/p/podTestLibrary"</span>                           <span class="comment">#主页,这里要填写可以访问到的地址，不然验证不通过</span></span><br><span class="line"><span class="comment"># s.screenshots     = "www.example.com/screenshots_1", "www.example.com/screenshots_2"           #截图</span></span><br><span class="line">s.license          = <span class="string">'MIT'</span>              <span class="comment">#开源协议</span></span><br><span class="line">s.author           = &#123; <span class="string">"boyers"</span> =&gt; <span class="string">"boyers@foxmail.com"</span> &#125;  <span class="comment">#作者信息</span></span><br><span class="line">s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">"https://coding.net/boyers/podTestLibrary.git"</span>, <span class="symbol">:tag</span> =&gt; <span class="string">"0.1.0"</span> &#125;      <span class="comment">#项目地址，这里不支持ssh的地址，验证不通过，只支持HTTP和HTTPS，最好使用HTTPS</span></span><br><span class="line"><span class="comment"># s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;'                       #多媒体介绍地址</span></span><br><span class="line"></span><br><span class="line">s.platform     = <span class="symbol">:ios</span>, <span class="string">'7.0'</span>            <span class="comment">#支持的平台及版本</span></span><br><span class="line">s.requires_arc = <span class="literal">true</span>                   <span class="comment">#是否使用ARC，如果指定具体文件，则具体的问题使用ARC</span></span><br><span class="line"></span><br><span class="line">s.source_files = <span class="string">'Pod/Classes/**/*'</span>     <span class="comment">#代码源文件地址，**/*表示Classes目录及其子目录下所有文件，如果有多个目录下则用逗号分开，如果需要在项目中分组显示，这里也要做相应的设置</span></span><br><span class="line">s.resource_bundles = &#123;</span><br><span class="line"><span class="string">'PodTestLibrary'</span> =&gt; [<span class="string">'Pod/Assets/*.png'</span>]</span><br><span class="line">&#125;                                       <span class="comment">#资源文件地址</span></span><br><span class="line"></span><br><span class="line">s.public_header_files = <span class="string">'Pod/Classes/**/*.h'</span>   <span class="comment">#公开头文件地址</span></span><br><span class="line">s.frameworks = <span class="string">'UIKit'</span>                  <span class="comment">#所需的framework，多个用逗号隔开</span></span><br><span class="line">s.dependency <span class="string">'AFNetworking'</span>, <span class="string">'~&gt; 2.3'</span>   <span class="comment">#依赖关系，该项目所依赖的其他库，如果有多个需要填写多个s.dependency</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<h4 id="验证podspec文件可用性"><a href="#验证podspec文件可用性" class="headerlink" title="验证podspec文件可用性"></a>验证podspec文件可用性</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ pod lib lint</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">-&gt; PodTestLibrary (<span class="number">0</span>.<span class="number">1.0</span>)</span><br><span class="line">PodTestLibrary passed validation.</span><br></pre></td></tr></table></figure>
<p>说明验证通过了，不过这只是这个<code>podspec文件</code>是合格的，不一定说明这个Pod是可以用的，Pod需要在本地做一下验证。</p>
<h3 id="将源码托管到远程仓库"><a href="#将源码托管到远程仓库" class="headerlink" title="将源码托管到远程仓库"></a>将源码托管到远程仓库</h3><p>通过<code>Cocoapods</code>创建出来的目录本身就在本地的<code>Git</code>管理下，我们需要做的就是给它添加远端仓库，同样去<code>GitHub</code>或其他的Git服务提供商那里创建一个<code>私有的仓库</code>，拿到<code>SSH地址</code>，然后<code>cd</code>到<code>LogSwift</code>目录<br><figure class="highlight ruby"><figcaption><span>添加到远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -s -m <span class="string">"Initial Commit of Library"</span></span><br><span class="line">$ git remote add origin <span class="symbol">https:</span>/<span class="regexp">/coding.net/git</span><span class="regexp">/LogSwift.git   #添加远端仓库</span></span><br><span class="line"><span class="regexp">$ git push origin master        #提交到远端仓库</span></span><br></pre></td></tr></table></figure></p>
<h2 id="手动配置Pod私库项目支持：spec-create"><a href="#手动配置Pod私库项目支持：spec-create" class="headerlink" title="手动配置Pod私库项目支持：spec create"></a>手动配置Pod私库项目支持：spec create</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pod spec create LogSwift git@coding.<span class="symbol">net:</span>boyers/LogSwift.git</span><br></pre></td></tr></table></figure>
<p>执行完之后，就创建了一个<code>podspec文件</code>，他其中会包含很多内容，可以按照我之前介绍的进行编辑，没用的删掉。编辑完成之后使用验证命令<code>pod lib lint</code>验证一下。</p>
<h2 id="path-gt-在新项目配置检测podspec文件"><a href="#path-gt-在新项目配置检测podspec文件" class="headerlink" title=":path =&gt; 在新项目配置检测podspec文件"></a>:path =&gt; 在新项目配置检测podspec文件</h2><p>在这个项目的<code>Podfile</code>文件中直接指定刚才创建编辑好的<code>podspec文件</code>，看是否可用。</p>
<ol>
<li>指定本地依赖的两种方式:<figure class="highlight ruby"><figcaption><span>Podfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'7.0'</span></span><br><span class="line">pod <span class="string">'LogSwift'</span>, <span class="symbol">:path</span> =&gt; <span class="string">'~/code/Cocoapods/podTest/LogSwift'</span>      <span class="comment"># 指定路径</span></span><br><span class="line">pod <span class="string">'LogSwift'</span>, <span class="symbol">:podspec</span> =&gt; <span class="string">'~/code/Cocoapods/podTest/LogSwift/LogSwift.podspec'</span>  <span class="comment"># 指定podspec文件</span></span><br></pre></td></tr></table></figure></li>
<li>指定源码的远程仓库作为依赖<br>前提时索引文件中指定的tag版本的源码必须推送到远程仓库<figure class="highlight ruby"><figcaption><span>Podfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'7.0'</span></span><br><span class="line">pod <span class="string">'MusicLrc'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/huos3203/MusicLrcTest.git'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后执行<code>pod install</code>命令安装依赖，打开项目工程，可以看到<code>库文件</code>和<code>资源</code>都被加载到<code>Pods子项目</code>中了，不过它们并没有在<code>Pods目录</code>下，而是跟测试项目一样存在于<code>Development Pods/LogSwift</code>中，这是因为我们是在本地测试，而没有把<code>podspec文件</code>添加到<code>Spec Repo</code>中的缘故。</p>
<h2 id="万事具备，向私有索引库中提交podspec文件：repo-push"><a href="#万事具备，向私有索引库中提交podspec文件：repo-push" class="headerlink" title="万事具备，向私有索引库中提交podspec文件：repo push"></a>万事具备，向私有索引库中提交podspec文件：repo push</h2><p>每当一个或多个<code>*.podspec</code>文件测试无误时，就可以使用<code>pod repo push</code>命令向私有索引库中提交该文件。<br><figure class="highlight ruby"><figcaption><span>lib create命令</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pod repo push PodRepo LogSwift.podspec  <span class="comment">#PodRepo是本地Repo名字 后面是podspec名字</span></span><br></pre></td></tr></table></figure><br>完成之后这个组件库就添加到私有索引库中，自动生成的<code>pod 库</code>标准结构：</p>
<p>同时<code>push命令</code>会将新增的索引目录推送至自己的远程仓库中，即索引托管库<code>PodRepo.git</code>中。</p>
<h2 id="trunk-push-添加到Cocoapods的官方索引库"><a href="#trunk-push-添加到Cocoapods的官方索引库" class="headerlink" title="trunk push 添加到Cocoapods的官方索引库"></a>trunk push 添加到Cocoapods的官方索引库</h2><h3 id="注册trunk，邮箱验证"><a href="#注册trunk，邮箱验证" class="headerlink" title="注册trunk，邮箱验证"></a>注册trunk，邮箱验证</h3><p>在注册trunk之前，我们需要确认当前的CocoaPods版本是否足够新:<br>sudo gem install cocoapods<br>开始注册trunk：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk register boyer@163.com <span class="string">'boyers1250'</span>  --verbose</span><br></pre></td></tr></table></figure><br><code>-verbose</code>参数是为了便于输出注册过程中的调试信息。<br>执行上面的语句后，你的邮箱将会受到一封带有验证链接的邮件，如果没有请去垃圾箱找找，有可能被屏蔽了。点击邮件的链接就完成了trunk注册流程。<br>使用下面的命令可以向trunk服务器查询自己的注册信息：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk me</span><br></pre></td></tr></table></figure></p>
<h3 id="通过trunk推送podspec文件"><a href="#通过trunk推送podspec文件" class="headerlink" title="通过trunk推送podspec文件"></a>通过trunk推送podspec文件</h3><p>现在我们已经有了自己的podspec文件，但是在推送podspec文件之前你需要确认以下几点：</p>
<ol>
<li>确保你的源码已经push到Github上。</li>
<li>确保你所push的代码已经打上”version tag”版本号标签：<br>只有确保了以上两点，CocoaPods才能更准确地找到你的repo。<br>现在我们开始通过trunk上传你的podspec文件。先cd到podspec文件所在目录，执行：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk push WZLBadge.podspec</span><br></pre></td></tr></table></figure>
执行上面的push操作，就相当于你把你的源代码提交给CocoaPods团队审核了，CocoaPods审核只需要几秒钟或者几分钟就可以完成。</li>
</ol>
<h2 id="使用远程的私有Pod库"><a href="#使用远程的私有Pod库" class="headerlink" title="使用远程的私有Pod库"></a>使用远程的私有Pod库</h2><p>我们的这个组件库就已经制作添加完成了，现在可以<code>pod search</code>命令查到这个库，当使用时配置Podfile依赖文件即可。</p>
<ol>
<li>pod search 查找库<figure class="highlight ruby"><figcaption><span>查找库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ pod search PodTestLibrary</span><br><span class="line"></span><br><span class="line">-&gt; PodTestLibrary (<span class="number">0</span>.<span class="number">1.0</span>)</span><br><span class="line">Just Testing.</span><br><span class="line">pod <span class="string">'PodTestLibrary'</span>, <span class="string">'~&gt; 0.1.0'</span></span><br><span class="line">- <span class="symbol">Homepage:</span> <span class="symbol">https:</span>/<span class="regexp">/coding.net/u</span><span class="regexp">/boyers/p</span><span class="regexp">/podTestLibrary</span></span><br><span class="line"><span class="regexp">- Source:   https:/</span><span class="regexp">/coding.net/boyers</span><span class="regexp">/podTestLibrary.git</span></span><br><span class="line"><span class="regexp">- Versions: 0.1.0 [WTSpecs repo]</span></span><br></pre></td></tr></table></figure></li>
<li>在Podfile文件中配置库依赖<figure class="highlight ruby"><figcaption><span>配置库依赖</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'PodTestLibrary'</span>, <span class="string">'~&gt; 0.1.0'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="更新维护podspec文件配置，升级库版本"><a href="#更新维护podspec文件配置，升级库版本" class="headerlink" title="更新维护podspec文件配置，升级库版本"></a>更新维护podspec文件配置，升级库版本</h2><p><code>subspec</code>特性，可以在库原有基础上，添加更多的模块，相应创建了多个子目录。现在尝试添加包括<code>工具类</code>，底层<code>Model</code>及<code>UIKit</code>扩展等。</p>
<h3 id="添加模块库文件和资源"><a href="#添加模块库文件和资源" class="headerlink" title="添加模块库文件和资源"></a>添加模块库文件和资源</h3><p>具体做法是先将源文件添加到<code>Pod/Classes</code>中，然后按照不同的模块对文件目录进行整理，因为我有四个模块，所以在<code>Pod/Classes</code>下有创建了四个子目录</p>
<h3 id="打tag号作为podspec版本号-1"><a href="#打tag号作为podspec版本号-1" class="headerlink" title="打tag号作为podspec版本号"></a>打tag号作为podspec版本号</h3><p>因为<code>podspec文件</code>中获取<code>Git版本控制</code>的项目还需要<code>tag号</code>，所以我们要打上一个<code>tag</code><br><figure class="highlight ruby"><figcaption><span>打标签</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -m <span class="string">"first release"</span> <span class="number">0</span>.<span class="number">1.0</span></span><br><span class="line">$ git push --tags     <span class="comment">#推送tag到远端仓库</span></span><br></pre></td></tr></table></figure></p>
<h3 id="更新podspec配置文件"><a href="#更新podspec配置文件" class="headerlink" title="更新podspec配置文件"></a>更新podspec配置文件</h3><p>当创建了<code>subspec</code>，之前项目整体的依赖<code>dependency</code>:</p>
<ol>
<li>源文件:<code>source_files</code></li>
<li>头文件:<code>public_header_files</code></li>
<li>资源文件:<code>resource</code><br>都移动到了各自的<code>subspec</code>中，每个<code>subspec</code>之间也可以有相互的依赖关系，比如<code>UIKitAdditio</code>n就依赖于<code>CommonTools</code>。<figure class="highlight ruby"><figcaption><span>更新podspec配置文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></span><br><span class="line">s.name             = <span class="string">"PodTestLibrary"</span></span><br><span class="line">s.version          = <span class="string">"1.0.0"</span></span><br><span class="line">s.summary          = <span class="string">"Just Testing."</span></span><br><span class="line">s.description      = <span class="string">&lt;&lt;-DESC</span></span><br><span class="line"><span class="string">                         Testing Private Podspec.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        * Markdown format.</span></span><br><span class="line"><span class="string">                        * Don't worry about the indent, we strip it!</span></span><br><span class="line"><span class="string">                    DESC</span></span><br><span class="line">s.homepage         = <span class="string">"https://coding.net/u/boyers/p/podTestLibrary"</span></span><br><span class="line"><span class="comment"># s.screenshots     = "www.example.com/screenshots_1", "www.example.com/screenshots_2"</span></span><br><span class="line">s.license          = <span class="string">'MIT'</span></span><br><span class="line">s.author           = &#123; <span class="string">"boyers"</span> =&gt; <span class="string">"boyers@foxmail.com"</span> &#125;</span><br><span class="line">s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">"https://coding.net/boyers/podTestLibrary.git"</span>, <span class="symbol">:tag</span> =&gt; <span class="string">"1.0.0"</span> &#125;</span><br><span class="line"><span class="comment"># s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;'</span></span><br><span class="line"></span><br><span class="line">s.platform     = <span class="symbol">:ios</span>, <span class="string">'7.0'</span></span><br><span class="line">s.requires_arc = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#s.source_files = 'Pod/Classes/**/*'</span></span><br><span class="line"><span class="comment">#s.resource_bundles = &#123; 'PodTestLibrary' =&gt; ['Pod/Assets/*.png'] &#125;</span></span><br><span class="line"><span class="comment">#s.public_header_files = 'Pod/Classes/**/*.h'</span></span><br><span class="line"></span><br><span class="line">s.subspec <span class="string">'NetWorkEngine'</span> <span class="keyword">do</span> <span class="params">|networkEngine|</span></span><br><span class="line">    networkEngine.source_files = <span class="string">'Pod/Classes/NetworkEngine/**/*'</span></span><br><span class="line">    networkEngine.public_header_files = <span class="string">'Pod/Classes/NetworkEngine/**/*.h'</span></span><br><span class="line">    networkEngine.dependency <span class="string">'AFNetworking'</span>, <span class="string">'~&gt; 2.3'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s.subspec <span class="string">'DataModel'</span> <span class="keyword">do</span> <span class="params">|dataModel|</span></span><br><span class="line">    dataModel.source_files = <span class="string">'Pod/Classes/DataModel/**/*'</span></span><br><span class="line">    dataModel.public_header_files = <span class="string">'Pod/Classes/DataModel/**/*.h'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s.subspec <span class="string">'CommonTools'</span> <span class="keyword">do</span> <span class="params">|commonTools|</span></span><br><span class="line">    commonTools.source_files = <span class="string">'Pod/Classes/CommonTools/**/*'</span></span><br><span class="line">    commonTools.public_header_files = <span class="string">'Pod/Classes/CommonTools/**/*.h'</span></span><br><span class="line">    commonTools.dependency <span class="string">'OpenUDID'</span>, <span class="string">'~&gt; 1.0.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s.subspec <span class="string">'UIKitAddition'</span> <span class="keyword">do</span> <span class="params">|ui|</span></span><br><span class="line">    ui.source_files = <span class="string">'Pod/Classes/UIKitAddition/**/*'</span></span><br><span class="line">    ui.public_header_files = <span class="string">'Pod/Classes/UIKitAddition/**/*.h'</span></span><br><span class="line">    ui.resource = <span class="string">"Pod/Assets/MLSUIKitResource.bundle"</span></span><br><span class="line">    ui.dependency <span class="string">'PodTestLibrary/CommonTools'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s.frameworks = <span class="string">'UIKit'</span></span><br><span class="line">    <span class="comment">#s.dependency 'AFNetworking', '~&gt; 2.3'</span></span><br><span class="line">    <span class="comment">#s.dependency 'OpenUDID', '~&gt; 1.0.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
编辑完成之后，在测试项目里<code>pod update</code>一下，几个子项目都被加进项目工程了，写代码验证无误之后，就可以将这个工程push到远端仓库，并打上新的<code>tag-&gt;1.0.0</code>。<blockquote>
<p>但是如果你的代码版本号没变(podspec里的version自然也没变)就会提示push失败，即使你更改了podspec的其他地方，pod也会认为这两个文件是同一个。 我目前为止找不到trunk的相关update接口，所以只能顺水推舟，更新源代码版本号（如：1.1.1-&gt;1.1.2），重新push version tag，然后再执行pod trunk push操作。</p>
</blockquote>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/02/25/iOS/UI/UIStackView教程了解StackView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/02/25/iOS/UI/UIStackView教程了解StackView/" class="post-title-link" itemprop="url">UIStackView教程了解StackView</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-02-24 18:12:14" itemprop="dateCreated datePublished" datetime="2017-02-24T18:12:14Z">2017-02-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:13" itemprop="dateModified" datetime="2019-01-16T21:01:13Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/控件/" itemprop="url" rel="index"><span itemprop="name">控件</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/02/25/iOS/UI/UIStackView教程了解StackView/" class="leancloud_visitors" data-flag-title="UIStackView教程了解StackView">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="http://blog.csdn.net/kmyhy/article/details/50456444" target="_blank" rel="noopener">原地址</a></p>
<h2 id="UIStackView简单介绍"><a href="#UIStackView简单介绍" class="headerlink" title="UIStackView简单介绍"></a>UIStackView简单介绍</h2><p>一个Stack View能够将它所含的View以各种方式沿其轴向进行分布，同时也可以将View沿某个方向等距分布，要隐藏<code>Stack View</code>中的视图，你只需要设置该View的<code>Hidden</code>属性为<code>true</code>，剩下的工作Stack View会自己完成。。<br>坐标（Axis）、间隔（Spacing）、对齐（Alignment）以及分布（Distribution ）等。<br>distribution属性：决定Stack View如何沿它轴向的水平方向摆放它的subview，当属性值是Fill，这表示subview会沿轴向完全占据Stack View。因此，Stack View会拉伸其中一个subview使其填充剩余空间，尤其是水平内容优先级最低的那个，如果所有subview优先级相同，则拉伸第一个subview。<br>Alignment属性：决定了Stack View如何沿它轴向的垂直方向摆放它的subview，对于一个垂直的Stack View，这个属性可以设置为Fill、Leading、Center和Trailing。<br>对于水平的Stack View，这个属性则稍有不同：<br>.Top取代了.Leading，.Bottom取代了.Trailing。此外，水平Stack View还多出了两个属性值：.FirstBaseLine和.LastBaseLine。<br>对于水平的Stack View，这个属性则稍有不同：<br>Fill:<br>Leading:<br>Center:<br>Trailing:</p>
<p>布局方式对比</p>
<h3 id="添加一个新的Stack-View"><a href="#添加一个新的Stack-View" class="headerlink" title="添加一个新的Stack View"></a>添加一个新的Stack View</h3><p>点击故事板画布左下角<code>Auto Layout工具栏</code>中的<code>Stack按钮</code>：<br>另一种解散的方法是选中Stack View，然后点击<code>Editor\Emebed in\stack view</code>菜单。</p>
<h3 id="解散一个废弃的Stack-View"><a href="#解散一个废弃的Stack-View" class="headerlink" title="解散一个废弃的Stack View"></a>解散一个废弃的Stack View</h3><p>首先，选定想解散的Stack View。按下<code>Option键</code>，点击<code>Stack 按钮</code>。这将弹出一个上下文菜单，然后点击Unembed：<br>另一种解散的方法是选中Stack View，然后点击<code>Editor\Unemebed</code>菜单。</p>
<h2 id="使用场景描述"><a href="#使用场景描述" class="headerlink" title="使用场景描述"></a>使用场景描述</h2><p>当APP运行中增加或删除一个<code>view</code>时，需要重新调整邻近<code>view</code>的位置布局。<br>预见困境：</p>
<ol>
<li>在故事板中新建一些布局约束连接，以便能够安装或卸载其中的一些约束</li>
<li>使用第三方库来实现</li>
<li>根据任务复杂程度完全用代码实现<br>也许这个在视图附近的视图树中的所有View都不需要在运行时改变，但当你将新视图添加到故事板时，仍然要想方设法为它挤出空间来。</li>
</ol>
<p><code>UIStackView</code>提供了一个对多个视图进行水平或垂直布局的方法。通过对几个属性进行简单设置，比如对齐、分布和间距，可以让我们让其所包含的视图适应于其有效空间。</p>
<h2 id="实现需求"><a href="#实现需求" class="headerlink" title="实现需求"></a>实现需求</h2><p>存在着这几方面的问题:</p>
<h3 id="问题一：自适应横竖屏"><a href="#问题一：自适应横竖屏" class="headerlink" title="问题一：自适应横竖屏"></a>问题一：自适应横竖屏</h3><p>在横屏状态下（command+左箭头旋转为横屏），发现截图中的一排按钮位置无法适应屏幕宽度的变化。这时可以使用<code>UIStackView</code>来帮助实现自动适应横竖屏的效果。</p>
<h3 id="问题二：控件间留白不紧凑"><a href="#问题二：控件间留白不紧凑" class="headerlink" title="问题二：控件间留白不紧凑"></a>问题二：控件间留白不紧凑</h3><p>点击WEATHER旁边的Hide按钮。隐藏了下面的文本内容后，留下了一大块的空白区域。</p>
<h3 id="Storyboard引入界面"><a href="#Storyboard引入界面" class="headerlink" title="Storyboard引入界面"></a>Storyboard引入界面</h3><p>打开<code>Main.storyboard</code>，找到<code>Spot Info View Controller</code>这个Scene。将这些标签和按钮设为不同的背景色，是为了在运行时效果更直观。就是在故事板中，这也有助于看到<code>Stack View</code>属性的改变导致其内部视图的变化。<br>如果想在运行App时看见这些颜色，在<code>SpotInfoViewController</code>的<code>viewDidLoad()</code>方法中将下列语句注释：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清空标签和按钮的背景色</span></span><br><span class="line"><span class="keyword">for</span> view <span class="keyword">in</span> backgroundColoredViews </span><br><span class="line">&#123;</span><br><span class="line">    view.backgroundColor = <span class="type">UIColor</span>.clearColor()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Size类便于使用storyboard"><a href="#Size类便于使用storyboard" class="headerlink" title="Size类便于使用storyboard"></a>Size类便于使用storyboard</h3><p>在本案例中，故事板中Scene大小不是默认<code>600x600</code>，在这里Simulated Metrics下的Size属性被设置成iPhone 4-inch。Simulated Metrics属性在运行时并没有任何影响——不同设备上视图的大小仍然会自动改变。</p>
<h2 id="创建水平UIStackView"><a href="#创建水平UIStackView" class="headerlink" title="创建水平UIStackView"></a>创建水平<code>UIStackView</code></h2><h3 id="按钮模块"><a href="#按钮模块" class="headerlink" title="按钮模块"></a>按钮模块</h3><ol>
<li>选中按钮<br>用<code>Command+左键</code>同时选中<code>Spot Info View Controller</code>底下一排的所有按钮：</li>
<li>Stack按钮添加一个新的Stack View<br>点击故事板画布左下角<code>Auto Layout工具栏</code>中新增的<code>Stack按钮</code>：    </li>
</ol>
<p>这些按钮被嵌到一个新的Stack View中：</p>
<h4 id="给新的Stack-View添加布局约束"><a href="#给新的Stack-View添加布局约束" class="headerlink" title="给新的Stack View添加布局约束"></a>给新的Stack View添加布局约束</h4><p>要在故事板选取一个充满了子视图的Stack View还是比较难的，介绍两种选择技巧。<br>3.1 在<code>Outline视图</code>中选取Stack View</p>
<p>3.2 Shift+右键调出View树<br>在Stack View 的任意地方按下<code>Shift+右键</code>或者<code>Control+Shift+左键</code>（如果你正在用触控板的话）。这时将弹出一个上下文菜单，列出了位于所点击的地方的View树，你可以在这个菜单中选择Stack View。</p>
<ol start="4">
<li>自动布局工具栏中的Pin按钮,添加一个约束</li>
</ol>
<p>首先勾选Constrain to margins。然后在Stack View四周添加下列约束：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Top</span>: <span class="number">20</span>, <span class="type">Leading</span>: <span class="number">0</span>, <span class="type">Trailing</span>: <span class="number">0</span>, <span class="type">Bottom</span>: <span class="number">0</span></span><br></pre></td></tr></table></figure><br>仔细检查top、leading、trailing、bottom中的数字并确保它们的I型柱都被选中。然后点击Add 4 Constraints：</p>
<h4 id="按钮等间距分布"><a href="#按钮等间距分布" class="headerlink" title="按钮等间距分布"></a>按钮等间距分布</h4><p>添加约束后，导致第一个按钮被拉伸：</p>
<h5 id="使用等宽约束的Spacer-View实现"><a href="#使用等宽约束的Spacer-View实现" class="headerlink" title="使用等宽约束的Spacer View实现"></a>使用等宽约束的<code>Spacer View</code>实现</h5><p>解决这个问题只能使用空白的View来分隔这些按钮，在按钮之间摆放上一些用于分隔空间的 Spacer View。所有的Spacer View都要添加等宽约束，以及许多额外的约束，才能将这些Spacer View布局正确。<br>这看起来如下图所示。为了直观起见，这些Spacer View的背景色设置成了浅灰色：<br>如果要在运行时添加一个按钮或者隐藏/删除一个按钮时，要想调整这些Spacer View和约束就要命了。</p>
<h5 id="Distribution属性：沿轴向水平分布"><a href="#Distribution属性：沿轴向水平分布" class="headerlink" title="Distribution属性：沿轴向水平分布"></a><code>Distribution</code>属性：沿轴向水平分布</h5><p>distribution属性：决定Stack View如何将它的subview沿轴向分布，当属性值是Fill，这表示subview会沿轴向完全占据Stack View。因此，Stack View会拉伸其中一个subview使其填充剩余空间，尤其是水平内容优先级最低的那个，如果所有subview优先级相同，则拉伸第一个subview。<br>打开Stack View属性面板。将<code>Distribution</code>属性由<code>Fill</code>修改为<code>Equal Spacing</code>：<br>编译运行，点击某个单元格，旋转模拟器（⌘→）。你将看到最下一排按钮现在按照等间距排列了！</p>
<h3 id="Rating版块"><a href="#Rating版块" class="headerlink" title="Rating版块"></a>Rating版块</h3><p>选中RATING标签，以及旁边的显示为几个星形图标的标签：<br>然后点击Stack按钮将它们嵌到一个Stack View中：<br>然后点击Pin按钮。勾选Constrain to margins，并添加如下约束：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Top</span>: <span class="number">20</span>, <span class="type">Leading</span>: <span class="number">0</span>, <span class="type">Bottom</span>: <span class="number">20</span></span><br></pre></td></tr></table></figure><br>打开属性面板，将间距设置为8：<br>你可能会看到一个 Misplaced Views的布局约束警告，同时星星标签会显示将会被拉伸到视图之外：<br>有时候Xcode会临时提示一些警告，或者显示Stack View的位置不正确，这些警告会在你添加其他约束后消失。你完全可以忽略这些警告。<br>要解决这个警告，我们可以修改一下Stack View的Frame然后又改回，或者临时修改它的一条布局约束。<br>让我们试一下。先将Alignment 属性从Fill修改为Top，然后又改回原来的Fill。你将看到这下星星标签显示正常了：<br>编译运行，进行测试</p>
<h2 id="创建垂直的Stack-View"><a href="#创建垂直的Stack-View" class="headerlink" title="创建垂直的Stack View"></a>创建垂直的Stack View</h2><p>Xcode会自动根据这两者的位置推断出这将是一个垂直的Stack View，Stack View没有添加任何约束时，会自动适应了两个标签中的最宽的一个的宽度。</p>
<h3 id="WHY-VISIT模块"><a href="#WHY-VISIT模块" class="headerlink" title="WHY VISIT模块"></a>WHY VISIT模块</h3><p>选中WHY VISIT标签及下面的标签,创建一个垂直的Stack View：<br>点击Stack 按钮将二者嵌到一个Stack View：</p>
<h4 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h4><p>默认，约束是相对于距离最近的对象，对于Bottom约束来说就是距离它15像素的Hide按钮。但我们其实是想让约束相对于WEATHER标签。<br>选中Stack View，点击Pin按钮。勾选Constrain to margins，设置Top、Leading、Trainling为0。<br>然后，点击Bottom右边的下拉按钮，从列表中选择WEATHER（curent distance =20）：<br>最后点击Add 4 Constraints按钮。显示结果如下图所示：</p>
<h4 id="alignment属性：轴向的垂直方向"><a href="#alignment属性：轴向的垂直方向" class="headerlink" title="alignment属性：轴向的垂直方向"></a>alignment属性：轴向的垂直方向</h4><p>Stack View问题，它的右边对齐于View的右边。但是底下的标签仍然是原来的宽度。需要使用alignment属性解决这个问题。<br>当你测试完所有Alignment值的布局效果后，将Alignment修改为Fill：<br>将<code>Alignment</code>设置为<code>Fill</code>，表示所有View将沿与Stack View轴向垂直的方向进行全占式分布。这会让WHY VISIT标签扩展它的宽度到100%.</p>
<p>如果我们只想让底下的标签将宽度扩展到100%怎么办？</p>
<p>这个问题现在看来还不是多大的问题，因为两个标签在运行时的背景色都是透明的。但对于Weather版块来说就不同了。</p>
<p>我们将用另外一个Stack View来说明这个问题。</p>
<h2 id="垂直／水平Stack-View嵌套使用"><a href="#垂直／水平Stack-View嵌套使用" class="headerlink" title="垂直／水平Stack View嵌套使用"></a>垂直／水平Stack View嵌套使用</h2><h3 id="Weather版块"><a href="#Weather版块" class="headerlink" title="Weather版块"></a>Weather版块</h3><p>在Weather版块相对复杂一些，因为它多了一个Hide按钮。<br>要隐藏<code>Stack View</code>中的视图，你只需要设置该View的<code>Hidden</code>属性为<code>true</code>，剩下的工作Stack View会自己完成。这也是我们解决用户隐藏WEATHER标签下文本的主要思路。<br>一种方法是使用嵌套的Stack View，先将WEATHER标签和Hide按钮嵌到一个水平StackView，再将这个Stack View和标签嵌到一个垂直Stack View。</p>
<h4 id="垂直stackView"><a href="#垂直stackView" class="headerlink" title="垂直stackView"></a>垂直stackView</h4><p>注意Alignment属性负责Stack View轴向垂直的方向上的布局。所以，我们需要将Alignment属性设置为 Bottom：</p>
<h4 id="水平StackView中出现按钮拉伸标签的问题"><a href="#水平StackView中出现按钮拉伸标签的问题" class="headerlink" title="水平StackView中出现按钮拉伸标签的问题"></a>水平StackView中出现按钮拉伸标签的问题</h4><p>注意，WEATHER标签被拉伸为和Hide按钮一样高了。这并不合适，因为这会导致WEATHER标签和下面的文本之间多出了一些空间。<br>正确的方法是让 Hide 按钮不要和 Weather 版块呆在同一个Stack View中，或者任何别的Stack View中。<br>这样，在顶层View中还会保留一个subview，你将为它添加一个相对于WEATHER标签的约束——WEATHER标签嵌在Stack View里的。也就是说，你要为位于Stack View之外的按钮加一个约束，这个约束是相对于Stack View内的一个标签！</p>
<h4 id="垂直stack-View1-嵌套WEATHER标签和标签"><a href="#垂直stack-View1-嵌套WEATHER标签和标签" class="headerlink" title="垂直stack View1:嵌套WEATHER标签和标签"></a>垂直stack View1:嵌套WEATHER标签和标签</h4><p>选中WEATHER标签和标签：<br>点击 Stack 按钮：<br>点击Pin 按钮，勾上Constrain to margins，然后添加如下约束：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Top</span>: <span class="number">20</span>, <span class="type">Leading</span>: <span class="number">0</span>, <span class="type">Trailing</span>: <span class="number">0</span>, <span class="type">Bottom</span>: <span class="number">20</span></span><br></pre></td></tr></table></figure><br>将Stack View的Alignment设为Fill：<br>我们需要在 Hide 按钮左边和WEATHER标签右边加一条约束，这样WEATHER 标签的宽度就不会拉满整个Stack View了。</p>
<p>当然，底下的标签宽度还是需要100%占满的。</p>
<p>我们是通过将WEATHER标签嵌到一个垂直Stack View 来实现的。注意，垂直Stack View的Alignment 属性可以设置为 .Leading，如果将Stack View拉宽，则它里面的View 会保持左对齐。</p>
<h4 id="垂直stack-View2-仅嵌套WEATHER标签"><a href="#垂直stack-View2-仅嵌套WEATHER标签" class="headerlink" title="垂直stack View2: 仅嵌套WEATHER标签"></a>垂直stack View2: 仅嵌套WEATHER标签</h4><p>从Outline视图中选取WEATHER 标签，或者用Control+Shift+左键的方式选取WEATHER 标签：<br>然后点击Stack 按钮：<br>确保Axis 为 Vertical 的情况下，将Alignment 设置为 Leading：</p>
<h4 id="按钮和WEATHER标签两个约束"><a href="#按钮和WEATHER标签两个约束" class="headerlink" title="按钮和WEATHER标签两个约束"></a>按钮和WEATHER标签两个约束</h4><p>从Hide 按钮用右键拖一条新的约束到 WEATHER 标签：<br>按下Shift键，同时选择Horizontal Spacing 和 Baseline。然后点击 Add Constraints：<br>编译运行。Hide 按钮的位置现在对了，而且当按下Hide 按钮，位于Stack View 中的标签被隐藏后，下面的视图也会被调整——根本不需要我们进行手动调整。</p>
<h2 id="顶级-Stack-View"><a href="#顶级-Stack-View" class="headerlink" title="顶级 Stack View"></a>顶级 Stack View</h2><p>在Outline 视图中，用Command+左键选择5个最顶级的 Stack View：<br>然后点击 Stack 按钮：<br>点击Pin 按钮，勾上 Constrain to margins，将 4 个边的约束都设为0。然后将Spacing 设置为20，Alignment 设为 Fill。现在故事板会是这个样子：<br>编译运行：<br>噢！这个 Hide 按钮又失去了它 的约束！因为包含 WEATHER 标签的Stack View的外边又套了一层 Stack View。这不是什么大问题，就像之前你做过的那样，再重新为它添加约束就是了。</p>
<p>右键从Hide 按钮拖一条约束到 WEATHER标签，按下 Shift 键，同时选择 Horizontal Spacing 和 Baseline。然后点击 Add Constraints：</p>
<h2 id="重新调整视图位置"><a href="#重新调整视图位置" class="headerlink" title="重新调整视图位置"></a>重新调整视图位置</h2><p>现在，所有的版块都被嵌到一个顶级的 Stack View中了，我们想修改一下 what to see版块的位置，让它位于 weather 版块之后。</p>
<p>从 Outline 视图中选择中间的的 Stack View，然后将它拖到第一、二个 Stack View 之间。<br>注意：让箭头稍微偏向你正在拖的Stack View左边一点，以便它能够作为外层 Stack View 的 subview 添加。蓝色的小圆圈应当位于两个 Stack View 之间的左端而不是右端：</p>
<p>现在，weather版块是从上到下的第三个版块，由于 Hide 按钮它并不是 Stack View的subview，所以它不会参与移动，它的frame当前是不正确的。</p>
<p>点击 Hide 按钮，选中它：</p>
<p>然后点击自动布局工具栏中的 Resolve Auto Layout Issues 按钮，选择 Update Frames：<br>现在 Hide 按钮将回到正确的位置：</p>
<h2 id="基于配置的-Size-类"><a href="#基于配置的-Size-类" class="headerlink" title="基于配置的 Size 类"></a>基于配置的 Size 类</h2><p>最后还有一个任务没有完成。在横屏模式，垂直空间是比较珍贵的，你想将这些版块之间靠得更近一些。要实现这个，你需要判断当垂直Size类为compact时，将顶层 Stack View的 Spacing属性由 20 改成 10.</p>
<p>选择顶层 Stack View，点击 Spacing 前面的+按钮：</p>
<p>选择 Any Width &gt; Compact Height：</p>
<p>在新出现的 wAny hC 一栏中，将 Spacing 设为 10：<br>编译运行。在竖屏模式下Spacing不会改变。旋转模拟器（⌘←），你会看到各版块之间的间距减少了，现在底部按钮之间的空间也变大了：<br>如果你没有添加最外层的 Stack View，你仍然可以使用 Size 类将每个版块之间的垂直间距设置为 10，但这就不是仅仅设置一个地方就能够办到的了。</p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p>现在，在隐藏和显示天气信息时仍然会觉得有一些突兀。你将增加一个动画使这个转换变得更平滑。</p>
<p>Stack View完全支持 <code>UIView 动画</code>。也就是说要以动画方式显示/隐藏它所包含的subview，只需要简单地在一个动画块中切换它的 hidden 属性。</p>
<p>让我们来看看代码怎么实现。打开 <code>SpotInfoViewController.Swift</code>，找到<br><code>updateWeatherInfoViews(hideWeatherInfo:animated:)</code>方法。</p>
<p>将方法的最后一行：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weatherInfoLabel.hidden = shouldHideWeatherInfo</span><br></pre></td></tr></table></figure><br>替换为：<br><figure class="highlight swift"><figcaption><span>swift</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> animated </span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">UIView</span>.animateWithDuration(<span class="number">0.3</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.weatherInfoLabel.hidden = shouldHideWeatherInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">    weatherInfoLabel.hidden = shouldHideWeatherInfo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>编译运行，点击Hide 按钮或 Show 按钮。是不是加入动画之后看起来要好得多呢？</p>
<p>除了对 Stack View 中的视图以动画的方式设置 hidden 属性，你也可以对 Stack View 自身的属性使用 UIView 动画，例如 Alignment 属性、 Distribution 属性、 Spacing 属性和 Axis 属性。<br><a href="http://cdn5.raywenderlich.com/wp-content/uploads/2015/09/VacationSpots_Starter.zip" target="_blank" rel="noopener">开始项目源码</a><br><a href="http://cdn1.raywenderlich.com/wp-content/uploads/2015/09/VacationSpots_Complete.zip" target="_blank" rel="noopener">完整项目源码</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2017/02/24/iOS/UI/更改设备屏幕上显示的应用程序图标下方的名称/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/02/24/iOS/UI/更改设备屏幕上显示的应用程序图标下方的名称/" class="post-title-link" itemprop="url">更改设备屏幕上显示的应用程序图标下方的名称</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-02-24 14:23:59" itemprop="dateCreated datePublished" datetime="2017-02-24T14:23:59Z">2017-02-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-01-16 21:01:13" itemprop="dateModified" datetime="2019-01-16T21:01:13Z">2019-01-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/配置/" itemprop="url" rel="index"><span itemprop="name">配置</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/02/24/iOS/UI/更改设备屏幕上显示的应用程序图标下方的名称/" class="leancloud_visitors" data-flag-title="更改设备屏幕上显示的应用程序图标下方的名称">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>修改APP启动图标上的名称，需配置<code>Info.plist</code>文件，增加<code>CFBundleDisplayName</code>属性键值对。<br>进入到如下界面：<br><!--长宽设置百分比大小无效果--></p>
<p>在<code>Info.plist</code>文件属性列表中搜索”Bundle display name”，如果存在就修改为新APP名称。<br>如果不存在，在任何一个属性条目下，点击”+”按钮，弹出的下拉列表中选择”Bundle display name”，再双击”Bundle display name”属性值列，输入新APP名称。<br><!--长宽设置百分比大小无效果--></p>
<h2 id="agvtool自动增加版本号命令行工具"><a href="#agvtool自动增加版本号命令行工具" class="headerlink" title="agvtool自动增加版本号命令行工具"></a>agvtool自动增加版本号命令行工具</h2><p>版本号和编译号分别是代表了正式发布版本和内部版本， agvtool 是一个自动增加版本号的命令行工具。</p>
<p>注意：版本号是给用户看的，用于标明当前的发行版本，并且被存储在 App 的 Info.plist 文件的 CFBundleShortVersionString (Bundle versions string, short) 中。编译号是内部使用的，用于标明未发行或者已内部发行的应用程序，并且它被存储在 Info.plist 文件的 CFBundleVersion (Bundle version) 中。</p>
<p>注意：如果应用程序包含了多个目标（target）， agvtool 工具将会把所有目标都设置为同一个版本号和编译号。</p>
<h3 id="设置-Current-Project-Version-为选定的值"><a href="#设置-Current-Project-Version-为选定的值" class="headerlink" title="设置 Current Project Version 为选定的值"></a>设置 Current Project Version 为选定的值</h3><p>Xcode 工程文件 project.pbxproj 包含了 CURRENT_PROJECT_VERSION (Current Project Version) 编译设定，这个编译设定指定了当前工程的版本。<br>agvtool 会搜索此编译选项。如果这个值存在就运行，否则不运行，这个值用来更新编译号。</p>
<h3 id="设置-Versioning-System-为-Apple-Generic"><a href="#设置-Versioning-System-为-Apple-Generic" class="headerlink" title="设置 Versioning System 为 Apple Generic"></a>设置 Versioning System 为 Apple Generic</h3><p>默认情况下苹果不使用任何版本系统，设置为 Apple Generic 确保 Xcode 包含全部的 agvtool 生成的版本信息。</p>
<p>注意： Current Project Version 的值必须是整数或者浮点数，新工程最好设置为1。</p>
<h3 id="设置版本和编译号"><a href="#设置版本和编译号" class="headerlink" title="设置版本和编译号"></a>设置版本和编译号</h3><p>agvtool 从 Info.plist 文件搜索版本和编译号。如果存在就更新，不存在就不执行。<br>确保 CFBundleVersion (Bundle version) 和 CFBundleShortVersionString (Bundle versions string, short) 存在。</p>
<h3 id="版本号命令"><a href="#版本号命令" class="headerlink" title="版本号命令"></a>版本号命令</h3><p>退出 Xcode，在终端下进入到包含 .xcodeproj 工程文件的目录， .xcodeproj 文件包含了 project.pbxproj 文件。</p>
<ol>
<li><p>查看版本号：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agvtool what-marketing-version</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新版本号</p>
</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agvtool new-marketing-version &lt;指定的版本号&gt;</span><br></pre></td></tr></table></figure>
<h3 id="编译号命令"><a href="#编译号命令" class="headerlink" title="编译号命令"></a>编译号命令</h3><ol>
<li><p>将编译号设置为指定版本</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agvtool new-version -all &lt;指定的版本号&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新编译号</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agvtool next-version -all</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看当前编译号</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agvtool what-version</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="iTBoyer">
            
              <p class="site-author-name" itemprop="name">iTBoyer</p>
              <div class="site-description motion-element" itemprop="description">不物喜，不己悲，善假物，易参行！</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">287</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">58</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">84</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          
            <!--博客-->
            
                <div class="feed-link motion-element">
                    <a href="/podcast.xml" rel="alternate">
                        <i class="fa fa-rss"></i>
                        我的博客
                    </a>
                </div>
            
            
                <div class="feed-link motion-element">
                    <a href="/docs" rel="alternate">
                        <i class="fa fa-rss"></i>
                        我的阅读
                    </a>
                </div>
            
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/huos3203" title="GitHub &rarr; https://github.com/huos3203" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://weibo.com/1791281385" title="微博 &rarr; http://weibo.com/1791281385" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>微博</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://douban.com/people/boyers" title="豆瓣 &rarr; http://douban.com/people/boyers" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>豆瓣</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://www.zhihu.com/people/boyers" title="知乎 &rarr; http://www.zhihu.com/people/boyers" rel="noopener" target="_blank"><i class="fa fa-fw fa-snapchat"></i>知乎</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:iTBoyer@qq.com" title="E-Mail &rarr; mailto:iTBoyer@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                学习园地
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/" title="swift文档" target="_blank">swift文档</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/matteocrippa/awesome-swift" title="swift酷库" target="_blank">swift酷库</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://swift.org/getting-started/" title="SPM终端开发" target="_blank">SPM终端开发</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/PerfectlySoft/Perfect/blob/master/README.zh_CN.md" title="Perfect服务器端" target="_blank">Perfect服务器端</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/uraimo/Awesome-Swift-Playgrounds" title="Playground" target="_blank">Playground</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.objccn.io" title="objc中国" target="_blank">objc中国</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://nshipster.cn" title="NSHipster" target="_blank">NSHipster</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques" title="动画" target="_blank">动画</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://git-scm.com/book/zh" title="GitPro" target="_blank">GitPro</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://kaopu.so/pan" title="全盘搜" target="_blank">全盘搜</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://wherebt.com" title="BT导航网" target="_blank">BT导航网</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://mp.weixin.qq.com" title="小程序官方" target="_blank">小程序官方</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://onevcat.com" title="王维" target="_blank">王维</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.devtang.com" title="唐巧" target="_blank">唐巧</a>
                  </li>
                
              </ul>
            </div>
          
            
            
                <div class="links-of-blogroll motion-element links-of-blogroll-block">
                    <div class="links-of-blogroll-title">
                        <i class="fa  fa-fw fa-link"></i>
                        在线工具
                    </div>
                    <ul class="links-of-blogroll-list">
                        
                            <li class="links-of-blogroll-item">
                            <a href="http://blog.didispace.com/tools/online-markdown/" title="MarkDown转公众号" target="_blank">MarkDown转公众号</a>
                            </li>
                        
                            <li class="links-of-blogroll-item">
                            <a href="https://leetcode-cn.com/playground/new/empty" title="leetcode工具" target="_blank">leetcode工具</a>
                            </li>
                        
                            <li class="links-of-blogroll-item">
                            <a href="https://www.lintcode.com/problem/" title="lintcode编码" target="_blank">lintcode编码</a>
                            </li>
                        
                    </ul>
                </div>
            
          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  
    <div id="sidebar-dimmer"></div>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iTBoyer</span>

  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">NaN:aN</span>
  
</div>









<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<i class="fa fa-user-md"></i>
<span id="busuanzi_container_site_uv">
您是本站第:<span id="busuanzi_value_site_uv"></span>位小伙伴 |
</span>
<span id="busuanzi_container_site_pv">
本站总<span id="busuanzi_value_site_pv"></span>次访问 |
</span>
<span class="post-count"> 博客全站共字</span>
</div>
<div class="copyright">
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
</div>


<script>
var now = new Date();
function createtime() {
var grt= new Date("02/14/2018 12:49:00");//此处修改你的建站时间或者网站上线时间
now.setTime(now.getTime()+250);
days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
}
setInterval("createtime()",250);
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  

  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.2"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.2"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'ue8PI3eFeweMAjNgpAAIfiRi-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'ue8PI3eFeweMAjNgpAAIfiRi-gzGzoHsz',
                'X-LC-Key': '2kHl2CEoDUKiHcVvz0dhu5rF',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  
  
  
  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      const selection = document.getSelection();
      const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
      if (selected) {
        selection.removeAllRanges();
        selection.addRange(selected);
      }
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"live2d-widget-model-wanko"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>
</html>
