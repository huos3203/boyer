<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">











  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.2',
    sidebar: {"position":"left","display":"always","offset":40,"onmobile":false,"dimmer":true},
    back2top: true,
    back2top_sidebar: true,
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"搜索文章","hits_empty":"抱歉暂时没有发表相关: ${query}内容文章","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  












<script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0eeeae6f.js","daovoice")
daovoice('init', {
app_id: "06289ecd"
});
daovoice('update');
</script>



  <meta name="description" content="不物喜，不己悲，善假物，易参行！">
<meta property="og:type" content="website">
<meta property="og:title" content="布衣男儿">
<meta property="og:url" content="https://huos3203.github.io/page/4/index.html">
<meta property="og:site_name" content="布衣男儿">
<meta property="og:description" content="不物喜，不己悲，善假物，易参行！">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="布衣男儿">
<meta name="twitter:description" content="不物喜，不己悲，善假物，易参行！">



  <link rel="alternate" href="/atom.xml" title="布衣男儿" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://huos3203.github.io/page/4/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>布衣男儿</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b4a2528a681e2f23855d15a4de0abfc2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/assets/css/APlayer.min.css" class="aplayer-style-marker">
<script src="/assets/js/APlayer.min.js" class="aplayer-script-marker"></script>
<script src="/assets/js/Meting.min.js" class="meting-script-marker"></script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">布衣男儿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">不物喜，不己悲，善假物，易参行！</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="algolia-popup popup search-popup">
  <div class="algolia-search">
    <div class="algolia-search-input-icon">
      <i class="fa fa-search"></i>
    </div>
    <div class="algolia-search-input" id="algolia-search-input"></div>
  </div>

  <div class="algolia-results">
    <div id="algolia-stats"></div>
    <div id="algolia-hits"></div>
    <div id="algolia-pagination" class="algolia-pagination"></div>
  </div>

  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/huos3203" class="github-corner" title="关注不迷路" aria-label="关注不迷路" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/12/git/gist命令工具使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/12/git/gist命令工具使用/" class="post-title-link" itemprop="url">gist命令工具使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-11 17:17:52 / 修改时间：17:58:15" itemprop="dateCreated datePublished" datetime="2018-10-11T17:17:52Z">2018-10-11</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/12/git/gist命令工具使用/" class="leancloud_visitors" data-flag-title="gist命令工具使用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><!--github库卡片-->
<div id="badge-container-defunkt-gist-8d86604" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-defunkt-gist-8d86604", "defunkt", "gist", "8d86604", false);
</script>

<p><a href="http://macappstore.org/gist/" target="_blank" rel="noopener">按照gist</a></p>
<h3 id="安装gist"><a href="#安装gist" class="headerlink" title="安装gist"></a>安装gist</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gist</span><br></pre></td></tr></table></figure>
<h3 id="创建gist"><a href="#创建gist" class="headerlink" title="创建gist"></a>创建gist</h3><p>上传<code>a.rb</code>中的代码段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist a.rb</span><br></pre></td></tr></table></figure></p>
<p>上传多个文件<code>a.rb</code>,<code>b.rb</code>,<code>c.rb</code>的代码段:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gist a b c</span><br><span class="line">gist *.rb</span><br></pre></td></tr></table></figure></p>
<p>作为文件上传：获取<code>STDIN</code>数据，并使用<code>-f</code>指定文件名<code>test.rb</code>上传：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -f test.rb &lt;a.rb</span><br></pre></td></tr></table></figure></p>
<p>直接从剪切板上传文本:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -P</span><br></pre></td></tr></table></figure></p>
<p>设置隐私片段 <code>-p</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -p a.rb</span><br></pre></td></tr></table></figure></p>
<p>添加片段描述信息<code>-d</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -d &quot;Random rbx bug&quot; a.rb</span><br></pre></td></tr></table></figure></p>
<p>更新现有的片段 <code>-u</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gist -u GIST_ID FILE_NAME</span><br><span class="line">例子：</span><br><span class="line">gist -u 42f2c239d2eb57299408 test.txt</span><br></pre></td></tr></table></figure></p>
<p>‌If you’d like to copy the resulting URL to your clipboard, use <code>-c</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -c &lt;a.rb</span><br></pre></td></tr></table></figure></p>
<p>‌If you’d like to copy the resulting embeddable URL to your clipboard, use <code>-e</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -e &lt;a.rb</span><br></pre></td></tr></table></figure></p>
<p>打开浏览器访问片段 <code>-o</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gist -o &lt;a.rb</span><br></pre></td></tr></table></figure></p>
<p>‌To list (public gists or all gists for authed user) gists for user<br><code>gist -l</code> : all gists for authed user<br><code>gist -l defunkt</code> : list defunkt’s public gists<br>To read a gist and print it to STDOUT<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gist -r GIST_ID</span><br><span class="line">例子：</span><br><span class="line">gist -r 374130</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p>‌See <code>gist --help</code> for more detail.</p>
<h4 id="使用gist命令"><a href="#使用gist命令" class="headerlink" title="使用gist命令"></a>使用gist命令</h4><h4 id="使用gistit快捷工具"><a href="#使用gistit快捷工具" class="headerlink" title="使用gistit快捷工具"></a>使用gistit快捷工具</h4><div id="badge-container-jrbasso-gistit-99fc659" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-jrbasso-gistit-99fc659", "jrbasso", "gistit", "99fc659", false);
</script>

<ol>
<li><p><a href="http://macappstore.org/gistit/" target="_blank" rel="noopener">安装</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gistit</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://gistit.herokuapp.com" target="_blank" rel="noopener">使用说明</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Creating a public gist from other app response</span><br><span class="line">ls | gistit</span><br><span class="line"></span><br><span class="line"># Creating a private gist from other app response</span><br><span class="line">ls | gistit -priv</span><br><span class="line"></span><br><span class="line"># Specifying the gist filename</span><br><span class="line">ls | gistit -i list.txt</span><br><span class="line"></span><br><span class="line"># Sending files</span><br><span class="line">gistit file.txt</span><br><span class="line"></span><br><span class="line"># Sending multiple files in a private gist</span><br><span class="line">gistit -priv file1.txt file2.c</span><br><span class="line"></span><br><span class="line"># Setting gist description</span><br><span class="line">gistit -d &quot;This is just a sample&quot; sample.txt</span><br><span class="line"></span><br><span class="line"># Setting gist description, private and with multiple files</span><br><span class="line">gistit -d &quot;Sample&quot; -priv file1.txt file2.txt file3.txt</span><br><span class="line"></span><br><span class="line"># Help</span><br><span class="line">gistit -h</span><br><span class="line"></span><br><span class="line"># Version</span><br><span class="line">gistit -v</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/09/git/subtree拆分大的git库到多个独立git库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/09/git/subtree拆分大的git库到多个独立git库/" class="post-title-link" itemprop="url">subtree拆分大的git库到多个独立git库</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-09 12:07:55" itemprop="dateCreated datePublished" datetime="2018-10-09T12:07:55Z">2018-10-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-24 23:21:29" itemprop="dateModified" datetime="2019-04-24T23:21:29Z">2019-04-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/09/git/subtree拆分大的git库到多个独立git库/" class="leancloud_visitors" data-flag-title="subtree拆分大的git库到多个独立git库">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="https://segmentfault.com/a/1190000002548731" target="_blank" rel="noopener">Git 仓库拆拆拆</a></p>
<h2 id="拆分一个子目录为独立仓库"><a href="#拆分一个子目录为独立仓库" class="headerlink" title="拆分一个子目录为独立仓库"></a>拆分一个子目录为独立仓库</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这就是那个大仓库 big-project</span></span><br><span class="line">$ git <span class="built_in">clone</span> git@github.com:tom/big-project.git</span><br><span class="line">$ <span class="built_in">cd</span> big-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把所有 `codes-eiyo` 目录下的相关提交整理为一个新的分支 eiyo</span></span><br><span class="line">$ git subtree split -P codes-eiyo -b eiyo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 另建一个新目录并初始化为 git 仓库</span></span><br><span class="line">$ mkdir ../eiyo</span><br><span class="line">$ <span class="built_in">cd</span> ../eiyo</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取旧仓库的 eiyo 分支到当前的 master 分支</span></span><br><span class="line">$ git pull ../big-project eiyo</span><br></pre></td></tr></table></figure>
<h2 id="清除一个子目录下所有内容和记录"><a href="#清除一个子目录下所有内容和记录" class="headerlink" title="清除一个子目录下所有内容和记录"></a>清除一个子目录下所有内容和记录</h2><p>这个还是要用万能的 <code>filter-branch</code>：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 还是那个大仓库 big-project</span></span><br><span class="line">$ git <span class="built_in">clone</span> git@github.com:tom/big-project.git</span><br><span class="line">$ <span class="built_in">cd</span> big-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理 `master` 分支上所有跟 `codes-eiyo` 目录有关的痕迹</span></span><br><span class="line">$ git filter-branch --index-filter <span class="string">"git rm -rf --cached --ignore-unmatch codes-eiyo"</span> --prune-empty master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 另建一个新目录并初始化为 git 仓库</span></span><br><span class="line">$ mkdir ../big-project-fresh</span><br><span class="line">$ <span class="built_in">cd</span> ../big-project-fresh</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取 `big-project` 的 `master` 分支（到新仓库的 master 分支）</span></span><br><span class="line">$ git pull ../big-project master</span><br></pre></td></tr></table></figure></p>
<h2 id="推送给新的远端仓库"><a href="#推送给新的远端仓库" class="headerlink" title="推送给新的远端仓库"></a>推送给新的远端仓库</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git://github.com:tom/fresh-project.git</span><br><span class="line">$ git push origin -u master</span><br></pre></td></tr></table></figure>
<h3 id="git-subtree-合并"><a href="#git-subtree-合并" class="headerlink" title="git subtree 合并"></a>git subtree 合并</h3><p>git subtree：合并策略，通过git subtree命令能将依赖库某分支合并到主项目的分支中，在开发过程中，只需对主项目分支进行统一管理。</p>
<h4 id="创建合并subtree-add命令"><a href="#创建合并subtree-add命令" class="headerlink" title="创建合并subtree add命令"></a>创建合并subtree add命令</h4><p>命令如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;git subtree&apos; add -P &lt;prefix&gt; &lt;commit&gt;</span><br><span class="line">&apos;git subtree&apos; add -P &lt;prefix&gt; &lt;repository&gt; &lt;ref&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="两步走"><a href="#两步走" class="headerlink" title="两步走"></a>两步走</h5><p>先fetch库再subtree add合并</p>
<ol>
<li><p>先将依赖库fetch到本地仓库中</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 创建lib的远程版本库: </span><br><span class="line">git init --bare lib-rep</span><br><span class="line"><span class="comment">#-f：远端库添加后立即执行fetch操作</span></span><br><span class="line">git remote add -f librepo ../lib-rep</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过git subtree命令将依赖库合并到主项目中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree add -P lib librepo master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="squash合并法"><a href="#squash合并法" class="headerlink" title="squash合并法"></a>squash合并法</h5><p><code>--squash</code>: 适用于add/pull/merge子命令。先合并引用库的更新记录，将合并结果并到主项目中。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree add --prefix=themes/jacman --squash https://huos3203@github.com/huos3203/jacman.git master</span><br></pre></td></tr></table></figure></p>
<h4 id="subtree其他命令"><a href="#subtree其他命令" class="headerlink" title="subtree其他命令"></a>subtree其他命令</h4><p>git subtree支持创建(add)之外,还支持更新(pull),推送(push),合并(merge),抽离(split)以下命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'git subtree'</span> pull -P &lt;prefix&gt; &lt;repository&gt; &lt;ref&gt;</span><br><span class="line"><span class="string">'git subtree'</span> push -P &lt;prefix&gt; &lt;repository&gt; &lt;ref&gt;</span><br><span class="line"><span class="string">'git subtree'</span> merge -P &lt;prefix&gt; &lt;commit&gt;</span><br><span class="line"><span class="string">'git subtree'</span> split -P &lt;prefix&gt; [OPTIONS] [&lt;commit&gt;]</span><br></pre></td></tr></table></figure></p>
<p>从子树库中拉取最新代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree pull --prefix=themes/jacman --squash https://huos3203@github.com/huos3203/jacman.git master</span><br></pre></td></tr></table></figure></p>
<p>将自己的代码发布到子树库:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree push --prefix=themes/jacman --squash https://huos3203@github.com/huos3203/jacman.git master</span><br></pre></td></tr></table></figure></p>
<p>相关参数：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-q | --quiet</span><br><span class="line">-d | --debug</span><br><span class="line">-P &lt;prefix&gt; | --prefix=&lt;prefix&gt;      引用库对应的本地目录</span><br><span class="line">-m &lt;message&gt; | --message=&lt;message&gt;   适用于add/pull/merge子命令。设置产生的合并提交的说明文本</span><br><span class="line">--squash                             适用于add/pull/merge子命令。先合并引用库的更新记录，将合并结果并到主项目中。</span><br><span class="line">使用此选项时，subtree add/pull会产生两个提交版本：一个是子项目的历史记录，一个是Merge操作。好处是可以让主项目历史记录很规整，缺点是子项目更新时常常需要解决冲突。一个更好的解决方案是：单独建一个分支进行--no-squash的subtree更新，然后再--squash合并到主分支。每次在此分支做操作前都需要先把主分支合并进来。参考：http://www.fwolf.com/blog/post/246</span><br></pre></td></tr></table></figure></p>
<p>split子命令选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--annotate=&lt;annotation&gt;              创建合成历史时有可能形成内容不同但提交信息完全相同的提交版本，使用这个选项在每个提交消息前加上此前缀用来区分。</span><br><span class="line">-b &lt;branch&gt; | --branch=&lt;branch&gt;      创建合成的提交历史时，创建此参数指定的新分支包含生成的合成历史。&lt;branch&gt;必须是还不存在的。</span><br><span class="line">--onto=&lt;onto&gt;</span><br><span class="line">--rejoin</span><br><span class="line">--ignore-joins</span><br></pre></td></tr></table></figure></p>
<h4 id="使用sourcetree管理"><a href="#使用sourcetree管理" class="headerlink" title="使用sourcetree管理"></a>使用sourcetree管理</h4><ol>
<li>配置 subtree<br>菜单：Repository -&gt; Add/Link subtree…(添加／链接子树…)<br>在左边栏的SUBTREES(子树)中显示：</li>
<li>拉取依赖库的最新代码<br>在右边栏右击已存在的subtree，并选择 pull subtree…菜单项：<br>第二步的功能代码如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git -c subtree pull -P themes/.jacman --squash https://huos3203@github.com/huos3203/jacman.git master</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/09/git/zsh插件之gi使用说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/09/git/zsh插件之gi使用说明/" class="post-title-link" itemprop="url">zsh插件之gi使用说明</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-09 12:04:55" itemprop="dateCreated datePublished" datetime="2018-10-09T12:04:55Z">2018-10-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-15 08:26:32" itemprop="dateModified" datetime="2018-10-15T08:26:32Z">2018-10-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/09/git/zsh插件之gi使用说明/" class="leancloud_visitors" data-flag-title="zsh插件之gi使用说明">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">649</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><!--github库卡片-->
<div id="badge-container-joeblau-gitignore.io-a09921d" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-joeblau-gitignore.io-a09921d", "joeblau", "gitignore.io", "a09921d", false);
</script>

<h2 id="配置zsh支持插件gi命令"><a href="#配置zsh支持插件gi命令" class="headerlink" title="配置zsh支持插件gi命令"></a>配置zsh支持插件<code>gi</code>命令</h2><ol>
<li>先浏览<code>oh-my-zsh/plugins</code>目录下支持所有插件,找到<code>gi</code>命令的插件名称：<code>gitignore</code>,即目录名称。</li>
<li>把<code>gitignore</code>添加到<code>zshrc.zsh-template</code>的插件激活的清单中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 插件设置，如果添加太多启动速度会比较慢</span><br><span class="line">plugins=(git gitignore ruby autojump osx mvn)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="gi清单命令使用"><a href="#gi清单命令使用" class="headerlink" title="gi清单命令使用"></a><code>gi</code>清单命令使用</h2><p>再次打开zsh窗口会激活<code>gi</code>命令</p>
<ul>
<li><p>list命令<br>打印出<a href="https://www.gitignore.io/" target="_blank" rel="noopener">gitignore.io</a>官网支持语种的所有模版：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gi list</span><br></pre></td></tr></table></figure>
</li>
<li><p>系统全局清单<br>在<code>.gitignore_global</code>文件中添加，忽略当前操作系统中某个<code>IDE</code>工具的忽略清单:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gi linux,eclipse &gt;&gt; ~/.gitignore_global</span><br></pre></td></tr></table></figure>
</li>
<li><p>Project项目忽略清单<br>在<code>.gitignore</code>文件中添加，配置项目中使用的<code>源码语言</code>的相关忽略清单:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gi java,python &gt;&gt; .gitignore</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/06/macOS/配置Podfile支持playground导入库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/06/macOS/配置Podfile支持playground导入库/" class="post-title-link" itemprop="url">配置Podfile支持playground导入库</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-06 14:50:12" itemprop="dateCreated datePublished" datetime="2018-10-06T14:50:12Z">2018-10-06</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/06/macOS/配置Podfile支持playground导入库/" class="leancloud_visitors" data-flag-title="配置Podfile支持playground导入库">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">871</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="pod支持问题"><a href="#pod支持问题" class="headerlink" title="pod支持问题"></a>pod支持问题</h2><p><a href="http://stackoverflow.com/questions/38216238/xcode-playground-with-cocoapods#" target="_blank" rel="noopener">xcode-playground-with-cocoapods</a><br>You could use <a href="https://github.com/neonichu/ThisCouldBeUsButYouPlaying" target="_blank" rel="noopener">ThisCouldBeUsButYouPlaying</a> or add this to your Podfile<br>xcode7.3.1和cocoapods1.0版本导致playground无法import相关动态库</p>
<h2 id="RxSwift资源案例"><a href="#RxSwift资源案例" class="headerlink" title="RxSwift资源案例"></a>RxSwift资源案例</h2><p>在项目中使用<code>RxSwift.Resources.total</code>，提供所有Rx资源分配的计数，这对于在开发期间检测泄漏非常有用。<br>在写入磁盘之前，修改一些工程的配置<a href="https://guides.cocoapods.org/syntax/podfile.html#tab_group_hooks" target="_blank" rel="noopener">post_install hook</a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">target &apos;AppTarget&apos; do</span><br><span class="line">    pod &apos;RxSwift&apos;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">post_install do |installer|</span><br><span class="line">    installer.pods_project.targets.each do |target|</span><br><span class="line">        if target.name == &apos;RxSwift&apos;</span><br><span class="line">                target.build_configurations.each do |config|</span><br><span class="line">                    if config.name == &apos;Debug&apos;</span><br><span class="line">                    config.build_settings[&apos;OTHER_SWIFT_FLAGS&apos;] ||= [&apos;-D&apos;, &apos;TRACE_RESOURCES&apos;]</span><br><span class="line">                end</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<p>Run pod update.<br>Build project (Product → Build).</p>
<h2 id="post-install-用法"><a href="#post-install-用法" class="headerlink" title="post_install 用法"></a>post_install 用法</h2><p><a href="https://guides.cocoapods.org/syntax/podfile.html#tab_group_hooks" target="_blank" rel="noopener">podfile hook语法</a><br><a href="https://www.jianshu.com/p/9dfd59c7c411" target="_blank" rel="noopener">post_install语法</a><br><a href="https://www.jianshu.com/p/d8eb397b835e" target="_blank" rel="noopener">把玩CocoaPods post_install 和 pre_install</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/06/shell/使用gem升级pod方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/06/shell/使用gem升级pod方法/" class="post-title-link" itemprop="url">使用gem升级pod方法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-06 14:50:12" itemprop="dateCreated datePublished" datetime="2018-10-06T14:50:12Z">2018-10-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-20 10:48:04" itemprop="dateModified" datetime="2018-10-20T10:48:04Z">2018-10-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/06/shell/使用gem升级pod方法/" class="leancloud_visitors" data-flag-title="使用gem升级pod方法">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">349</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h1 id="升级cocopods"><a href="#升级cocopods" class="headerlink" title="升级cocopods"></a>升级cocopods</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo gem update --system</span><br><span class="line">gem source -l</span><br><span class="line">pod setup</span><br><span class="line">pod repo update --verbose</span><br><span class="line">sudo gem install cocoapods --pre</span><br><span class="line">sudo gem cleanup</span><br></pre></td></tr></table></figure>
<p>gem source<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</span><br><span class="line">$ gem sources -l</span><br><span class="line">https://gems.ruby-china.com</span><br><span class="line"># 确保只有 gems.ruby-china.com</span><br></pre></td></tr></table></figure></p>
<p>腾讯云：<code>https://gems.ruby-china.com/</code><br>淘宝：<code>https://ruby.taobao.org/</code></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/05/shell/设置环境变量的profile与bash_profile区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/05/shell/设置环境变量的profile与bash_profile区别/" class="post-title-link" itemprop="url">设置环境变量的profile与bash_profile区别</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-05 09:32:44 / 修改时间：21:42:35" itemprop="dateCreated datePublished" datetime="2018-10-05T09:32:44Z">2018-10-05</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/05/shell/设置环境变量的profile与bash_profile区别/" class="leancloud_visitors" data-flag-title="设置环境变量的profile与bash_profile区别">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">850</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="profile文件"><a href="#profile文件" class="headerlink" title="profile文件"></a>profile文件</h2><p>1.1 profile文件的作用<br><strong>profile</strong>(<code>/etc/profile</code>)，用于设置系统级的环境变量和启动程序，在这个文件下配置会对所有用户生效。当用户登录(login)时，文件会被执行。<br>1.2 在profile中添加环境变量<br>一般不建议在<code>/etc/profile</code>文件中添加环境变量，因为在这个文件中添加的设置会对所有用户起作用。<br>当必须添加时，我们可以按以下方式添加：<br>如，添加一个HOST值为linuxprobe.com的环境变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export HOST=linuxprobe.com</span><br></pre></td></tr></table></figure></p>
<p>添加时，可以在行尾使用<code>;</code>号，也可以不使用。<br>一个变量名可以对应多个变量值，多个变量值需要使用<code>:</code>进行分隔。<br>添加环境变量后，需要重新登录才能生效，也可以使用<code>source</code>命令强制立即生效：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></p>
<p>查看是否生效可以使用echo命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo $HOST</span><br><span class="line">linuxprobe.com</span><br></pre></td></tr></table></figure></p>
<h2 id="bashrc文件"><a href="#bashrc文件" class="headerlink" title="bashrc文件"></a>bashrc文件</h2><p><code>bashrc</code>文件用于配置函数或别名。<br><code>bashrc</code>文件有两种级别：系统级的位于<code>/etc/bashrc</code>、用户级的位于<code>~/.bashrc</code>，两者分别会对所有用户和当前用户生效。<br><code>bashrc</code>文件只会对指定的<code>shell</code>类型起作用，<code>bashrc</code>只会被<code>bash shell</code>调用。<br>Mac OS X上的终端bash不读取<code>~/.bashrc</code>，因为Mac OS X上的bash是通过login的方式运行的，而<code>man bash</code>中写着，通过<code>login</code>方式登录的bash不会读取<code>~/.bashrc</code>。<br>解决方法：把下面的代码 添加到 <code>~/.bash_profile</code>中:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- lang: shell --&gt;</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure></p>
<h2 id="bash-profile文件"><a href="#bash-profile文件" class="headerlink" title="bash_profile文件"></a>bash_profile文件</h2><p><code>bash_profile</code>只对单一用户有效，文件存储位于<code>~/.bash_profile</code>，该文件是一个用户级的设置，可以理解为某一个用户目录下的<code>profile</code>。这个文件同样也可以用于配置环境变量和启动程序，但只针对单个用户有效。</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/05/shell/vim一般模式下查找和替换命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/05/shell/vim一般模式下查找和替换命令/" class="post-title-link" itemprop="url">vim一般模式下查找和替换命令</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-04 23:48:08" itemprop="dateCreated datePublished" datetime="2018-10-04T23:48:08Z">2018-10-04</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/05/shell/vim一般模式下查找和替换命令/" class="leancloud_visitors" data-flag-title="vim一般模式下查找和替换命令">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">335</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="查找命令"><a href="#查找命令" class="headerlink" title="/,?查找命令"></a><code>/</code>,<code>?</code>查找命令</h3><ul>
<li><code>/word</code> 向下查找word字符串</li>
<li><code>?word</code>向上查找word字符串<br>组合查找<br><code>n</code>:  代表重复前一个查找的操作<br><code>N</code>:反向进行前一个查找操作  <h3 id="s-old-new-g替换命令"><a href="#s-old-new-g替换命令" class="headerlink" title="s/old/new/g替换命令"></a><code>s/old/new/g</code>替换命令</h3></li>
</ul>
<ol>
<li>行间查找<br>在第n1和n2行查找<code>word1</code>比替换为<code>word2</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:n1,n2s/word1/word2/g</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>举例：  <code>：100,200s/vbird/VBIRD/g</code></p>
<ol start="2">
<li>全文查找并替换<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:1,$s/word1/word2/g</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>从第一行到最后一行查找字符串word1字符串，并将字符串word1替换为word2</p>
<ol start="3">
<li>用户确认替换提示<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:1,$s/word1/word2/gc</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>从第一行到最后一行查找字符串word1，并将字符串word1替换为word2,在替换之前提示用户确认是否替换</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/04/shell/shell脚本路径和执行的路径区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/04/shell/shell脚本路径和执行的路径区别/" class="post-title-link" itemprop="url">shell脚本路径和执行的路径区别</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-04 13:52:19" itemprop="dateCreated datePublished" datetime="2018-10-04T13:52:19Z">2018-10-04</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/04/shell/shell脚本路径和执行的路径区别/" class="leancloud_visitors" data-flag-title="shell脚本路径和执行的路径区别">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">146</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="获取shell脚本文件的绝对路径"><a href="#获取shell脚本文件的绝对路径" class="headerlink" title="获取shell脚本文件的绝对路径"></a>获取shell脚本文件的绝对路径</h2><p>basepath=$(cd <code>dirname $0</code>; pwd)<br>echo “sh脚本文件的绝对路径：$basepath”</p>
<h2 id="当前执行脚本的路径"><a href="#当前执行脚本的路径" class="headerlink" title="当前执行脚本的路径"></a>当前执行脚本的路径</h2><p>echo “当前执行脚本的路径也是cd路径打印方法:”<code>pwd</code><br>echo “当前cd的目录名：”<code>basename $(pwd)</code></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/04/开源库/RxSwift应用登录验证/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/04/开源库/RxSwift应用登录验证/" class="post-title-link" itemprop="url">RxSwift应用登录验证</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-04 09:04:35" itemprop="dateCreated datePublished" datetime="2018-10-04T09:04:35Z">2018-10-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-06 14:50:13" itemprop="dateModified" datetime="2018-10-06T14:50:13Z">2018-10-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/开源库/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/04/开源库/RxSwift应用登录验证/" class="leancloud_visitors" data-flag-title="RxSwift应用登录验证">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><!--github库卡片-->
<div id="badge-container-huos3203-SimpleValidation-fb7a58b" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-huos3203-SimpleValidation-fb7a58b", "huos3203", "SimpleValidation", "fb7a58b", false);
</script>

<!--音乐欣赏--> 

    <div id="aplayer-jRXXWKQz" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="0036mZ7Q1pk7st" data-server="tencent" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div>
<h2 id="使用RxSwift的优点"><a href="#使用RxSwift的优点" class="headerlink" title="使用RxSwift的优点"></a>使用RxSwift的优点</h2><p>RxSwift的目的是让让数据/事件流和异步任务能够更方便的序列化处理，能够使用swift进行响应式编程</p>
<p>这是一个模拟用户登录的程序。</p>
<h2 id="功能点"><a href="#功能点" class="headerlink" title="功能点"></a>功能点</h2><ol>
<li>当用户输入用户名时，如果用户名不足 5 个字就给出红色提示语，并且无法输入密码，当用户名符合要求时才可以输入密码。</li>
<li>同样的当用户输入的密码不到 5 个字时也给出红色提示语。</li>
<li>当用户名和密码有一个不符合要求时底部的绿色按钮不可点击，只有当用户名和密码同时有效时按钮才可点击。</li>
<li>当点击绿色按钮后弹出一个提示框，这个提示框只是用来做演示而已。<h3 id="share-replay-1-是用来做什么的？"><a href="#share-replay-1-是用来做什么的？" class="headerlink" title="share(replay: 1)是用来做什么的？"></a><code>share(replay: 1)</code>是用来做什么的？</h3>我们用 <code>usernameValid</code> 来控制用户名提示语是否隐藏以及密码输入框是否可用。<a href="https://beeth0ven.github.io/RxSwift-Chinese-Documentation/content/rxswift_core/operator/shareReplay.md" target="_blank" rel="noopener">shareReplay</a> 就是让他们共享这一个源，而不是为他们单独创建新的源。这样可以减少不必要的开支。</li>
</ol>
<p>第一个观察者<code>passwordOutlet.rx_enabled</code>订阅<code>usernameValid</code>时，调用<code>map</code>里的<code>print</code>函数，第二个观察者在订阅时(没有添加<code>.shareReplay(1)</code>)时，又再次调用<code>map</code>里的<code>print</code>函数，以此类推，如果有很多观察者的话就要调用很多次，而从第二个观察者开始需要的只是<code>map</code>返回的一个序列，而不是让其徒劳地调用<code>map</code>里的函数，那么怎样解决在多个观察者订阅时多次重复调用执行的问题？<br>使用<code>shareReplay(bufferSize: Int)</code>就ok了。<br><code>shareReplay</code>会返回一个新的事件序列，它监听底层序列(这里指的是map返回的序列)的事件，并且通知自己的订阅者们。不过和传统的订阅不同的是，它是通过『重播』的方式通知自己的订阅者，因此在这里通过<code>shareReplay</code>订阅的<code>map</code>并不会调用多次。<br>// 参数bufferSize指的是重播的最大元素个数，因为usernameValid是一个只有一个元素的序列observable，因此shareReplay参数为1；假如对于一个有5个元素的序列，你只需要重复播报最后3个，那么就写成.shareReplay(3)，就酱紫。</p>
<h3 id="disposed-by-disposeBag-是用来做什么的？"><a href="#disposed-by-disposeBag-是用来做什么的？" class="headerlink" title="disposed(by: disposeBag) 是用来做什么的？"></a><code>disposed(by: disposeBag)</code> 是用来做什么的？</h3><p>和我们所熟悉的对象一样，每一个绑定也是有生命周期的。并且这个绑定是可以被清除的。<code>disposed(by: disposeBag)</code>就是将绑定的生命周期交给 <code>disposeBag</code> 来管理。当 <code>disposeBag</code> 被释放的时候，那么里面尚未清除的绑定也就被清除了。这就相当于是在用 <code>ARC</code> 来管理绑定的生命周期。 这个内容会在 <a href="https://beeth0ven.github.io/RxSwift-Chinese-Documentation/content/rxswift_core/disposable.html" target="_blank" rel="noopener">Disposable</a> 章节详细介绍。</p>
<h3 id="bindTO-简单使用"><a href="#bindTO-简单使用" class="headerlink" title="bindTO 简单使用"></a>bindTO 简单使用</h3><p>我的理解就是将已经信号源去用一个<code>UIBindingObserver</code>去接受,当接收到的属性是<code>true</code>进行相应的操作<br>为登录按钮写一个rx_click的拓展<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">///首先写一个UIBindingObserver</span><br><span class="line">var rx_click:AnyObserver&lt;Bool&gt; &#123;</span><br><span class="line">return UIBindingObserver.init(UIElement: self, binding: &#123; (lab, result) in</span><br><span class="line">lab.backgroundColor = result ? UIColor.blue:UIColor.gray</span><br><span class="line">&#125;).asObserver()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//*bindto 信号合并处理  bindto发送信号</span><br><span class="line">//              combineLatest(合并信号)                       bind(订阅)</span><br><span class="line">//   observer -----------------------&gt;处理信号时间-------------&gt;处理信号</span><br><span class="line">///然后手机号11位 验证码 6位就可以用这一行代码解决</span><br><span class="line">let _ = Observable.combineLatest(phoneobser, passobserver, resultSelector: &#123;</span><br><span class="line">$0 &amp;&amp; $1</span><br><span class="line">&#125;).bind(to: canclik.rx_click)</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/04/hexo/自动初始化Gitalk和Gitment评论/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/04/hexo/自动初始化Gitalk和Gitment评论/" class="post-title-link" itemprop="url">自动初始化Gitalk和Gitment评论</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-03 16:16:25 / 修改时间：16:55:41" itemprop="dateCreated datePublished" datetime="2018-10-03T16:16:25Z">2018-10-03</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/04/hexo/自动初始化Gitalk和Gitment评论/" class="leancloud_visitors" data-flag-title="自动初始化Gitalk和Gitment评论">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">61</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="https://www.jianshu.com/p/9be29ed2f4b7" target="_blank" rel="noopener">Hexo添加Gitalk评论插件</a><br><a href="https://draveness.me/git-comments-initialize" target="_blank" rel="noopener">自动初始化 Gitalk 和 Gitment 评论</a><br><a href="https://madordie.github.io/post/blog-gitment-auto-setup/" target="_blank" rel="noopener">Gitment/Gitalk自动初始化</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/03/hexo/Heroku部署web服务器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/03/hexo/Heroku部署web服务器/" class="post-title-link" itemprop="url">Heroku部署web服务器</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-03 12:29:51" itemprop="dateCreated datePublished" datetime="2018-10-03T12:29:51Z">2018-10-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-18 18:39:22" itemprop="dateModified" datetime="2018-10-18T18:39:22Z">2018-10-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/03/hexo/Heroku部署web服务器/" class="leancloud_visitors" data-flag-title="Heroku部署web服务器">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" target="_blank" rel="noopener">安装Heroku CLI工具</a><br>Mac端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install heroku/brew/heroku</span><br></pre></td></tr></table></figure></p>
<p><a href="https://devcenter.heroku.com/articles/heroku-cli-commands" target="_blank" rel="noopener">Heroku CLI 命令</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">heroku -h</span><br><span class="line">heroku login</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p><a href="https://devcenter.heroku.com/articles/creating-apps" target="_blank" rel="noopener">Creating Apps from the CLI</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir example</span><br><span class="line">$ cd example</span><br><span class="line">$ git init</span><br><span class="line">$ heroku apps:create example</span><br><span class="line">Creating ⬢ example... done</span><br><span class="line">https://example.herokuapp.com/ | https://git.heroku.com/example.git</span><br><span class="line">Git remote heroku added</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://devcenter.heroku.com/articles/heroku-cli-commands#heroku-apps-info" target="_blank" rel="noopener">查看现有APP信息</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">heroku apps      //所有应用列表</span><br><span class="line">heroku apps:info //查看所有应用的详细信息</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://devcenter.heroku.com/articles/heroku-cli-commands#heroku-apps-open-path" target="_blank" rel="noopener">在浏览器中访问APP页面</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">USAGE</span><br><span class="line">$ heroku apps:open [PATH]</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">-a, --app=app        (required) app to run command against</span><br><span class="line">-r, --remote=remote  git remote of app to use</span><br><span class="line"></span><br><span class="line">EXAMPLES</span><br><span class="line">$ heroku open -a myapp</span><br><span class="line"># opens https://myapp.herokuapp.com</span><br><span class="line"></span><br><span class="line">$ heroku open -a myapp /foo</span><br><span class="line"># opens https://myapp.herokuapp.com/foo</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="用例：在heroku上部署gh-oauth-server服务"><a href="#用例：在heroku上部署gh-oauth-server服务" class="headerlink" title="用例：在heroku上部署gh-oauth-server服务"></a>用例：在heroku上部署<code>gh-oauth-server</code>服务</h2><p><a href="https://github.com/imsun/gitment/issues/170" target="_blank" rel="noopener">issues:object ProgressEvent</a><br>下载服务器源代码<a href="https://github.com/imsun/gh-oauth-server" target="_blank" rel="noopener">gh-oauth-server</a> ,由于是<code>nodejs</code>写的所以需要安装<code>nodejs</code>环境 如何安装自己Google; 然后<code>git clone</code> 该项目并进入目录, 执行<code>npm install</code> 安装依赖, 依赖安装成功后执行<code>npm start</code>, 如果输出<code>start on port 300</code>表示开启成功,;为了支持<code>ssl</code> 可以安装<code>nginx代理</code>, 这个可以自己百度, 有很多教程的.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/imsun/gh-oauth-server</span><br><span class="line">cd gh-oauth-server</span><br><span class="line">heroku create gitment-hexo   //创建herokua应用</span><br><span class="line">git push heroku master       //会自动安装package.json依赖库。</span><br><span class="line">heroku open -a gitment-hexo  //浏览器打开</span><br></pre></td></tr></table></figure></p>
<h2 id="进入heroku服务器命令行"><a href="#进入heroku服务器命令行" class="headerlink" title="进入heroku服务器命令行"></a>进入heroku服务器命令行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$heroku run bash</span><br><span class="line">Running `bash` attached to terminal... up, run.3052</span><br><span class="line">~ $ ls</span><br><span class="line">Procfile  README.md  composer.json  composer.lock  vendor  views  web</span><br><span class="line">~ $ exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#prepare-the-app" target="_blank" rel="noopener">Getting Started on Heroku with Node.js</a><br><a href="https://devcenter.heroku.com/articles/preparing-a-codebase-for-heroku-deployment" target="_blank" rel="noopener">把已经存在的应用部署到heroku上</a>learn how to prepare it for Heroku deployment.</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/03/hexo/hexo集成gitment评论系统/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/03/hexo/hexo集成gitment评论系统/" class="post-title-link" itemprop="url">hexo集成gitment评论系统</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-03 00:54:35" itemprop="dateCreated datePublished" datetime="2018-10-03T00:54:35Z">2018-10-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-04 09:04:35" itemprop="dateModified" datetime="2018-10-04T09:04:35Z">2018-10-04</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/03/hexo/hexo集成gitment评论系统/" class="leancloud_visitors" data-flag-title="hexo集成gitment评论系统">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h3 id="安装gitment"><a href="#安装gitment" class="headerlink" title="安装gitment"></a>安装<code>gitment</code></h3><p>在<code>package.json</code>文件添加gitment依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;gitment&quot;: &quot;^0.0.3&quot;</span><br></pre></td></tr></table></figure></p>
<p>安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></p>
<h3 id="申请应用"><a href="#申请应用" class="headerlink" title="申请应用"></a>申请应用</h3><p>首先去<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">New OAuth App</a>为你的博客应用一个密钥:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Application name:随便写</span><br><span class="line">Homepage URL:这个也可以随意写,就写你的博客地址就行</span><br><span class="line">Application description:描述,也可以随意写</span><br><span class="line">Authorization callback URL:这个必须写你的博客地址</span><br></pre></td></tr></table></figure></p>
<p>申请好之后点注册,然后就可以看到两个东西ClientID和Client Secret,后面会用到.</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>下面就是配置<code>Gitment</code>,主要编辑在<code>themes/next/_config.yml</code>:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Gitment</span><br><span class="line"># Introduction: https://imsun.net/posts/gitment-introduction/</span><br><span class="line">gitment:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    mint: true # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span><br><span class="line">    count: true # Show comments count in post meta area</span><br><span class="line">    lazy: false # Comments lazy loading with a button</span><br><span class="line">    cleanly: false # Hide 'Powered by ...' on footer, and more</span><br><span class="line">    language: # Force language, or auto switch by theme</span><br><span class="line">    github_user: &#123;you github user id&#125;</span><br><span class="line">    github_repo: 随便写一个你的公开的git仓库就行,到时候评论会作为那个项目的issue</span><br><span class="line">    client_id: &#123;刚才申请的ClientID&#125;</span><br><span class="line">    client_secret: &#123;刚才申请的Client Secret&#125;</span><br><span class="line">    proxy_gateway: # Address of api proxy, See: https://github.com/aimingoo/intersect</span><br><span class="line">    redirect_protocol: # Protocol of redirect_uri with force_redirect_protocol when mint enabled</span><br></pre></td></tr></table></figure></p>
<h3 id="开通评论"><a href="#开通评论" class="headerlink" title="开通评论"></a>开通评论</h3><p>注意到这里基本上已经OK了,再看你的博客应该可以显示评论了.不过每篇博客都需要你手动初始化评论功能(如果你的历史博客很多那就一篇一篇去点吧，不过貌似有人写了批量处理脚本,没试过哈).</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p><a href="https://github.com/imsun/gitment/issues/170" target="_blank" rel="noopener">object ProgressEvent</a><br>由于引入的 gitment.js 中有这样的一段代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_utils.http.post(<span class="string">'https://gh-oauth.imsun.net'</span>, &#123;</span><br><span class="line">        code: code,</span><br><span class="line">        client_id: client_id,</span><br><span class="line">        client_secret: client_secret</span><br><span class="line">    &#125;, <span class="string">''</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        _this.accessToken = data.access_token;</span><br><span class="line">        _this.update();</span><br><span class="line">    &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        _this.state.user.isLoggingIn = <span class="literal">false</span>;</span><br><span class="line">        alert(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>请求了一个服务接口，由于这个跨域服务接口是作者自己搭建的，已经停止了。<br>有博主 fork 源作者的 repo ，在这个基础上改的，修改了一些地方接入自己通用的服务<a href="https://github.com/jjeejj/CORS-Proxy-Server" target="_blank" rel="noopener">CORS-Proxy-Server</a>.<br>现在直接把这个文件 <code>https://imsun.github.io/gitment/dist/gitment.browser.js</code> 替换为 <code>https://www.wenjunjiang.win/js/gitment.js</code> 就可以了.<br>原理：<br>hexo 这个评论接了一个自己写的一个通用的跨域服务 <code>https://cors.wenjunjiang.win/</code> github地址为：<code>https://github.com/jjeejj/CORS-Proxy-Server</code>，代替作者的 <code>https://gh-oauth.imsun.net</code> 这个接口地址，去请求 github的接口。 可以自己搭建，可以转发所有的前端跨域服务。要注意的是： 在向 github 请求 <code>access_token</code>时 需要带上<code>Accept: application/json</code> 或者<code>Accept: application/xml</code>请求头， 否则回报 406 的错误.</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://www.wenjunjiang.win/2017/07/02/gitment%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97%E6%8E%A5%E5%85%A5hexo/" target="_blank" rel="noopener">gitment评论模块接入hexo</a><br><a href="https://xiaotiandi.github.io/publicBlog/2018-09-19-d196c9ad.html" target="_blank" rel="noopener">hexo博客配置-添加评论系统-gitment和valine-需注册</a><br><a href="https://imsun.net/posts/gitment-introduction/" target="_blank" rel="noopener">Gitment：使用 GitHub Issues 搭建评论系统</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/03/调试/Instrument使用Signposts工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/03/调试/Instrument使用Signposts工具/" class="post-title-link" itemprop="url">Instrument使用Signposts工具</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-02 23:19:55" itemprop="dateCreated datePublished" datetime="2018-10-02T23:19:55Z">2018-10-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-15 15:21:53" itemprop="dateModified" datetime="2018-10-15T15:21:53Z">2018-10-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/调试/" itemprop="url" rel="index"><span itemprop="name">调试</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/03/调试/Instrument使用Signposts工具/" class="leancloud_visitors" data-flag-title="Instrument使用Signposts工具">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">9.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>性能是实现卓越的用户体验的关键之一。当应用或者游戏表现的运行迅速，反应灵敏时，用户会更喜欢。但是软件是很复杂的，当你的应用视图做某事时，例如只是点了一个按钮，但程序也有可能做了很多的事情，这就意味着你可以在一些看似不太可能的地方找到一些优化点。但这样做，挖掘性能的优化点，有时就需要深入理解你的程序正在做些什么。它需要您知道代码什么时候执行的，以及特定的操作需要多长时间。所以这就体验出来了有一个好的测试工具是多么的重要。</p>
<p>我们知道开发更好的工具，并让开发者使用这些工具，是我们帮助您成为更高效的开发人员的方法之一。所以今天我们要谈谈其中的一个工具——<code>Signposts</code>（路标）。</p>
<h2 id="介绍Signposts及历史"><a href="#介绍Signposts及历史" class="headerlink" title="介绍Signposts及历史"></a>介绍Signposts及历史</h2><p><code>Signposts</code>是<code>OSLog</code>家族的新成员，我们正准备让它支持<code>iOS</code>和<code>macOs</code>。您可以在swift和C中使用它们，但最酷的是我们把它和<code>Instruments</code>集成在了一起。这就意味着<code>Instruments</code>可以获取<code>Signposts</code>所产生的数据，并且让深入你理解你的程序正在做什么。</p>
<p>首先要介绍一点历史，几年前我们介绍了<code>OSLog</code>。这是我们现代化的呈现日志记录的工具。这是我们从系统中获取调试信息的方法。它是在我们“效率”、“隐私”的目标下完成的。具体了解，请查看<a href="https://developer.apple.com/videos/play/wwdc2016/721/" target="_blank" rel="noopener">WWDC 2016 Unified Logging and Activity Tracing</a>。</p>
<p>这里你可以看到一个<code>OSLog</code>的例子，创建一个简单的日志句柄，并且像它发送了一个Hello world。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let logHandle = OSLog(subsystem: &quot;com.example.widget&quot;, category: &quot;Setup&quot;)</span><br><span class="line">os_log(.info, log: logHandle, &quot;Hello, %&#123;public&#125;s!&quot;, world)</span><br></pre></td></tr></table></figure></p>
<p><code>Signposts</code>扩展了<code>OSLogAPI</code>，但它们是为性能用例而做的。这意味着它们正在传达与性能相关的信息，并且它们与我们的开发工具集成在一起，您可以使用<code>Signposts</code>对代码进行标注，然后启动<code>Instruments</code>查看类似的内容。因此，<code>Instruments</code>向您展示了您的程序正在做的事情的可视化时间轴，以及<code>Signposts</code>展示在上面。然后底部有个表，统计汇总和分析<code>Signposts</code>数据，数据分成一块一块的，可以让您看到程序到底做了些什么。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/1.jpg" alt><br>在文章中，我将谈谈如何在您的代码中使用<code>Signposts</code>，以及展示一下他们的作用。然后展示<code>Instruments</code>中<code>Signposts</code>的可视化界面，让您了解<code>Instruments</code>和<code>Signpost</code>是如何协同工作的。</p>
<h2 id="使用Signposts"><a href="#使用Signposts" class="headerlink" title="使用Signposts"></a>使用Signposts</h2><ol>
<li><code>Siginposts</code>的两个函数:<code>os_signpost(.begin, ...)</code>和<code>os_signpost(.end, ...)</code>.</li>
<li>日志句柄:<code>日志句柄</code>需要两个参数一个是<code>子系统</code>，一个是<code>类别</code>.<br>让我们从一个非常基础的例子开始。想象一下这是你的应用。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/2.jpg" alt><br>你要研究的就是一个接口特定部分刷新所需要的时间。你知道你需要加载一些图片并在屏幕上展示。所以，在这个简单、抽象的视图中，可能你需要做的就是获取图片资源。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/3.jpg" alt><br>所有操作完成后，界面会刷新。<code>Signposts</code>允许我们在一系列工作的<code>开始</code>和<code>结尾</code>进行标记，然后将这两个时间点关联起来，同时这两个日志事件也会互相关联。这就需要调用<code>Siginposts</code>的两个函数。<code>os_signpost(.begin, ...)</code>和<code>os_signpost(.end, ...)</code>。图中<code>b</code>箭头代表开始，<code>e</code>箭头代表结束。然后我们将这两个时间点互相关联，让您了解这一段经过的时间。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/4.jpg" alt><br>在代码中，有一个简单的算法实现，对于我们接口中的每个元素，我们将获取该资源，这正是我们想要去测量的。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> panel.elements &#123;</span><br><span class="line">    fetchAsset(<span class="keyword">for</span>: element)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>因此，为了将<code>Signposts</code>代码加入到基本的代码中，我们需要导入<code>import os</code>模块，然后由于<code>Siginposts</code>是<code>OSLog</code>的一部分，所以我们需要创建一个<code>日志句柄</code>。这个<code>日志句柄</code>需要两个参数一个是<code>子系统</code>，一个是<code>类别</code>。</p>
<ul>
<li>子系统: 在整个项目中可能都是相同的，它看起来很像您的app的包名。它代表了组件或者软件，或者是您正在使用的框架。</li>
<li>类别: 用于关联，将相关的操作或者<code>Signposts</code>绑定在一起。之后我们会讲到这么做的好处。</li>
</ul>
<p>当我们拥有了日志句柄，我们只需要调用<code>Siginposts</code>的<code>.begin</code>和<code>.end</code>两个函数即可。参数中，我们将日志句柄传递过去，然后再传递一个<code>Signpost</code>的名字。名字是一个字符串，用来标识我们感兴趣的操作的时间间隔。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os.signpost</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> refreshLog = <span class="type">OSLog</span>(subsystem: <span class="string">"com.example.your-app"</span>, category: <span class="string">"RefreshOperations"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> panel.elements &#123;</span><br><span class="line">    os_signpost(.begin, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">    fetchAsset(<span class="keyword">for</span>: element)</span><br><span class="line">    os_signpost(.end, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/5.jpg" alt><br>所以返回之前的时间轴，它就变成了这个样子。在每次开始、结束获取资源时，我们都添加了一个<code>路标</code>。因为在开始和结束的路标的标识一样，所以我们可以将他们两者匹配在一起。但是，如果我们还想要测试整个操作的全部时间，整个刷新过程是怎样的，该如何去做呢？我们在代码中，只需要再添加一对新路标即可（新的名字）。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os.signpost</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> refreshLog = <span class="type">OSLog</span>(subsystem: <span class="string">"com.example.your-app"</span>, category: <span class="string">"RefreshOperations"</span>)</span><br><span class="line"></span><br><span class="line">os_signpost(.begin, log: refreshLog, name: <span class="string">"Refresh Panel"</span>)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> panel.elements &#123;</span><br><span class="line">    os_signpost(.begin, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">    fetchAsset(<span class="keyword">for</span>: element)</span><br><span class="line">    os_signpost(.end, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">&#125;</span><br><span class="line">os_signpost(.end, log: refreshLog, name: <span class="string">"Refresh Panel"</span>)</span><br></pre></td></tr></table></figure></p>
<p>这时，我们的时间轴又发生了变化。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/6.jpg" alt></p>
<h3 id="异步用例：测量异步任务的时间"><a href="#异步用例：测量异步任务的时间" class="headerlink" title="异步用例：测量异步任务的时间"></a>异步用例：测量异步任务的时间</h3><ol>
<li><code>Signpost IDs</code>路标ID:区分重叠时间间隔的方法，将告诉系统哪些是相同类型的操作，但每个操作彼此不同。</li>
<li>上面是一个很简单的例子。如果你的应用顺序执行第一步、第二步、第三步等等，那么这样测量是非常有效的。但是我们会经常用到一些异步的工作，他们可能同时发生，他们之间也可能会有重叠或者交叉。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/7.jpg" alt><br>在这种情况下，我们需要向系统提供一些额外的信息，以便系统可以将这些路标彼此区分开来。到现在为止，我们在调用方法的时候只用到了名字，通过名字将相同路标的绑定在一起。名字已经确定了时间间隔，但是没有给我们一种区分重叠时间间隔的方法，所以在这里引入了<code>Signpost IDs</code>。路标ID将告诉系统哪些是相同类型的操作，但每个操作彼此不同。在路标开始和结尾传递相同的id，则系统知道这两个是关联的。你可以通过日志句柄来得到一个路标ID。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> spid = <span class="type">OSSignpostID</span>(log: refreshLog)</span><br><span class="line">os_signpost(.begin, log: refreshLog, name: <span class="string">"Fetch Asset"</span>, signpostID: spid)</span><br><span class="line"><span class="comment">//  some code or even async...</span></span><br><span class="line">os_signpost(.end, log: refreshLog, name: <span class="string">"Fetch Asset"</span>, signpostID: spid)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>同样你也可以通过一个对象来得到<code>日志句柄</code>。如果你有一些对象代表您正在尝试的工作，只要您使用该对象实例就会生成相同的路标ID。这就意味着您不用去存放路标ID，只需要通过对象去管理ID就好了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let spid = OSSignpostID(log: refreshLog, object: element)</span><br></pre></td></tr></table></figure></p>
<p>在视觉上，您可以将路标ID视为允许我们向每一个路标调用传递一些额外的上下文，这可以将特定操作的开始和结束标记互相关联。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/8.jpg" alt><br>这很重要，因为这些操作不仅仅可以重叠，而且通常他们需要的时间也不同。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/9.jpg" alt><br>我们现在把示例中的<code>fetchAsset</code>从同步调用改为异步调用。并且由于是异步的，这些时间间隔可能会相互重叠，所以我们还要在创建路标时加上路标ID。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> refreshLog = <span class="type">OSLog</span>(subsystem: <span class="string">"com.example.your-app"</span>, category: <span class="string">"RefreshOperations"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> spidForRefresh = <span class="type">OSSignpostID</span>(log: refreshLog)</span><br><span class="line">os_signpost(.begin, log: refreshLog, name: <span class="string">"Refresh Panel"</span>, signpostID: spidForRefresh)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> panel.elements &#123;</span><br><span class="line">    <span class="comment">//通过对象去创建路标ID</span></span><br><span class="line">    <span class="keyword">let</span> spid = <span class="type">OSSignpostID</span>(log: refreshLog, object: element)</span><br><span class="line">    <span class="comment">//通过ID去记录一个路标</span></span><br><span class="line">    os_signpost(.begin, log: refreshLog, name: <span class="string">"Fetch Asset"</span>, signpostID:spid)    </span><br><span class="line">    fetchAssetAsync(<span class="keyword">for</span>: element) &#123;</span><br><span class="line">        <span class="comment">//每一个完成之后的回调</span></span><br><span class="line">        os_signpost(.end, log: refreshLog, name: <span class="string">"Fetch Asset"</span>, signpostID: spid)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  全部完成完成的回调</span></span><br><span class="line">notifyWhenDone &#123;</span><br><span class="line">    os_signpost(.end, log: refreshLog, name: <span class="string">"Refresh Panel"</span>, signpostID: spidForRefresh)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样就完成了，您可以将<code>Signposts</code>视为一种分类或等级制度。所有的操作都通过日志句柄相关联，这意味着日志分类。然后对我们感兴趣的每个操作，我们给它一个路标名字，如果可能有重叠，我们在给他们<code>路标ID</code>，告诉系统虽然名字相同了，但是我希望通过ID区分。</p>
<p>这个接口设计的特别灵活，所以你可以控制起始点和结束点的所有参数，日志句柄，路标名字及ID。只要传递的参数是一致的，起始点与结束点就可以对应上，即便他们写在了不同的方法或者文件中。我们之所以这样做是因为希望您能够将它应用到实际开发中。</p>
<h3 id="在Signposts中添加元数据"><a href="#在Signposts中添加元数据" class="headerlink" title="在Signposts中添加元数据"></a>在Signposts中添加元数据</h3><p>您可能希望在路标中传达一些额外的信息，额外的性能相关的信息。很巧，我们有一个方法来为路标添加元数据。下面是一个基本的路标。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os_signpost(.begin, log: log, name: <span class="string">"Compute Physics"</span>)</span><br></pre></td></tr></table></figure></p>
<p>我们可以添加一个额外的<code>字符串</code>（OSLog格式化的）参数。这允许您向开始点与结束点添加一些上下文。我们可以通过<code>%d</code>来传递<code>整数</code>。当然也可以传递<code>其他的格式化类型</code>的参数。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os_signpost(.begin, log: log, name: <span class="string">"Compute Physics"</span>, <span class="string">"%d %d %d %d"</span>,x1, y1, x2, y2)</span><br><span class="line">os_signpost(.begin, log: log, name: <span class="string">"Compute Physics"</span>,<span class="string">"%&#123;public&#125;s %.1f %.1f %.2f %.1f %.1f"</span>, description, x1, y1, m, x2, y2)</span><br></pre></td></tr></table></figure></p>
<p>至于字符串的长度，不用担心，您可以自由、随意的使用。该字符串也会全部渲染到Instruments的界面中，或者仍然可以在程序中访问附加的数据。</p>
<h3 id="添加独立事件"><a href="#添加独立事件" class="headerlink" title="添加独立事件"></a>添加独立事件</h3><p>除了元数据之外，您可能还希望及时添加单独的时间点。这就表示，除了开始的路标以及结尾的路标外，你可能还有一个路标，该路标没有连接到特定的时间间隔，而是一些固定的时刻。为此，我们提供了一个带有事件类型的路标。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/10.jpg" alt><br>用法与设置开始、结束的路标类似，只不过它标识一个单一的时间点。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os_signpost(.event, log: log, name: <span class="string">"Fetch Asset"</span>, <span class="string">"Fetched first chunk, size %u"</span>, size)</span><br><span class="line">os_signpost(.event, log: log, name: <span class="string">"Swipe"</span>, <span class="string">"For action 0x%x"</span>, actionCode)</span><br></pre></td></tr></table></figure></p>
<p>您可以在间隔的上下文中使用该方法，或者一些您想追踪的与用户交互无关等时间间隔无关的内容。如果您真的在调查一个性能上的问题，您可能会大量使用它。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/11.jpg" alt></p>
<h2 id="有条件启动Signposts"><a href="#有条件启动Signposts" class="headerlink" title="有条件启动Signposts"></a>有条件启动Signposts</h2><ol>
<li>路标通常默认是开启<br>如果你启用了一些路标，那么他们通常默认是开启的，但我想谈谈有条件的打开和关闭它们。首先我要强调一下，路标是轻量级的。这说明我们已经做了很多优化。我们通过编译器优化来完成这些工作，这些优化在编译时就做了，而不是在运行时完成的。我们还推迟了很多工作，以便他们在Instruments后端完成。这意味着路标应该占用很少的系统资源。我们之所有这样做是因为我们希望尽量减少对您代码的影响。我们也做到了这一点，因为我们确保即使您的时间跨度非常小，也可以发出许多路标来获取一些细粒度的测量结果。</li>
<li>关闭路标<br>但您可能希望能够关闭路标。要做到一这点，我们将利用<code>OSLog</code>的功能，即禁用的<code>日志句柄</code>。禁用的<code>日志句柄</code>也是一个简单的句柄。它的作用是针对该句柄进行的每个<code>OSLog</code>和<code>os_signpost</code>调用都会几乎会变为无操作。事实上，如果你在C中采用这个，我们甚至会对你进行检查，然后我们甚至不会评估其余的参数。所以你可以在运行时更改这个句柄。</li>
</ol>
<p>举个例子，让我们回到第一个示例的代码上。我以一个环境变量作为条件，来初始化。如果包含该变量，那么使用普通的<code>os日志构造函数</code>；如果不包含，那么将使用禁用的<code>日志句柄</code>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> refreshLog: <span class="type">OSLog</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">ProcessInfo</span>.processInfo.environment.keys.<span class="built_in">contains</span>(<span class="string">"SIGNPOSTS_FOR_REFRESH"</span>) &#123;</span><br><span class="line">    refreshLog = <span class="type">OSLog</span>(subsystem: <span class="string">"com.example.your-app"</span>, category: <span class="string">"RefreshOperations"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    refreshLog = .disabled</span><br><span class="line">&#125;</span><br><span class="line">os_signpost(.begin, log: refreshLog, name: <span class="string">"Refresh Panel"</span>)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> panel.elements &#123;</span><br><span class="line">    os_signpost(.begin, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">    fetchAsset(<span class="keyword">for</span>: element)</span><br><span class="line">    os_signpost(.end, log: refreshLog, name: <span class="string">"Fetch Asset"</span>)</span><br><span class="line">&#125;</span><br><span class="line">os_signpost(.end, log: refreshLog, name: <span class="string">"Refresh Panel"</span>)</span><br></pre></td></tr></table></figure></p>
<p><code>环境变量</code>是您在调试程序时可以在<code>Xcode scheme</code>中设置的内容。现在我说你不必在调用中进行更改，但这种方式相当昂贵并且只适用于调试时。因此如果您有一些基于<code>Instruments</code>的特定的功能，你可以检查特定的<code>日志句柄</code>，查看它是否打开了<code>siginposts enabled</code>属性。然后试用该属性来控制添加该附加操作。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> refreshLog.signpostsEnabled &#123;</span><br><span class="line">    <span class="keyword">let</span> information = copyDescription() os_signpost(..., information)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="C语言中的Signposts"><a href="#C语言中的Signposts" class="headerlink" title="C语言中的Signposts"></a>C语言中的Signposts</h2><p>上面我们所有示例都是swift的，但是C语言中也提供了路标。到目前为止，上述功能都是可用的：长句柄、使用不用的路标、以及管理路标标识符。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/12.jpg" alt><br>那些对C语言中使用路标感兴趣的人，推荐你们阅读头文件中的文档。文档中包含了所有信息，都是从C语言开发人员的角度考虑的。</p>
<h2 id="Instruments中使用路标"><a href="#Instruments中使用路标" class="headerlink" title="Instruments中使用路标"></a>Instruments中使用路标</h2><p>现在介绍完如何在代码中应用<code>路标</code>，接下来很开心为大家介绍<code>路标</code>和<code>Instruments</code>是如何在一起工作的。向大家展示<code>Instruments 10</code>中三个重要的新功能，来帮助您使用路标数据。</p>
<ul>
<li>路标工具:该工具允许您记录、查看和分析应用程序中所有的路标活动。</li>
<li>兴趣点:谈谈什么是兴趣点，以及何时您要设置一个兴趣点</li>
<li>自定义工具: 介绍新的自定义工具，以及如何将它与路标一起使用，以获得更精致的路标展示。<h3 id="路标"><a href="#路标" class="headerlink" title="路标"></a>路标</h3>接下来就看下例子吧。示例的app名叫开拓者，主要是展示一些风景。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/13.jpg" alt><br>当我们滚动时，最初展示一个白色的背景，当图片下载完之后，会填充到白色背景区域。这是一种常见的设计，尽管这样设计可以提升一些用户体验，但很难分析它的性能，因为在这个过程中进行了很多异步的活动。如果用户快速滚动，那么有可能出现某个单元格还没有下载完毕之前，就已经要被重用了，那么就必须取消下载。如果不取消的话，可能会有几个并行下载，而展示出来的图也不一定是我们想要的（图和标题不对应）。接下来看看如何通过路标来分析这个应用吧。<br>首先，在每个单元格中，有一个<code>startImageDownload</code>方法。当我们需要下载图片时会调用它，并传递要下载图片的名字。方法内部，有一个图片下载类，我们通过图片名字和设置自己为委托来初始化该类。在这种情况下，由于<code>downloader</code>对象代表正在进行的并发活动，因为下载是异步的，所以可以通过<code>downloader</code>来创建一个<code>路标ID</code>。接着在下载开始之前，调用<code>os_signpost(.begin，...)</code>方法，设置<code>日志句柄</code>、<code>名称</code>、<code>ID</code>、以及一些元数据。然后开始下载图片，并且将<code>downloader</code>设置为当前单元格正在运行的下载器。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/14.jpg" alt><br>图片下载完毕的回调中将图片展示到屏幕上，然后调用<code>os_siginpost(.end, ...</code>方法，设置<code>日志句柄</code>、<code>名称</code>、<code>ID</code>、以及一些元数据。您会注意到，我们用<code>xcode:size-in-bytes</code>注释了这个参数。它的作用是告诉<code>Xcode</code>和<code>Instruments</code>这个参数应该被视为展示和分析字节大小。这种被称作为<code>工程类型</code>。可以<code>Instruments</code>开发人员帮助文档中找到他们的详细介绍。最后，我们下载完毕了，将下载器设置为空。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/15.jpg" alt><br>当然下载除了成功以外，还有失败的情况，在单元格准备重用时，进行相关的路标设置。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/16.jpg" alt><br>设置完之后，就可以来进行分析了。打开Instruments后，可以选择一个空白的文档。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/17.jpg" alt><br>然后从右侧添加中选择os_signpost工具，并推动到轨迹中。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/18.jpg" alt><br>接下来就可以在app中操作了，一阵操作猛如虎之后，我们回到<code>Instruments</code>来看一下。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/20.jpg" alt><br>通过选择某一段时间，可以查看这段时间内的情况。我们可以看到左侧的路标名称<code>Background Image</code>，以及右侧的一些使用元数据来注释的时间段。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/19.jpg" alt><br>现在再缩小然后看看其他未知的追踪，我们注意到我们最多只有五个并行下载图片的任务，这是一件好事，证明我们取消了。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/21.jpg" alt><br>查看底部间隔的摘要，我们看到是按照类别、路标的名字、开始的消息和结束的消息来区分的。我们来看一共触发了93次的图片下载请求。其中location1触发了12次，7次取消，5次下载成功，下载成功时间共计3.04秒，3.31MB。并且可以查看每次请求时间的最小值、最大值和平均值。如果对某类数据感兴趣，可以点击进入查看详细内容。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/22.jpg" alt><br>如果要查看元数据相关的内容，可以进行筛选，然后查看数据。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/23.jpg" alt><br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/24.jpg" alt><br>这是一种很好的方式来查看您通过元数据传达的值的统计分析.<h3 id="兴趣点"><a href="#兴趣点" class="headerlink" title="兴趣点"></a>兴趣点</h3>接下里，我们看看<code>兴趣点</code>。回到应用，我们我们在主页点击一个单元格，就会进入详情页面。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/26.jpg" alt><br>如果现在我们每次都能追踪这些详情页面出现的时间就太好了，因为这样我们就可以知道用户正在做什么，并且我们知道用户在app中的哪个页面。当然可以通过路标完成这件事，但是你需要在<code>Instruments</code>中把它拖到轨迹中，并且记录所有的活动。这样有点淡化了导航事件的重要性。所以我们提供了兴趣点。</li>
</ul>
<p>点在我们在详情页面的代码中查看<code>viewDidAppear</code>方法，我们通过<code>os_signpost(.event, ...</code>来创建一个<code>路标事件</code>。这个事件要发送到我们创建的称之为<code>兴趣点</code>的<code>日志句柄</code>中。<code>类别</code>设置为<code>兴趣点</code>，这正是<code>Instruments</code>寻找的一个特殊类别。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/27.jpg" alt><br>我们回到再次打开<code>Instruments</code>选择时间分析，会发现自动有了兴趣点这一项。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/28.jpg" alt><br>然后开始录制，从首页进入详情页，选择不同的单元格反复执行，然后返回Instruments，就可以看到这些兴趣点了。<br><img src="https://raw.githubusercontent.com/kingsword/BlogSnapShot/master/WWDC%202018%20sessions/405/29.jpg" alt><br>因此您可以在看到用户在哪个页面，并且将其与其他性能数据相关联。</p>
<h2 id="自定义Instruments"><a href="#自定义Instruments" class="headerlink" title="自定义Instruments"></a>自定义Instruments</h2><p>视频中，具体没有讲如何创建，如果想了解如何创建的话，可以参考一下<a href="https://developer.apple.com/wwdc18/410" target="_blank" rel="noopener">WWDC 2018 Creating Custom Instruments</a>。<br><a href="https://developer.apple.com/videos/play/wwdc2018/405/" target="_blank" rel="noopener">WWDC 2018 session 405</a><br>转自<a href="https://blog.csdn.net/tugele/article/details/81252603" target="_blank" rel="noopener">使用日志记录来衡量性能</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/02/xcode/Xcode10新特性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/02/xcode/Xcode10新特性/" class="post-title-link" itemprop="url">Xcode10新特性</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-02 13:18:21" itemprop="dateCreated datePublished" datetime="2018-10-02T13:18:21Z">2018-10-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-03 16:55:41" itemprop="dateModified" datetime="2018-10-03T16:55:41Z">2018-10-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/xcode/" itemprop="url" rel="index"><span itemprop="name">xcode</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/02/xcode/Xcode10新特性/" class="leancloud_visitors" data-flag-title="Xcode10新特性">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p>Xcode 10<br>Xcode 10在macOS Mojave的黑暗模式下看起来非常棒，也让你很容易在macOS应用程序中采用新的外观。Xcode 10测试版包括Swift 4.2和beta sdk，适用于iOS 12、watchOS 5、tvOS 12和macOS Mojave。</p>
<h2 id="Dark模式界面和Mac程序支持"><a href="#Dark模式界面和Mac程序支持" class="headerlink" title="Dark模式界面和Mac程序支持"></a>Dark模式界面和Mac程序支持</h2><ul>
<li><p>全新的<code>dark</code>外观贯穿<code>Xcode</code>和<code>Instruments</code><br>在终端中输入命令，Xcode10开启dark mode:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dt.Xcode NSWindowDarkChocolate -bool true</span><br></pre></td></tr></table></figure>
<p>  使用低版本的macOS,使用此命令可能会造成Xcode interface损坏(测试系统 macOS High Sierra<br>  10.13.4),只能使用macOS Mojave 10.14+才能使用暗黑模式</p>
</li>
<li><p><code>Asset catalogs</code>为自定义<code>colors assets</code> 和 <code>image assets</code> 添加了深色和浅色变体，支持不同的图像与颜色assets的亮暗与高对比度表现。<br>支持CarPlay assets.<br>支持ARKit 3D ARReferenceObject assets.<br>Asset目录与视图调试器(view debugger)的背景可以被明确设定成亮或暗，这样前景的元素就会明显看出来。</p>
</li>
<li><code>Interface Builder</code>支持<code>dark</code>和<code>light</code>预览之间切换<br>调试您的Mac应用程序在黑暗或光明的变种，而不改变OS设置<h2 id="Source-Control"><a href="#Source-Control" class="headerlink" title="Source Control"></a>Source Control</h2></li>
</ul>
<ol>
<li>在共享服务器上的本地存储库或上游的更改直接在编辑器中突出显示。乍一看，你会发现:<br>修改代码。<ul>
<li>更改尚未推入共享存储库。</li>
<li>其他人已经做出了上游的改变。源编辑器(source editor)会显示出某个开发者做出的改变并展示其他开发者做出的还未添加到项目中的改变。</li>
<li>在承诺之前，你应该解决冲突。<br>支持Atlassian Bitbucket提供的云托管和自托管Git服务器，以及与现有GitHub支持一起使用的GitLab。<br>Xcode提供了在从存储库中提取最新版本的代码时重新设置更改的基础。<br>如果需要，将生成SSH密钥，并将其上载到服务提供者。<h2 id="编辑器的改进"><a href="#编辑器的改进" class="headerlink" title="编辑器的改进"></a>编辑器的改进</h2></li>
</ul>
</li>
</ol>
<ul>
<li>在代码编辑器中放置多个游标，以便同时进行许多更改。<br>Xcode 10 Source Editor现在支持多光标编辑，允许你快速同时编辑多范围的代码。你可以通过多种方式放置额外的光标，包括鼠标点击方式<code>⌃+⇧+Click</code>，或通过选择列<code>⌥+Click+Drag</code>，或通过键盘的<code>⌃+⇧+Up</code>选择上一列，或<code>⌃+⇧+Down</code>选择下一列。</li>
<li>代码折叠带现在可以隐藏任何被大括号包围的代码块。</li>
<li>Over-scroll功能可以方便地将屏幕中间的最后几行代码居中。</li>
<li>库(Library)内容从Inspector区的底部移动到了一个重叠窗口中，这个窗口可以移动或调整大小，就像Spotlight search一样。在拖动物品时它会解除，但在拖动前按住Option键，它就会为一个额外的拖动保持开启。<h2 id="Playgrounds支持机器学习"><a href="#Playgrounds支持机器学习" class="headerlink" title="Playgrounds支持机器学习"></a>Playgrounds支持机器学习</h2></li>
<li><code>REPL-like</code> model 立即重新运行您现有的playground代码。</li>
<li>代码运行到指定的行，或键入<code>shift-return</code>来运行刚刚添加的代码。</li>
<li>import<a href="https://developer.apple.com/machine-learning/build-a-model/" target="_blank" rel="noopener">Create ML  Framework</a>以交互式地培训新模型，然后在playground上编写代码的测试模型。完成后，将模型拖放到应用程序中。<h2 id="测试和调试"><a href="#测试和调试" class="headerlink" title="测试和调试"></a>测试和调试</h2></li>
<li><code>Debugging symbols</code>从新设备下载的速度比以前快了五倍。</li>
<li>Xcode将生成一组完全相同的模拟器，以充分利用多核Mac的优势，并通过风扇测试并行运行，以更快的速度完成测试套件。</li>
<li>以随机或线性顺序运行测试。</li>
<li>Instruments工具会自动显示添加到代码中的OSLog路标。</li>
<li>构建并共享您自己的定制<code>instruments package</code>，为您自己的代码提供独特的数据可视化和分析。</li>
<li><code>Memory</code>内存调试器使用紧凑的布局，以便更容易地研究内存图。</li>
<li><code>Metal shader</code>调试器允许您轻松地检查顶点、片段、计算和平铺着色器代码的执行。</li>
<li><code>Metal dependency viewer</code>可以预览在你的<code>Metal-based</code>应用程序中如何使用资源的详细图表。</li>
<li>Xcode的视图调试器添加了一个选项，可以选择亮暗canvas背景色。<br>你可以改变你macOS应用运行时的外观，通过使用<code>Debug &gt; View Debugging &gt; Appearance menu</code>，或调试栏中的<code>Override Appearance</code>菜单，或接触栏(touch bar)<br>检查器(inspector)中展示的已命名颜色在调试时会显示它们的名字以及它们是否为系统颜色。<h2 id="构建性能"><a href="#构建性能" class="headerlink" title="构建性能"></a>构建性能</h2></li>
<li><p>默认情况下启用<code>New build system</code>，改进了整个系统的性能。<br>Xcode 10使用了一个新的创建系统。新创建系统提供了更好的可靠性与创建性能，它可以获取项目配置问题，而legacy创建系统则不能。<br>Legacy创建系统在Xcode 10中依旧可用。要想使用的话，在File &gt; Project/Workspace Settings页选择它。为legacy创建系统配置过的项目会在Activity View显示一个橘黄锤子标签</p>
</li>
<li><p>Swift编译器构建每个单独的文件要快得多。</p>
</li>
<li>使用<code>incremental build setting</code>增量构建设置时，用于调试的大型Swift项目的构建速度要快得多。<br><a href="https://www.ithome.com.tw/news/123646" target="_blank" rel="noopener">《WWDC》Xcode 10也有暗黑模式，現在整合GitLab程式碼託管服務</a><br><a href="https://blog.csdn.net/u010960265/article/details/80630118" target="_blank" rel="noopener">Xcode10新功能新内容（Beta版下载链接）</a></li>
</ul>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/02/macOS/SPM搭建Perfect模版服务器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/02/macOS/SPM搭建Perfect模版服务器/" class="post-title-link" itemprop="url">SPM搭建Perfect模版服务器</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-02 11:13:35" itemprop="dateCreated datePublished" datetime="2018-10-02T11:13:35Z">2018-10-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-22 18:39:30" itemprop="dateModified" datetime="2018-10-22T18:39:30Z">2018-10-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/02/macOS/SPM搭建Perfect模版服务器/" class="leancloud_visitors" data-flag-title="SPM搭建Perfect模版服务器">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="Perfect简介"><a href="#Perfect简介" class="headerlink" title="Perfect简介"></a>Perfect简介</h2><div id="badge-container-PerfectlySoft-Perfect-60e44e4" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-PerfectlySoft-Perfect-60e44e4", "PerfectlySoft", "Perfect", "60e44e4", false);
</script>

<p>目前比较流行服务端框架主要有<code>Vapor</code>、<code>Perfect</code>、<code>Kitura</code>和<code>Zewo</code>，他们各有长短，本人这次主要是使用<code>Perfect</code>来写的，因为<code>Perfect</code>的功能比较完善，在GitHub上具有1W+的星，而且有一个非常重要的原因提供了<a href="https://github.com/PerfectlySoft/PerfectDocs/blob/master/README.zh_CN.md" target="_blank" rel="noopener">Perfect 中文文档</a>。</p>
<p><strong>Perfect</strong> 包括了您所期待的所有基本功能，包括<code>路由</code>、<code>websockets</code> 基于 HTTP 的网络套接字、<code>TLS</code>（SSL）通信加密、<code>Mustache</code> 模板和 <code>Markdown</code> 模板、<code>JSON</code> 结构化数据等等，以及全部其他所有 Swift 后台框架加在一起才有的 XML 结构化数据、苹果推送消息 <code>APNS</code>、<code>MqTT</code> 消息队列和 <code>SMTP</code> 邮件发送，甚至大数据也支持。Perfect 的数据库支持非常广泛，其<strong>原生SQL驱动</strong>包括 <code>MySQL</code>、<code>SQLite</code>、<code>PostgreSQL</code> 和 <code>MariaDB</code>，还支持 <code>MongoDB</code>、<code>Redis</code>、<code>CouchDB</code> 甚至还包括 <code>FileMaker</code>（苹果自己的数据库 Swift 都不支持，Perfect 反过来支持——译者注）。<strong>Perfect</strong> 据说还部分支持微软的 <code>ODBC</code>，即多种数据库的底层兼容界面——有点像 <code>ORM</code>，但是以 C 函数库为基础。提到 <code>ORM</code> 数据库对象关系自动化管理，<strong>Perfect</strong>有 <code>StORM</code> 并完整实现了 <code>PostgreSQL</code>、<code>MySQL</code>、<code>CouchDB</code> 和 <code>SQLite</code>。</p>
<p><a href="https://github.com/PerfectlySoft/PerfectDocGenerator" target="_blank" rel="noopener">Perfect文档生成器</a></p>
<h2 id="搭建HTTP服务器"><a href="#搭建HTTP服务器" class="headerlink" title="搭建HTTP服务器"></a>搭建HTTP服务器</h2><div id="badge-container-huos3203-PerfectTemplate-20294e56" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-huos3203-PerfectTemplate-20294e56", "huos3203", "PerfectTemplate", "20294e56", false);
</script>

<p>本章将引导您使用Swift和Perfect软件框架逐步设置一个简单的HTTP服务器。</p>
<h3 id="创建Web应用"><a href="#创建Web应用" class="headerlink" title="创建Web应用"></a>创建Web应用</h3><p><a href="https://github.com/PerfectlySoft/PerfectDocs/blob/master/guide/gettingStartedFromScratch.md" target="_blank" rel="noopener">原文</a></p>
<ol>
<li><p>新建一个文件夹保存项目文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir iPerfect</span><br><span class="line">$ cd iPerfect</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化项目，用<code>SPM</code>软件包管理器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ swift package init --type=executable</span><br><span class="line">Creating executable package: iPerfect</span><br><span class="line">Creating Package.swift</span><br><span class="line">Creating README.md</span><br><span class="line">Creating .gitignore</span><br><span class="line">Creating Sources/</span><br><span class="line">Creating Sources/iPerfect/main.swift</span><br><span class="line">Creating Tests/</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置依赖<br>打开<code>Package.swift</code>文件进行编辑：<br>该文件在要求Swift编译的最低版本为<code>3.0.0</code>，设置<code>target</code>编译依存库<code>PerfectHTTPServer</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// swift-tools-version:4.0</span></span><br><span class="line"><span class="comment">// The swift-tools-version declares the minimum version of Swift required to build this package.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</span><br><span class="line">name: <span class="string">"iPerfect"</span>,</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: <span class="string">"https://github.com/PerfectlySoft/Perfect-HTTPServer.git"</span>, from: <span class="string">"3.0.0"</span>)</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">    .target(</span><br><span class="line">        name: <span class="string">"iPerfect"</span>,</span><br><span class="line">        dependencies: [<span class="string">"PerfectHTTPServer"</span>]),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>编码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir Sources</span><br><span class="line">echo &apos;print(&quot;您好！&quot;)&apos; &gt;&gt; Sources/iPerfect/main.swift</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译和运行<br>现在项目就已经准备好，可以通过以下两个命令编译和运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swift build</span><br><span class="line">.build/debug/iPerfect</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>成功之后，会打印：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你好！！！</span><br></pre></td></tr></table></figure></p>
<h2 id="设置Perfect-HTTPServer服务器"><a href="#设置Perfect-HTTPServer服务器" class="headerlink" title="设置Perfect HTTPServer服务器"></a>设置<strong>Perfect HTTPServer</strong>服务器</h2><h3 id="注册路由和请求／响应句柄"><a href="#注册路由和请求／响应句柄" class="headerlink" title="注册路由和请求／响应句柄"></a>注册路由和请求／响应句柄</h3><p>打开<code>Sources/iPerfect/main.swift</code>文件，把内容替换为以下程序：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PerfectHTTP</span><br><span class="line"><span class="keyword">import</span> PerfectHTTPServer</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册路由和请求／响应句柄</span></span><br><span class="line"><span class="keyword">var</span> routes = <span class="type">Routes</span>()</span><br><span class="line">routes.add(method: .<span class="keyword">get</span>, uri: <span class="string">"/"</span>) &#123;</span><br><span class="line">    request, response <span class="keyword">in</span></span><br><span class="line">    response.setHeader(.contentType, value: <span class="string">"text/html"</span>)</span><br><span class="line">    response.appendBody(string: <span class="string">"&lt;html&gt;&lt;title&gt;Hello, world!&lt;/title&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;"</span>)</span><br><span class="line">    .completed()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="comment">// 启动HTTP服务器</span></span><br><span class="line">    <span class="keyword">try</span> <span class="type">HTTPServer</span>.launch(.server(name: <span class="string">"www.example.ca"</span>, port: <span class="number">8181</span>, routes: routes))</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">"\(error)"</span>) <span class="comment">// fatal error launching one of the servers</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>编译运行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ swift build</span><br><span class="line">$ .build/debug/iPerfect</span><br><span class="line">&gt;&gt;</span><br><span class="line">[INFO] Starting HTTP server www.example.ca on :::8181</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>在浏览器上打开<code>http://127.0.0.1:8181/</code><br>终止服务器：在终端控制台上用组合键<code>control-c</code>可以随时停止服务器。</p>
<h2 id="使用Xcode调试服务器"><a href="#使用Xcode调试服务器" class="headerlink" title="使用Xcode调试服务器"></a>使用Xcode调试服务器</h2><p>生成<strong>iPerfect.xcodeproj</strong><br>Swift软件包管理器（SPM）能够为您的项目<code>iPerfect</code>生成Xcode工程：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift package generate-xcodeproj</span><br></pre></td></tr></table></figure></p>
<h3 id="递归编译设置"><a href="#递归编译设置" class="headerlink" title="递归编译设置"></a>递归编译设置</h3><ol>
<li>设置递归编译项目目录中的所有<code>target</code><br>打开<code>iPerfect.xcodeproj</code>，在检索项目软件库<code>Library Search Paths</code>字典中新增路径：<code>$(PROJECT_DIR)</code> ，路径属性修改为<code>recursive</code>。<br><code>recursive</code>：遍历该目录，<code>non-recursive</code>：默认路径设置；不遍历该目录。<br>如果路径的属性为<code>recursive</code>，那么编译的时候在找库的路径的时候，会遍历该目录下的所有子目录的库文件。<blockquote>
<p>PS：在搭建项目的时候，可以创建一个专门放库文件的文件夹并且设置其属性为<code>recursive</code>:即为<code>$(PROJECT_DIR)/**</code>，相当于遍历项目文件同级下的所有路径(不推荐使用，项目大的话，影响编译的速度)。</p>
</blockquote>
</li>
<li>scheme运行在<strong>My Mac</strong><br>在Xcode打开项目之后，选择可执行目标为 <code>My Mac</code>，并选择正确的Swift工具链。</li>
<li>设置服务器的资源目录<br>为了使服务器能够访问您工程文件夹下的目录，比如html静态网页。<br>进入菜单命令 <code>Product &gt; Scheme &gt; Edit Scheme…</code>，设置工作目录 <code>Use Custom Working Directory</code> 为项目文件夹。 </li>
</ol>
<p>现在您就可以在Xcode中运行调试您的服务器了.</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/02/swift/使用SPM管理依赖库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/02/swift/使用SPM管理依赖库/" class="post-title-link" itemprop="url">使用SPM管理依赖库</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-01 23:57:27" itemprop="dateCreated datePublished" datetime="2018-10-01T23:57:27Z">2018-10-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-03 16:55:41" itemprop="dateModified" datetime="2018-10-03T16:55:41Z">2018-10-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/" itemprop="url" rel="index"><span itemprop="name">swift</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/02/swift/使用SPM管理依赖库/" class="leancloud_visitors" data-flag-title="使用SPM管理依赖库">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">6.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="概念概述"><a href="#概念概述" class="headerlink" title="概念概述"></a>概念概述</h2><p><a href="https://swift.org/package-manager/#conceptual-overview" target="_blank" rel="noopener">Package Manager</a><br><div id="badge-container-huos3203-PerfectTemplate-20294e56" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-huos3203-PerfectTemplate-20294e56", "huos3203", "PerfectTemplate", "20294e56", false);
</script>
</p>
<h3 id="Modules模块"><a href="#Modules模块" class="headerlink" title="Modules模块"></a>Modules模块</h3><p>在 Swift 中我们使用模块来管理代码，每个模块指定一个命名空间并强制指定模块外哪些部分的代码是可以被访问控制的。</p>
<p>一个程序可以将它所有代码聚合在一个模块中，也可以将它作为依赖关系导入到其他模块。除了少量系统提供的模块，像 OS X 中的 Darwin 或者 Linux 中的 Glibc 等的大多数依赖需要代码被下载或者内置才能被使用。</p>
<p>当你将编写的解决特定问题的代码独立成一个模块时，这段代码可以在其他情况下被重新利用。例如，一个模块提供了发起网络请求的功能，在一个照片分享的 app 或者 一个天气的 app 里它都是可以使用的。使用模块可以让你的代码建立在其他开发者的代码之上，而不是你自己去重复实现相同的功能。</p>
<h3 id="Packages包"><a href="#Packages包" class="headerlink" title="Packages包"></a>Packages包</h3><p>一个包由 Swift 源文件和一个清单文件组成。这个清单文件称为 <code>Package.swift</code>，定义包名或者它的内容使用<code>PackageDescription</code> 模块。<br>一个包有一个或者多个目标，每个目标指定一个产品并且可能声明一个或者多个依赖。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import PackageDescription</span><br><span class="line"><span class="built_in">let</span> package = Package(</span><br><span class="line">    name: <span class="string">"DeckOfPlayingCards"</span>,</span><br><span class="line">    products: [</span><br><span class="line">        .library(name: <span class="string">"DeckOfPlayingCards"</span>, targets: [<span class="string">"DeckOfPlayingCards"</span>]),</span><br><span class="line">        .executable(name: <span class="string">"Dealer"</span>, targets: [<span class="string">"Dealer"</span>]),</span><br><span class="line">    ],</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: <span class="string">"https://github.com/apple/example-package-fisheryates.git"</span>, from: <span class="string">"2.0.0"</span>),</span><br><span class="line">        .package(url: <span class="string">"https://github.com/apple/example-package-playingcard.git"</span>, from: <span class="string">"3.0.0"</span>),</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .target(</span><br><span class="line">            name: <span class="string">"DeckOfPlayingCards"</span>,</span><br><span class="line">            dependencies: [<span class="string">"FisherYates"</span>, <span class="string">"PlayingCard"</span>]),</span><br><span class="line">        .testTarget(</span><br><span class="line">            name: <span class="string">"DeckOfPlayingCardsTests"</span>,</span><br><span class="line">            dependencies: [<span class="string">"DeckOfPlayingCards"</span>]),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h3 id="Products产品"><a href="#Products产品" class="headerlink" title="Products产品"></a>Products产品</h3><p>一个<code>target</code>可能构建一个<code>.library()库</code>或者一个<code>.executable()可执行文件</code>作为其产品。<br><code>.library(name: &quot;&quot;, targets: [])</code>库:是包含用于其他Swift 代码导入该模块<br><code>.executable(name: &quot;&quot;, targets: [])</code>可执行文件:是一段可以被操作系统运行的程序。</p>
<h3 id="Dependencies依赖"><a href="#Dependencies依赖" class="headerlink" title="Dependencies依赖"></a>Dependencies依赖</h3><p><code>Dependencies</code>依赖是指<code>Package</code>中代码必须添加的<code>Modules</code>块。<code>Dependencies</code>由<code>.package</code>资源的<code>绝对路径</code>或<code>相对 URL</code> 和<code>包的版本</code>组成。<br>包管理器的作用是通过自动为工程下载和编译所有依赖的过程中，减少协调的成本。这是一个递归的过程：依赖能有自己的依赖，其中每一个也可以具有依赖，形成了一个依赖相关图。</p>
<h2 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h2><h3 id="创建依赖库lib-Package"><a href="#创建依赖库lib-Package" class="headerlink" title="创建依赖库lib Package"></a>创建依赖库lib Package</h3><ol>
<li><p>建一个<code>target</code>表示标准的52张扑克牌的<code>PlayingCard</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir PlayingCard</span><br><span class="line">cd PlayingCard</span><br><span class="line">swift package init</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建公共实现类<br><code>PlayingCard</code>定义<code>PlayingCard</code>类型，它由<code>Suit</code>枚举值(梅花、方块、红心、黑桃)和<code>Rank</code>枚举值(Ace、2、3、…、Jack、Queen、King)组成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public enum Rank : Int &#123;</span><br><span class="line">    case Ace = 1</span><br><span class="line">    case Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten</span><br><span class="line">    case Jack, Queen, King</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public enum Suit: String &#123;</span><br><span class="line">    case Spades, Hearts, Diamonds, Clubs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public struct PlayingCard &#123;</span><br><span class="line">    let rank: Rank</span><br><span class="line">    let suit: Suit</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>按照约定，一个<code>target</code>所有的源文件都存在相应的<code>Sources/&lt;target-name&gt;</code>目录下，默认情况下，<code>库模块</code>使用<code>public</code>来声明类型和方法，这些类型和方法位于<code>Sources/&lt;target-name&gt;</code>中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">example-package-playingcard</span><br><span class="line">├── Sources</span><br><span class="line">│   └── PlayingCard</span><br><span class="line">│       ├── PlayingCard.swift</span><br><span class="line">│       ├── Rank.swift</span><br><span class="line">│       └── Suit.swift</span><br><span class="line">└── Package.swift</span><br></pre></td></tr></table></figure></p>
<p><code>PlayingCard</code>因为不生成<code>executable</code>可执行文件，这种类型的<code>target</code>成为<code>库</code>，当构建一个模块可以被依赖导入使用。</p>
<ol start="3">
<li>运行<code>swift build</code>命令，将编译生成<code>PlayingCard</code>模块。</li>
</ol>
<h3 id="使用-if-else-endif构建配置语句"><a href="#使用-if-else-endif构建配置语句" class="headerlink" title="使用 #if #else #endif构建配置语句"></a>使用 <code>#if #else #endif</code>构建配置语句</h3><ol>
<li>创建<code>fisher</code>模块<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir fisher</span><br><span class="line">cd fisher</span><br><span class="line">swift package init</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><code>fisher</code>与<code>PlayingCard</code>不同，此模块不定义任何新类型。相反，它扩展了现有的类型(特别是<code>CollectionType</code>和<code>MutableCollectionType</code>协议)，以添加<code>shuffle()</code>方法和它的变体副本<code>shuffleInPlace()</code>。</p>
<ol start="2">
<li>使用构建配置语句 <code>#if #else #endif</code><br><code>shuffleInPlace()</code>的实现使用<code>Fisher-Yates</code>算法随机排列集合中的元素。因为Swift标准库不提供随机数生成器，所以该方法必须调用从系统模块导入的函数。为了使该函数与<code>macOS</code>和<code>Linux</code>兼容，代码使用构建配置语句。<br>在<code>macOS</code>中，系统模块是<code>Darwin</code>，它提供了<code>arc4random_uniform(_:)</code>函数。<br>在<code>Linux</code>中，系统模块为<code>Glibc</code>，它提供了<code>random()</code>函数:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#if os(Linux)</span><br><span class="line">import Glibc</span><br><span class="line">#else</span><br><span class="line">import Darwin.C</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">public extension MutableCollectionType where Index == Int &#123;</span><br><span class="line">    mutating func shuffleInPlace() &#123;</span><br><span class="line">        if count &lt;= 1 &#123; return &#125;</span><br><span class="line"></span><br><span class="line">        for i in 0..&lt;count - 1 &#123;</span><br><span class="line">            #if os(Linux)</span><br><span class="line">                let j = Int(random() % (count - i)))) + i</span><br><span class="line">            #else</span><br><span class="line">                let j = Int(arc4random_uniform(UInt32(count - i))) + i</span><br><span class="line">            #endif</span><br><span class="line">                if i == j &#123; continue &#125;</span><br><span class="line">                swap(&amp;self[i], &amp;self[j])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="依赖库导入及使用"><a href="#依赖库导入及使用" class="headerlink" title="依赖库导入及使用"></a>依赖库导入及使用</h3><p><code>DeckOfPlayingCards</code>包将前两个包组合在一起:它定义了一种桥牌类型，该类型在一个<code>PlayingCard</code>值数组上使用<code>fisher()</code>方法。<br>要使用<code>fisher</code>和<code>PlayingCards</code>模块，必须在<code>DeckOfPlayingCards</code>模块的清单文件<code>Package.swift</code>中声明为它们<code>package</code>依赖项。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// swift-tools-version:4.0</span><br><span class="line">import PackageDescription</span><br><span class="line"></span><br><span class="line">let package = Package(</span><br><span class="line">    name: &quot;DeckOfPlayingCards&quot;,</span><br><span class="line">    products: [</span><br><span class="line">        .library(name: &quot;DeckOfPlayingCards&quot;, targets: [&quot;DeckOfPlayingCards&quot;]),</span><br><span class="line">    ],</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: &quot;https://github.com/apple/example-package-fisheryates.git&quot;, from: &quot;2.0.0&quot;),</span><br><span class="line">        .package(url: &quot;https://github.com/apple/example-package-playingcard.git&quot;, from: &quot;3.0.0&quot;),</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .target(</span><br><span class="line">            name: &quot;DeckOfPlayingCards&quot;,</span><br><span class="line">            dependencies: [&quot;FisherYates&quot;, &quot;PlayingCard&quot;]),</span><br><span class="line">        .testTarget(</span><br><span class="line">            name: &quot;DeckOfPlayingCardsTests&quot;,</span><br><span class="line">            dependencies: [&quot;DeckOfPlayingCards&quot;]),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>每个依赖项指定源<code>URL</code>和<code>from:</code>版本号。<br><code>源URL</code>是解析到Git存储库的当前用户可以访问的URL。版本需求遵循语义版本控制(SemVer)约定，用于确定签出哪个Git标签并使用它来构建依赖关系。对于依赖项<code>FisherYates</code> ，将使用最新版本主版本为2(例如，2.0.4)。类似地，<code>PlayingCard</code>依赖项将使用最新版本主版本为3。<br>当运行<code>swift build</code>命令时，包管理器下载所有依赖项，编译、并链接到包模块。这样<code>DeckOfPlayingCards</code>使用<code>import</code>语句来访问依赖模块中<code>public</code>类型的属性和方法。<br>您可以在项目根目录下的<code>.build/checkouts</code>目录中看到下载的源代码，在项目根目录下的<code>.build</code>目录中看到中间的构建产品。</p>
<h2 id="解决依赖传递关系"><a href="#解决依赖传递关系" class="headerlink" title="解决依赖传递关系"></a>解决依赖传递关系</h2><p>构建<code>Dealer</code>模块,它依赖于<code>DeckOfPlayingCards</code>包，而<code>DeckOfPlayingCards</code>包又依赖于<code>PlayingCard</code>和<code>fisher</code>包。然而，由于Swift包管理器自动解析传递依赖项，您只需将<code>DeckOfPlayingCards</code>包声明为依赖项即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// swift-tools-version:4.0</span><br><span class="line"></span><br><span class="line">import PackageDescription</span><br><span class="line"></span><br><span class="line">let package = Package(</span><br><span class="line">    name: &quot;dealer&quot;,</span><br><span class="line">    products: [</span><br><span class="line">        .executable(name: &quot;Dealer&quot;, targets: [&quot;Dealer&quot;]),</span><br><span class="line">    ],</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: &quot;https://github.com/apple/example-package-deckofplayingcards.git&quot;, from: &quot;3.0.0&quot;),</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .target(</span><br><span class="line">        name: &quot;Dealer&quot;,</span><br><span class="line">        dependencies: [&quot;DeckOfPlayingCards&quot;]),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>依赖传递关系也体现在Swift源文件代码<code>import</code>导入一个模块，就可以使用该某块下所有依赖库的类型。例如<code>Dealer</code>模块的<code>main.swift</code>文件。在<code>DeckOfPlayingCards</code>中的<code>Deck</code>类型和<code>PlayingCard</code>中的<code>PlayingCard</code>类型。尽管<code>Deck</code>类型的<code>shuffle()</code>方法在内部使用了<code>fisher</code>模块，但该模块不需要在<code>main.swift</code>中导入。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import PlayingCard</span><br><span class="line">import DeckOfPlayingCards</span><br><span class="line"></span><br><span class="line">let numberOfCards = 10</span><br><span class="line"></span><br><span class="line">var deck = Deck.standard52CardDeck()</span><br><span class="line">deck.shuffle()</span><br><span class="line"></span><br><span class="line">for _ in 1...numberOfCards &#123;</span><br><span class="line">    guard let card = deck.deal() else &#123;</span><br><span class="line">        print(&quot;No More Cards!&quot;)</span><br><span class="line">        break</span><br><span class="line">    &#125;</span><br><span class="line">    print(card)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="构建并运行可执行文件"><a href="#构建并运行可执行文件" class="headerlink" title="构建并运行可执行文件"></a>构建并运行可执行文件</h3><p>根据约定，一个<code>target</code>的根目录中包含一个名为<code>main.swift</code>文件，可以构建成一个可执行文件。<br>运行<code>swift build</code>命令，然后运行<code>.build/debug</code>目录下的<code>Dealer</code>可执行文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ swift build</span><br><span class="line">$ ./.build/debug/Dealer</span><br><span class="line">♠︎6</span><br><span class="line">♢K</span><br><span class="line">♢2</span><br><span class="line">♡8</span><br><span class="line">♠︎7</span><br><span class="line">♣︎10</span><br><span class="line">♣︎5</span><br><span class="line">♢A</span><br><span class="line">♡Q</span><br><span class="line">♡7</span><br></pre></td></tr></table></figure></p>
<h3 id="两个坑"><a href="#两个坑" class="headerlink" title="两个坑"></a>两个坑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift package generate-xcodeproj</span><br></pre></td></tr></table></figure>
<ol>
<li>每次更新或添加库或框架，xcodeproj就需要重新创建一次，不然无法引用到新库或新框架；</li>
<li>在source文件夹如果发生任何改动，库或框架的更新就会失败。<br>这就是为什么我要专门建一个工程来管理这些框架或者库（这是我踩的最恶心的坑）。为了解决这个大坑，就再创建一个项目工程，然后使用workspace来管理<br><a href="https://blog.csdn.net/loveqcx123/article/details/70160379" target="_blank" rel="noopener">今天开始用swift写服务器(一)</a></li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/02/swift/Swift单文件相关命令行工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/02/swift/Swift单文件相关命令行工具/" class="post-title-link" itemprop="url">Swift单文件相关命令行工具</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-01 21:02:49 / 修改时间：23:57:27" itemprop="dateCreated datePublished" datetime="2018-10-01T21:02:49Z">2018-10-01</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/" itemprop="url" rel="index"><span itemprop="name">swift</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/02/swift/Swift单文件相关命令行工具/" class="leancloud_visitors" data-flag-title="Swift单文件相关命令行工具">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">965</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="直接用-swift-命令执行"><a href="#直接用-swift-命令执行" class="headerlink" title="直接用 swift 命令执行"></a>直接用 swift 命令执行</h2><p><code>xcrun swift</code>可以直接将一个 <code>.swift</code>文件作为命令行工具的输入，这样里面的代码也会被自动地编译和执行。我们甚至还可以在 <code>.swift</code> 文件最上面加上命令行工具的路径，然后将文件权限改为可执行，之后就可以直接执行这个 .swift 文件了：</p>
<ol>
<li><p>hello.swift</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env xcrun swift </span></span><br><span class="line">println(<span class="string">"hello"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>终端设置为可执行权限，并运行打印：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; chmod 755 hello.swift </span><br><span class="line">&gt; ./hello.swift </span><br><span class="line">// 输出： </span><br><span class="line">hello</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>这些特性与其他的解释性语言表现得完全一样</p>
</blockquote>
<h2 id="swiftc"><a href="#swiftc" class="headerlink" title="swiftc"></a>swiftc</h2><p>相对于直接用 swift 命令执行，Swift 命令行工具的另一个常用的地方是直接脱离 Xcode 环境进行编译和生成可执行的二进制文件。我们可以使用 swiftc 来进行编译，比如下面的例子：</p>
<ol>
<li><p>MyClass.swift</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123; </span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">"XiaoMing"</span> </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">()</span></span> &#123; </span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Hello \(name)"</span>) </span><br><span class="line">        &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>main.swift</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> object = <span class="type">MyClass</span>() </span><br><span class="line">object.hello()</span><br></pre></td></tr></table></figure>
</li>
<li><p>终端编译运行，将生成一个名叫 <code>main</code> 的可执行文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; xcrun swiftc MyClass.swift main.swift</span><br><span class="line">&gt; ./main  //运行main文件</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>利用这个方法，我们就可以用 Swift 写出一些命令行的程序了。</p>
<p>最后想说明的一个 Swift 命令行工具的使用案例是生成汇编级别的代码。有时候我们想要确认经过优化后的汇编代码实际上做了些什么。swiftc 提供了参数来生成 asm 级别的汇编代码：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swiftc -O hello.swift &gt; hello.asm</span><br></pre></td></tr></table></figure></p>
<p>Swift 的命令行工具还有不少强大的功能，对此感兴趣的读者不妨使用 <code>xcrun swift --help</code> 以及 <code>xcrun swiftc --help</code> 来查看具体还有哪些参数可以使用。</p>
<h2 id="swiftc-g支持lldb调试"><a href="#swiftc-g支持lldb调试" class="headerlink" title="swiftc -g支持lldb调试"></a><code>swiftc -g</code>支持lldb调试</h2>
          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/02/swift/swift在终端使用LLDB调试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/02/swift/swift在终端使用LLDB调试/" class="post-title-link" itemprop="url">swift在终端使用LLDB调试</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-01 21:02:49" itemprop="dateCreated datePublished" datetime="2018-10-01T21:02:49Z">2018-10-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-17 19:47:48" itemprop="dateModified" datetime="2018-10-17T19:47:48Z">2018-10-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/" itemprop="url" rel="index"><span itemprop="name">swift</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/02/swift/swift在终端使用LLDB调试/" class="leancloud_visitors" data-flag-title="swift在终端使用LLDB调试">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="https://swift.org/getting-started/#using-the-lldb-debugger" target="_blank" rel="noopener">Using the LLDB Debugger</a><br>使用LLDB调试器一步一步地运行Swift程序，通过设置<code>断点</code>调试运行状态。</p>
<ol>
<li><p>创建一个名<code>Factorial.swift</code>，定义了一个<code>factorial(n:)</code>函数，并打印调用该函数的结果:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func factorial(n: Int) -&gt; Int &#123;</span><br><span class="line">    <span class="keyword">if</span> n &lt;= 1 &#123; <span class="built_in">return</span> n &#125;</span><br><span class="line">    <span class="built_in">return</span> n * factorial(n: n - 1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> number = 4</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(number)! is equal to \(factorial(n: number))"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>swiftc命令<br>运行swiftc命令<code>-g</code>选项生成<code>swift</code>调试信息,在目录中生存可执行的Factorial文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ swiftc -g Factorial.swift</span><br><span class="line">$ ls</span><br><span class="line">Factorial.dSYM</span><br><span class="line">Factorial.swift</span><br><span class="line">Factorial*</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用lldb启动Factorial文件<br>通过LLDB调试器命令<code>lldb</code>运行:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ lldb Factorial</span><br><span class="line">(lldb) target create <span class="string">"Factorial"</span></span><br><span class="line">Current executable <span class="built_in">set</span> to <span class="string">'Factorial'</span> (x86_64).</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置断点<br>使用<code>breakpoint set</code> (<code>b</code>) 命令在<code>factorial(n:)</code>函数的第2行中设置一个断点，每次执行函数时中断进程:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lldb) b 2</span><br><span class="line">Breakpoint 1: <span class="built_in">where</span> = Factorial`Factorial.factorial (Swift.Int) -&gt; Swift.Int + 12</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行调试<br>使用<code>run</code> (<code>r</code>)命令运行进程。进程在<code>factorial(n:)</code>函数的调用位置停止。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(lldb) r</span><br><span class="line">Process 40246 resuming</span><br><span class="line">Process 40246 stopped</span><br><span class="line">* thread <span class="comment">#1: tid = 0x14dfdf, 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1</span></span><br><span class="line">frame <span class="comment">#0: 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2</span></span><br><span class="line">   1    func factorial(n: Int) -&gt; Int &#123;</span><br><span class="line">-&gt; 2        <span class="keyword">if</span> n &lt;= 1 &#123; <span class="built_in">return</span> n &#125;</span><br><span class="line">   3        <span class="built_in">return</span> n * factorial(n: n - 1)</span><br><span class="line">   4    &#125;</span><br><span class="line">   5</span><br><span class="line">   6    <span class="built_in">let</span> number = 4</span><br><span class="line">   7    <span class="built_in">print</span>(<span class="string">"\(number)! is equal to \(factorial(n: number))"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>Use the print (p) command to inspect the value of the n parameter.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lldb) p n</span><br><span class="line">(Int) <span class="variable">$R0</span> = 4</span><br></pre></td></tr></table></figure></p>
<p>The print command can evaluate Swift expressions as well.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lldb) p n * n</span><br><span class="line">(Int) <span class="variable">$R1</span> = 16</span><br></pre></td></tr></table></figure></p>
<p>Use the <code>backtrace</code> (<code>bt</code>) command to show the frames leading to <code>factorial(n:)</code> being called.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(lldb) bt</span><br><span class="line">* thread <span class="comment">#1: tid = 0x14e393, 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1</span></span><br><span class="line">    * frame <span class="comment">#0: 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2</span></span><br><span class="line">    frame <span class="comment">#1: 0x0000000100000daf Factorial`main + 287 at Factorial.swift:7</span></span><br><span class="line">    frame <span class="comment">#2: 0x00007fff890be5ad libdyld.dylib`start + 1</span></span><br><span class="line">    frame <span class="comment">#3: 0x00007fff890be5ad libdyld.dylib`start + 1</span></span><br></pre></td></tr></table></figure></p>
<p>Use the <code>continue</code> (<code>c</code>) command to resume the process until the breakpoint is hit again.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(lldb) c</span><br><span class="line">Process 40246 resuming</span><br><span class="line">Process 40246 stopped</span><br><span class="line">* thread <span class="comment">#1: tid = 0x14e393, 0x0000000100000e7c Factorial`Factorial.factorial (n=3) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1</span></span><br><span class="line">frame <span class="comment">#0: 0x0000000100000e7c Factorial`Factorial.factorial (n=3) -&gt; Swift.Int + 12 at Factorial.swift:2</span></span><br><span class="line">   1    func factorial(n: Int) -&gt; Int &#123;</span><br><span class="line">-&gt; 2        <span class="keyword">if</span> n &lt;= 1 &#123; <span class="built_in">return</span> n &#125;</span><br><span class="line">   3        <span class="built_in">return</span> n * factorial(n: n - 1)</span><br><span class="line">   4    &#125;</span><br><span class="line">   5</span><br><span class="line">   6    <span class="built_in">let</span> number = 4</span><br><span class="line">   7    <span class="built_in">print</span>(<span class="string">"\(number)! is equal to \(factorial(n: number))"</span>)</span><br></pre></td></tr></table></figure></p>
<p>Use the <code>print</code> (<code>p</code>) command again to inspect the value of the n parameter for the second call to<code>factorial(n:)</code>.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lldb) p n</span><br><span class="line">(Int) <span class="variable">$R2</span> = 3</span><br></pre></td></tr></table></figure></p>
<ol start="6">
<li>取消断点<br>Use the <code>breakpoint disable</code> (<code>br di</code>) command to disable all breakpoints and the <code>continue</code> (<code>c</code>) command to have the process run until it exits.<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(lldb) br di</span><br><span class="line">All breakpoints disabled. (1 breakpoints)</span><br><span class="line">(lldb) c</span><br><span class="line">Process 40246 resuming</span><br><span class="line">4! is equal to 24</span><br><span class="line">Process 40246 exited with status = 0 (0x00000000)</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/10/01/swift/SPM相关命令工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/01/swift/SPM相关命令工具/" class="post-title-link" itemprop="url">SPM相关命令工具</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-01 14:52:23 / 修改时间：23:57:27" itemprop="dateCreated datePublished" datetime="2018-10-01T14:52:23Z">2018-10-01</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swift/" itemprop="url" rel="index"><span itemprop="name">swift</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/01/swift/SPM相关命令工具/" class="leancloud_visitors" data-flag-title="SPM相关命令工具">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><h2 id="概念概述"><a href="#概念概述" class="headerlink" title="概念概述"></a>概念概述</h2><p><a href="https://swift.org/getting-started" target="_blank" rel="noopener">getting-started</a><br><div id="badge-container-huos3203-PerfectTemplate-20294e56" class="hexo-github" style="width: ="></div>
<script src="/hexo-github/badge.js"></script>
<script type="text/javascript">
  loadStyle("/hexo-github/style.css");
  loadStyle("/hexo-github/octicons/octicons.css");
  new Badge("#badge-container-huos3203-PerfectTemplate-20294e56", "huos3203", "PerfectTemplate", "20294e56", false);
</script>
</p>
<h2 id="使用Swift编译系统"><a href="#使用Swift编译系统" class="headerlink" title="使用Swift编译系统"></a>使用Swift编译系统</h2><p>Swift 编译系统为编译库、可执行文件和在不同工程之间共享代码提供了基本的约定。</p>
<h3 id="swift-工具"><a href="#swift-工具" class="headerlink" title="swift 工具"></a>swift 工具</h3><ul>
<li>swift package</li>
<li>swift package generate-xcodeproj</li>
<li>swift run</li>
<li>swift build</li>
<li>swift test</li>
</ul>
<h3 id="swift-package创建一个HelloSPM"><a href="#swift-package创建一个HelloSPM" class="headerlink" title="swift package创建一个HelloSPM"></a><code>swift package</code>创建一个<code>Hello</code>SPM</h3><ol>
<li><p>创建<code>Hello</code>目录，目录名会作为SPM名称：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir Hello</span><br><span class="line">$ cd Hello</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>swift package</code>初始化为SPM工程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ swift package init</span><br><span class="line">├── Package.swift   // 依赖清单文件</span><br><span class="line">├── README.md</span><br><span class="line">├── Sources         // 源码目录</span><br><span class="line">│   └── Hello</span><br><span class="line">│       └── Hello.swift</span><br><span class="line">└── Tests</span><br><span class="line">├── HelloTests</span><br><span class="line">│   └── HelloTests.swift</span><br><span class="line">└── LinuxMain.swift</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>每个包在其根目录下都必须拥有一个命名为<code>Package.swift</code>清单文件。如果清单文件为空，那包管理器将会使用常规默认的方式来编译包。</p>
<ol start="3">
<li><p><code>swift build</code>编译SPM<br>编译会先解析<code>Package.swift</code>项目配置和下载依赖库等环境，然后编译源码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ swift build  <span class="comment">#编译可执行文件</span></span><br><span class="line">Compile Swift Module <span class="string">'Hello'</span> (1 sources)</span><br></pre></td></tr></table></figure>
</li>
<li><p>swift test运行SPM的单元测试</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ swift <span class="built_in">test</span></span><br><span class="line">Compile Swift Module <span class="string">'HelloTests'</span> (1 sources)</span><br><span class="line">Linking ./.build/x86_64-apple-macosx10.10/debug/HelloPackageTests.xctest/Contents/MacOS/HelloPackageTests</span><br><span class="line">Test Suite <span class="string">'All tests'</span> started at 2016-08-29 08:00:31.453</span><br><span class="line">Test Suite <span class="string">'HelloPackageTests.xctest'</span> started at 2016-08-29 08:00:31.454</span><br><span class="line">Test Suite <span class="string">'HelloTests'</span> started at 2016-08-29 08:00:31.454</span><br><span class="line">Test Case <span class="string">'-[HelloTests.HelloTests testExample]'</span> started.</span><br><span class="line">Test Case <span class="string">'-[HelloTests.HelloTests testExample]'</span> passed (0.001 seconds).</span><br><span class="line">Test Suite <span class="string">'HelloTests'</span> passed at 2016-08-29 08:00:31.455.</span><br><span class="line">Executed 1 <span class="built_in">test</span>, with 0 failures (0 unexpected) <span class="keyword">in</span> 0.001 (0.001) seconds</span><br><span class="line">Test Suite <span class="string">'HelloPackageTests.xctest'</span> passed at 2016-08-29 08:00:31.455.</span><br><span class="line">Executed 1 <span class="built_in">test</span>, with 0 failures (0 unexpected) <span class="keyword">in</span> 0.001 (0.001) seconds</span><br><span class="line">Test Suite <span class="string">'All tests'</span> passed at 2016-08-29 08:00:31.455.</span><br><span class="line">Executed 1 <span class="built_in">test</span>, with 0 failures (0 unexpected) <span class="keyword">in</span> 0.001 (0.002) seconds</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="创建一个可执行的SPM"><a href="#创建一个可执行的SPM" class="headerlink" title="创建一个可执行的SPM"></a>创建一个可执行的SPM</h3><p>可运行的SPM必须包含<code>main.swift</code>文件。SPM会把<code>main.swift</code>编译成可执行文件的二进制文件。<br>在本例中，SPM将生成一个名为<code>Hello</code>的可执行文件，输出“Hello, world!”</p>
<ol>
<li><p>创建</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir Hello</span><br><span class="line">$ <span class="built_in">cd</span> Hello</span><br><span class="line">$ swift package init --<span class="built_in">type</span> executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>两种运行方式<br>2.1 先编译在运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ swift build</span><br><span class="line">Compile Swift Module &apos;Hello&apos; (1 sources)</span><br><span class="line">Linking ./.build/x86_64-apple-macosx10.10/debug/Hello</span><br><span class="line"></span><br><span class="line">$ .build/x86_64-apple-macosx10.10/debug/Hello</span><br><span class="line">Hello, world!</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.2 <code>swift run</code>直接运行<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ swift run Hello</span><br><span class="line">Compile Swift Module <span class="string">'Hello'</span> (1 sources)</span><br><span class="line">Linking ./.build/x86_64-apple-macosx10.10/debug/Hello</span><br><span class="line">Hello, world!</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>多个源文件协作<br>下一步，让我们在新的资源文件里定义一个新的方法 <code>sayHello(_:)</code> 然后直接用 <code>print(_:)</code> 替换执行调用的内容。<br>在 <code>Sources/</code> 目录下创建一个新文件命名为 <code>Greeter.swift</code> 然后输入如下代码：<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(name: String)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello, \(name)!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><code>sayHello(_:)</code> 方法带一个单一的字符串参数，然后在前面打印一个 “Hello”，后面跟着函数参数单词 “World”。</p>
<p>现在打开 <code>main.swift</code>， 然后替换原来的内容为下面代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="type">Process</span>.arguments.<span class="built_in">count</span> != <span class="number">2</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Usage: hello NAME"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="type">Process</span>.arguments[<span class="number">1</span>]</span><br><span class="line">    sayHello(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>跟之前的硬编码不同，<code>main.swift</code> 现在从命令行参数中读取。替代之前直接调用 <code>print(_:)</code>， <code>main.swift</code> 现在调用 <code>sayHello(_:)</code> 方法。因为这个方法是 <code>Hello 模块</code>的一部分，所以不需要使用到 <code>import</code> 语句。</p>
<p>运行 swift build 并尝试 Hello 的新版本：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ swift build</span><br><span class="line">$ .build/debug/<span class="type">Hello</span> 'whoami'</span><br></pre></td></tr></table></figure></p>
<p>目前为止，你已经能够运用开源 Swift 来运行一些你想要的程序了 。<br>要了解Swift包管理器，包括如何构建模块、导入依赖项和映射系统库，请参阅网站的<a href="https://swift.org/package-manager" target="_blank" rel="noopener">Swift包管理器</a>部分。</p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huos3203.github.io/2018/09/30/macOS/利用JavaScript构建OSX原生应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iTBoyer">
      <meta itemprop="description" content="不物喜，不己悲，善假物，易参行！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="布衣男儿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/30/macOS/利用JavaScript构建OSX原生应用/" class="post-title-link" itemprop="url">利用JavaScript构建OSX原生应用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-29 18:35:50" itemprop="dateCreated datePublished" datetime="2018-09-29T18:35:50Z">2018-09-29</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/macOS/" itemprop="url" rel="index"><span itemprop="name">macOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/30/macOS/利用JavaScript构建OSX原生应用/" class="leancloud_visitors" data-flag-title="利用JavaScript构建OSX原生应用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">热度：</span>
              
                <span class="leancloud-visitors-count"></span>
                <span>℃</span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">344</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">NaN:aN</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <link rel="stylesheet" href="/owl.css"><p><a href="https://segmentfault.com/a/1190000002504649" target="_blank" rel="noopener">利用JavaScript构建OSX应用</a><br><a href="https://github.com/tylergaw/js-osx-app-examples" target="_blank" rel="noopener">Example OS X applications written in JavaScript.</a><br><a href="https://github.com/JXA-Cookbook/JXA-Cookbook" target="_blank" rel="noopener">JavaScript for Automation Cookbook</a><br><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000" target="_blank" rel="noopener">廖雪峰的JavaScript教程</a><br><a href="https://www.w3cschool.cn/javascript/" target="_blank" rel="noopener">W3Cschool javascript教程</a><br><a href="https://www.jianshu.com/p/4b236af8745c" target="_blank" rel="noopener">JavaScript快速入门</a></p>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p><a href="https://www.jianshu.com/p/37c3fac40be2" target="_blank" rel="noopener">UIAutomation的简单使用方法</a><br><a href="http://www.cnblogs.com/vowei/archive/2012/08/10/2631949.html" target="_blank" rel="noopener">如何使用UIAutomation进行iOS 自动化测试（Part I）</a><br><a href="https://developer.telerik.com/featured/javascript-os-x-automation-example/" target="_blank" rel="noopener">JavaScript for OS X Automation by Example</a><br><a href="https://developer.apple.com/library/archive/releasenotes/InterapplicationCommunication/RN-JavaScriptForAutomation/Articles/OSX10-10.html" target="_blank" rel="noopener">JavaScript For Automation</a><br><a href="http://www.cocoachina.com/ios/20180402/22865.html" target="_blank" rel="noopener">iOS 程序员效率提升利器之 AppleScript</a><br><a href="https://www.jianshu.com/p/816667ee92ce" target="_blank" rel="noopener">Numbers入门 — 附录：脚本 AppleScript 与 Numbers</a></p>

          
        
      
    </div>

    

    <div>
    
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="iTBoyer">
            
              <p class="site-author-name" itemprop="name">iTBoyer</p>
              <div class="site-description motion-element" itemprop="description">不物喜，不己悲，善假物，易参行！</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">287</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">58</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">84</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          
            <!--博客-->
            
                <div class="feed-link motion-element">
                    <a href="/podcast.xml" rel="alternate">
                        <i class="fa fa-rss"></i>
                        我的博客
                    </a>
                </div>
            
            
                <div class="feed-link motion-element">
                    <a href="/docs" rel="alternate">
                        <i class="fa fa-rss"></i>
                        我的阅读
                    </a>
                </div>
            
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/huos3203" title="GitHub &rarr; https://github.com/huos3203" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://weibo.com/1791281385" title="微博 &rarr; http://weibo.com/1791281385" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>微博</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://douban.com/people/boyers" title="豆瓣 &rarr; http://douban.com/people/boyers" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>豆瓣</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://www.zhihu.com/people/boyers" title="知乎 &rarr; http://www.zhihu.com/people/boyers" rel="noopener" target="_blank"><i class="fa fa-fw fa-snapchat"></i>知乎</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:iTBoyer@qq.com" title="E-Mail &rarr; mailto:iTBoyer@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                学习园地
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/" title="swift文档" target="_blank">swift文档</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/matteocrippa/awesome-swift" title="swift酷库" target="_blank">swift酷库</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://swift.org/getting-started/" title="SPM终端开发" target="_blank">SPM终端开发</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/PerfectlySoft/Perfect/blob/master/README.zh_CN.md" title="Perfect服务器端" target="_blank">Perfect服务器端</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/uraimo/Awesome-Swift-Playgrounds" title="Playground" target="_blank">Playground</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.objccn.io" title="objc中国" target="_blank">objc中国</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://nshipster.cn" title="NSHipster" target="_blank">NSHipster</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques" title="动画" target="_blank">动画</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://git-scm.com/book/zh" title="GitPro" target="_blank">GitPro</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://kaopu.so/pan" title="全盘搜" target="_blank">全盘搜</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://wherebt.com" title="BT导航网" target="_blank">BT导航网</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://mp.weixin.qq.com" title="小程序官方" target="_blank">小程序官方</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://onevcat.com" title="王维" target="_blank">王维</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.devtang.com" title="唐巧" target="_blank">唐巧</a>
                  </li>
                
              </ul>
            </div>
          
            
            
                <div class="links-of-blogroll motion-element links-of-blogroll-block">
                    <div class="links-of-blogroll-title">
                        <i class="fa  fa-fw fa-link"></i>
                        在线工具
                    </div>
                    <ul class="links-of-blogroll-list">
                        
                            <li class="links-of-blogroll-item">
                            <a href="http://blog.didispace.com/tools/online-markdown/" title="MarkDown转公众号" target="_blank">MarkDown转公众号</a>
                            </li>
                        
                            <li class="links-of-blogroll-item">
                            <a href="https://leetcode-cn.com/playground/new/empty" title="leetcode工具" target="_blank">leetcode工具</a>
                            </li>
                        
                            <li class="links-of-blogroll-item">
                            <a href="https://www.lintcode.com/problem/" title="lintcode编码" target="_blank">lintcode编码</a>
                            </li>
                        
                    </ul>
                </div>
            
          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  
    <div id="sidebar-dimmer"></div>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iTBoyer</span>

  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">NaN:aN</span>
  
</div>









<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<i class="fa fa-user-md"></i>
<span id="busuanzi_container_site_uv">
您是本站第:<span id="busuanzi_value_site_uv"></span>位小伙伴 |
</span>
<span id="busuanzi_container_site_pv">
本站总<span id="busuanzi_value_site_pv"></span>次访问 |
</span>
<span class="post-count"> 博客全站共字</span>
</div>
<div class="copyright">
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
</div>


<script>
var now = new Date();
function createtime() {
var grt= new Date("02/14/2018 12:49:00");//此处修改你的建站时间或者网站上线时间
now.setTime(now.getTime()+250);
days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
}
setInterval("createtime()",250);
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  

  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.2"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.2"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'ue8PI3eFeweMAjNgpAAIfiRi-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'ue8PI3eFeweMAjNgpAAIfiRi-gzGzoHsz',
                'X-LC-Key': '2kHl2CEoDUKiHcVvz0dhu5rF',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  
  
  
  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      const selection = document.getSelection();
      const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
      if (selected) {
        selection.removeAllRanges();
        selection.addRange(selected);
      }
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"live2d-widget-model-wanko"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>
</html>
